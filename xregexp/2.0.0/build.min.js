(function(e){"use strict";function t(e){var t=/^(?:\(\?:\))?\^/,i=/\$(?:\(\?:\))?$/;return i.test(e.replace(/\\[\s\S]/g,""))?e.replace(t,"").replace(i,""):e}function i(t){return e.isRegExp(t)?t.xregexp&&!t.xregexp.isNative?t:e(t.source):e(t)}var n=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,r=e.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,n],"g");e.build=function(o,s,a){var l,c,h,u,d=/^\(\?([\w$]+)\)/.exec(o),p={},f=0,m=0,g=[0];d&&(a=a||"",d[1].replace(/./g,function(e){a+=a.indexOf(e)>-1?"":e}));for(u in s)s.hasOwnProperty(u)&&(h=i(s[u]),p[u]={pattern:t(h.source),names:h.xregexp.captureNames||[]});return o=i(o),c=o.xregexp.captureNames||[],o=o.source.replace(r,function(e,t,i,r,o){var s,a,h=t||i;if(h){if(!p.hasOwnProperty(h))throw new ReferenceError("undefined property "+e);return t?(s=c[m],g[++m]=++f,a="(?<"+(s||h)+">"):a="(?:",l=f,a+p[h].pattern.replace(n,function(e,t,i){if(t){if(s=p[h].names[f-l],++f,s)return"(?<"+s+">"}else if(i)return"\\"+(+i+l);return e})+")"}if(r){if(s=c[m],g[++m]=++f,s)return"(?<"+s+">"}else if(o)return"\\"+g[+o];return e}),e(o,a)}})(XRegExp);
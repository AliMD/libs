/*!
 * Draggabilly PACKAGED v1.0.2
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 */

(function(t){"use strict";function e(t){return RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,e){var i=n(t,e)?r:o;i(t,e)}var n,o,r;"classList"in document.documentElement?(n=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},r=function(t,e){t.classList.remove(e)}):(n=function(t,i){return e(i).test(t.className)},o=function(t,e){n(t,e)||(t.className=t.className+" "+e)},r=function(t,i){t.className=t.className.replace(e(i)," ")});var s={hasClass:n,addClass:o,removeClass:r,toggleClass:i,has:n,add:o,remove:r,toggle:i};"function"==typeof define&&define.amd?define(s):t.classie=s})(window),function(t){"use strict";function e(){}function i(t,e){if(o)return e.indexOf(t);for(var i=e.length;i--;)if(e[i]===t)return i;return-1}var n=e.prototype,o=Array.prototype.indexOf?!0:!1;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(t){var e=this._getEvents();return e[t]||(e[t]=[])},n.addListener=function(t,e){var n=this.getListeners(t);return-1===i(e,n)&&n.push(e),this},n.on=n.addListener,n.removeListener=function(t,e){var n=this.getListeners(t),o=i(e,n);return-1!==o&&(n.splice(o,1),0===n.length&&this.removeEvent(t)),this},n.off=n.removeListener,n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));else for(n=i.length;n--;)r.call(this,e,i[n]);return this},n.removeEvent=function(t){return t?delete this._getEvents()[t]:delete this._events,this},n.emitEvent=function(t,e){for(var i,n=this.getListeners(t),o=n.length;o--;)i=e?n[o].apply(null,e):n[o](),i===!0&&this.removeListener(t,n[o]);return this},n.trigger=n.emitEvent,n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),function(t){"use strict";var e=document.documentElement,i=function(){};e.addEventListener?i=function(t,e,i){t.addEventListener(e,i,!1)}:e.attachEvent&&(i=function(e,i,n){e[i+n]=n.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,n.handleEvent.call(n,e)}:function(){var i=t.event;i.target=i.target||i.srcElement,n.call(e,i)},e.attachEvent("on"+i,e[i+n])});var n=function(){};e.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:e.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]),delete t[e+i]});var o={bind:i,unbind:n};"function"==typeof define&&define.amd?define(o):t.eventie=o}(this),function(t){"use strict";function e(t){e.isReady?t():e.on("ready",t)}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||(e.isReady=!0,e.emit("ready",t))}var n=t.EventEmitter,o=t.eventie,r=t.document;e.isReady=!1;for(var s in n.prototype)e[s]=n.prototype[s];o.bind(r,"DOMContentLoaded",i),o.bind(r,"readystatechange",i),o.bind(t,"load",i),t.docReady=e}(this),function(t){"use strict";function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=i.length;r>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return e}):t.getStyleProperty=e}(window),function(t){"use strict";function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){var n=s[e];t[n]=0}return t}function n(t){function n(t){if("object"==typeof t&&t.nodeType){var n=r(t);if("none"===n.display)return i();var h={};h.width=t.offsetWidth,h.height=t.offsetHeight;for(var d=h.isBorderBox=!(!a||!n[a]||"border-box"!==n[a]),u=0,p=s.length;p>u;u++){var c=s[u],f=n[c],l=parseFloat(f);h[c]=isNaN(l)?0:l}var g=h.paddingLeft+h.paddingRight,m=h.paddingTop+h.paddingBottom,v=h.marginLeft+h.marginRight,y=h.marginTop+h.marginBottom,E=h.borderLeftWidth+h.borderRightWidth,x=h.borderTopWidth+h.borderBottomWidth,b=d&&o,L=e(n.width);L!==!1&&(h.width=L+(b?0:g+E));var P=e(n.height);return P!==!1&&(h.height=P+(b?0:m+x)),h.innerWidth=h.width-(g+E),h.innerHeight=h.height-(m+x),h.outerWidth=h.width+v,h.outerHeight=h.height+y,h}}var o,a=t("boxSizing");return function(){if(a){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[a]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=r(t);o=200===e(n.width),i.removeChild(t)}}(),n}var o=document.defaultView,r=o&&o.getComputedStyle?function(t){return o.getComputedStyle(t,null)}:function(t){return t.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property"],n):t.getSize=n(t.getStyleProperty)}(window),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(i,n,r,h,d){function p(t,i){this.element=t,this.options=e({},this.options),e(this.options,i),this._create()}function c(t,e){t.x=void 0!==e.pageX?e.pageX:e.clientX,t.y=void 0!==e.pageY?e.pageY:e.clientY}var f=h("transform"),l=!!h("perspective");e(p.prototype,n.prototype),p.prototype.options={},p.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=e({},this.position);var t=s(this.element);"relative"!==t.position&&"absolute"!==t.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},p.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];for(var t=0,e=this.handles.length;e>t;t++){var i=this.handles[t];r.bind(i,"mousedown",this),r.bind(i,"touchstart",this)}},p.prototype._getPosition=function(){var t=s(this.element),e=parseInt(t.left,10),i=parseInt(t.top,10);this.position.x=isNaN(e)?0:e,this.position.y=isNaN(i)?0:i,this._addTransformPosition(t)},p.prototype._addTransformPosition=function(t){if(f){var e=t[f];if(0===e.indexOf("matrix")){var i=e.split(","),n=0===e.indexOf("matrix3d")?12:4,o=parseInt(i[n],10),r=parseInt(i[n+1],10);this.position.x+=o,this.position.y+=r}}},p.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},p.prototype.getTouch=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];if(n.identifier===this.pointerIdentifier)return n}},p.prototype.onmousedown=function(t){this.dragStart(t,t)},p.prototype.ontouchstart=function(t){this.isDragging||this.dragStart(t,t.changedTouches[0])},p.prototype.dragStart=function(e,n){if(this.isEnabled){e.preventDefault?e.preventDefault():e.returnValue=!1;var s="touchstart"===e.type;this.pointerIdentifier=n.identifier,this._getPosition(),this.measureContainment(),c(this.startPoint,n),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.pointerMoveEvent=s?"touchmove":"mousemove",this.pointerEndEvent=s?"touchend":"mouseup",this.boundNode=e.preventDefault?t:o,r.bind(this.boundNode,this.pointerMoveEvent,this),r.bind(this.boundNode,this.pointerEndEvent,this),i.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,e,n]),this.animate()}},p.prototype.measureContainment=function(){var t=this.options.containment;if(t){this.size=d(this.element);var e=this.element.getBoundingClientRect(),i=a(t)?t:"string"==typeof t?o.querySelector(t):this.element.parentNode;this.containerSize=d(i);var n=i.getBoundingClientRect();this.relativeStartPosition={x:e.left-n.left,y:e.top-n.top}}},p.prototype.onmousemove=function(t){this.dragMove(t,t)},p.prototype.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragMove(t,e)},p.prototype.dragMove=function(t,e){if(c(this.dragPoint,e),this.dragPoint.x-=this.startPoint.x,this.dragPoint.y-=this.startPoint.y,this.options.containment){var i=this.relativeStartPosition.x,n=this.relativeStartPosition.y;this.dragPoint.x=Math.max(this.dragPoint.x,-i),this.dragPoint.y=Math.max(this.dragPoint.y,-n),this.dragPoint.x=Math.min(this.dragPoint.x,this.containerSize.width-i-this.size.width),this.dragPoint.y=Math.min(this.dragPoint.y,this.containerSize.height-n-this.size.height)}this.position.x=this.startPosition.x+this.dragPoint.x,this.position.y=this.startPosition.y+this.dragPoint.y,this.emitEvent("dragMove",[this,t,e])},p.prototype.onmouseup=function(t){this.dragEnd(t,t)},p.prototype.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragEnd(t,e)},p.prototype.dragEnd=function(t,e){this.isDragging=!1,delete this.pointerIdentifier,f&&(this.element.style[f]="",this.setLeftTop()),r.unbind(this.boundNode,this.pointerMoveEvent,this),r.unbind(this.boundNode,this.pointerEndEvent,this),delete this.pointerMoveEvent,delete this.pointerEndEvent,i.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,t,e])},p.prototype.ontouchcancel=function(t){this.dragEnd(t)},p.prototype.animate=function(){if(this.isDragging){this.positionDrag();var t=this;u(function(){t.animate()})}};var g=l?function(t,e){return"translate3d( "+t+"px, "+e+"px, 0)"}:function(t,e){return"translate( "+t+"px, "+e+"px)"};return p.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},p.prototype.positionDrag=f?function(){this.element.style[f]=g(this.dragPoint.x,this.dragPoint.y)}:p.prototype.setLeftTop,p.prototype.enable=function(){this.isEnabled=!0},p.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},p}for(var n,o=t.document,r=o.defaultView,s=r&&r.getComputedStyle?function(t){return r.getComputedStyle(t,null)}:function(t){return t.currentStyle},a="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},h=0,d="webkit moz ms o".split(" "),u=t.requestAnimationFrame,p=t.cancelAnimationFrame,c=0;d.length>c&&(!u||!p);c++)n=d[c],u=u||t[n+"RequestAnimationFrame"],p=p||t[n+"CancelAnimationFrame"]||t[n+"CancelRequestAnimationFrame"];u&&p||(u=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-h)),o=t.setTimeout(function(){e(i+n)},n);return h=i+n,o},p=function(e){t.clearTimeout(e)}),"function"==typeof define&&define.amd?define(["classie","eventEmitter","eventie","get-style-property","get-size"],i):t.Draggabilly=i(t.classie,t.EventEmitter,t.eventie,t.getStyleProperty,t.getSize)}(window);
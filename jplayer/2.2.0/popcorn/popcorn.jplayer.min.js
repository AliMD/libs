(function(e){var t="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js",n="http://www.jplayer.org/2.2.0/js/jquery.jplayer.min.js",i="http://www.jplayer.org/2.2.0/js/Jplayer.swf",r="html,flash",o=!1,a=!1,s=!1,l={mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},c=function(e){return e&&"object"==typeof e&&e.hasOwnProperty?!0:!1},u=function(e){var t=!1;return/\.mp3$/i.test(e)?t="mp3":/\.mp4$/i.test(e)||/\.m4v$/i.test(e)?t="m4v":/\.m4a$/i.test(e)?t="m4a":/\.ogg$/i.test(e)||/\.oga$/i.test(e)?t="oga":/\.ogv$/i.test(e)?t="ogv":/\.webm$/i.test(e)&&(t="webmv"),t},d=function(e){var t="",n="";if(c(e))for(var i in e)e.hasOwnProperty(i)&&(t+=n+i,n=",");return o&&console.log('getSupplied(): Generated: supplied = "'+t+'"'),t};e.player("jplayer",{_canPlayType:function(e,t){var n,i=e.toLowerCase(),o={media:{},options:{}},a=!1;if("video"!==i&&"audio"!==i&&("string"==typeof t?/^http.*/i.test(t)&&(n=u(t),n&&(o.media[n]=t,o.options.solution=r,o.options.supplied=n)):o=t,c(o)&&c(o.media))){c(o.options)||(o.options={}),o.options.solution||(o.options.solution=r),o.options.supplied||(o.options.supplied=d(o.media));for(var s=o.options.solution.toLowerCase().split(","),h=o.options.supplied.toLowerCase().split(","),p=0;s.length>p;p++)for(var f,g=s[p].replace(/^\s+|\s+$/g,""),m="html"===g,v="flash"===g,b=0;h.length>b;b++)if(n=h[b].replace(/^\s+|\s+$/g,""),l[n]){!f&&m&&(f=document.createElement(l[n].media));var y=!!(f&&f.canPlayType&&f.canPlayType(l[n].codec)),x=y&&m,w=l[n].flashCanPlay&&v;(x||w)&&(a={html:x,type:n},p=s.length,b=h.length)}}return a},_setup:function(){var l,h,p=this,f="unknown",g={},m={},v=!1,b=0,y=null,x=!1,w=null,k=function(){v?(o&&console.log("Dispatched event : durationchange : "+b),p.dispatchEvent("durationchange")):(o&&console.log("DELAYED EVENT (!ready) : durationchange : "+b),clearTimeout(y),y=setTimeout(k,250))},C=function(){var e=function(e){e.jPlayer.status.duration!==b&&(b=e.jPlayer.status.duration,k())},t=function(e){x||100!==e.jPlayer.status.seekPercent||(x=!0,setTimeout(function(){o&&console.log("Trigger : canplaythrough"),h._trigger($.jPlayer.event.canplaythrough)},0))};l.bind($.jPlayer.event.loadstart,function(){setTimeout(function(){o&&console.log("Trigger : loadeddata"),h._trigger($.jPlayer.event.loadeddata)},0)}).bind($.jPlayer.event.progress,function(n){e(n),t(n)}).bind($.jPlayer.event.timeupdate,function(n){e(n),t(n)}).bind($.jPlayer.event.play,function(){setTimeout(function(){o&&console.log("Trigger : playing"),h._trigger($.jPlayer.event.playing)},0)}),o&&console.log("Created CUSTOM event handlers for FLASH")},_=function(){(function(t){l=t("#"+p.id),"string"==typeof p.src?(f=u(p.src),g[f]=p.src,m.supplied=f,m.solution=r):c(p.src)&&(g=c(p.src.media)?p.src.media:{},m=c(p.src.options)?p.src.options:{},m.solution=m.solution||r,m.supplied=m.supplied||d(p.src.media)),m.swfPath=m.swfPath||i,l.bind(t.jPlayer.event.ready,function(e){e.jPlayer.flash.used&&C(),t(this).jPlayer("setMedia",g).jPlayer("load")});var n=t.jPlayer.reservedEvent+" loadeddata durationchange",a=n.split(/\s+/g),s=function(e){l.bind(t.jPlayer.event[e],function(t){o&&console.log("Dispatched event: "+e+(t&&t.jPlayer?" ("+t.jPlayer.status.currentTime+"s)":"")),p.dispatchEvent(e)}),o&&console.log("Created event handler for: "+e)};for(var y in t.jPlayer.event)if(t.jPlayer.event.hasOwnProperty(y)){var x=!0;for(var _ in a)if(a.hasOwnProperty(_)&&a[_]===y){x=!1;break}x?s(y):o&&console.log("Skipped auto event handler creation for: "+y)}l.bind(t.jPlayer.event.loadeddata,function(e){o&&console.log("Dispatched event: loadeddata"+(e&&e.jPlayer?" ("+e.jPlayer.status.currentTime+"s)":"")),p.dispatchEvent("loadeddata"),v=!0}),o&&console.log("Created CUSTOM event handler for: loadeddata"),l.bind(t.jPlayer.event.durationchange,function(e){b=e.jPlayer.status.duration,k()}),o&&console.log("Created CUSTOM event handler for: durationchange"),l.bind(t.jPlayer.event.error,function(e){w=e.jPlayer.error,w.code=w.type===t.jPlayer.error.URL?4:0,o&&console.log("Dispatched event: error"),o&&console.dir(w),p.dispatchEvent("error")}),o&&console.log("Created CUSTOM event handler for: error"),e.player.defineProperty(p,"error",{set:function(){return w},get:function(){return w}}),e.player.defineProperty(p,"currentTime",{set:function(e){return h.status.paused?l.jPlayer("pause",e):l.jPlayer("play",e),e},get:function(){return h.status.currentTime}}),e.player.defineProperty(p,"duration",{set:function(){return v?b:0/0},get:function(){return v?b:0/0}}),e.player.defineProperty(p,"muted",{set:function(e){return l.jPlayer("mute",e),h.options.muted},get:function(){return h.options.muted}}),e.player.defineProperty(p,"volume",{set:function(e){return l.jPlayer("volume",e),h.options.volume},get:function(){return h.options.volume}}),e.player.defineProperty(p,"paused",{set:function(){return h.status.paused},get:function(){return h.status.paused}}),p.play=function(){l.jPlayer("play")},p.pause=function(){l.jPlayer("pause")},l.jPlayer(m),h=l.data("jPlayer")})(jQuery)},T=function(){jQuery.jPlayer?_():s?setTimeout(T,250):(s=!0,e.getScript(n,function(){s=!1,_()}))},E=function(){window.jQuery?T():a?setTimeout(E,250):(a=!0,e.getScript(t,function(){a=!1,T()}))};E()},_teardown:function(){jQuery("#"+this.id).jPlayer("destroy")}})})(Popcorn);
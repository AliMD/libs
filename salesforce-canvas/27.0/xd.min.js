(function(e,t){"use strict";var n=function(){function r(n,r,i){if(e.isNil(r))throw"ERROR: target_url was not supplied on postMessage";var s=e.stripUrl(r);i=i||parent,t.postMessage&&(n=Sfdc.JSON.stringify(n),i.postMessage(n,s))}function i(r,i){t.postMessage&&(r&&(n=function(t){var n,s;if(typeof i=="string"&&t.origin!==i)return!1;if(e.isFunction(i)){s=i(t.origin,t.data);if(s===!1)return!1}n=Sfdc.JSON.parse(t.data),r(n,s)}),t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n))}function s(){t.postMessage&&(t.removeEventListener?t.removeEventListener("message",n,!1):t.detachEvent("onmessage",n))}var n;return{post:r,receive:i,remove:s}}();e.module("Sfdc.canvas.xd",n)})(Sfdc.canvas,this)
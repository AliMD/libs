(function(e){"use strict";if(e.Sfdc&&e.Sfdc.canvas)return;var t=Object.prototype,n=Array.prototype,r=e.document,i={hasOwn:function(e,n){return t.hasOwnProperty.call(e,n)},isUndefined:function(e){var t;return e===t},isNil:function(e){return i.isUndefined(e)||e===null||e===""},isNumber:function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},isArray:Array.isArray||function(e){return t.toString.call(e)==="[object Array]"},isArguments:function(e){return!!e&&!!i.hasOwn(e,"callee")},isObject:function(e){return e!==null&&typeof e=="object"},nop:function(){},invoker:function(e){i.isFunction(e)&&e()},identity:function(e){return e},each:function(e,t,r){if(i.isNil(e))return;var s=n.forEach,o=0,u,a;u=e.length,r=r||e;if(s&&s===e.forEach)e.forEach(t,r);else if(i.isNumber(u))while(o<u){if(t.call(r,e[o],o,e)===!1)return;o+=1}else for(a in e)if(i.hasOwn(e,a)&&t.call(r,e[a],a,e)===!1)return},map:function(e,t,r){var s=[],o=n.map;return i.isNil(e)?s:o&&e.map===o?e.map(t,r):(r=r||e,i.each(e,function(e,n,i){s.push(t.call(r,e,n,i))}),s)},values:function(e){return i.map(e,i.identity)},slice:function(e,t,r){return n.slice.call(e,i.isUndefined(t)?0:t,i.isUndefined(r)?e.length:r)},toArray:function(e){return e?e.toArray?e.toArray:i.isArray(e)?e:i.isArguments(e)?i.slice(e):i.values(e):[]},size:function(e){return i.toArray(e).length},indexOf:function(e,t){var r=n.indexOf,i,s;if(!e)return-1;if(r&&e.indexOf===r)return e.indexOf(t);for(i=0,s=e.length;i<s;i+=1)if(e[i]===t)return i;return-1},remove:function(e,t){var n=i.indexOf(e,t);n>=0&&e.splice(n,1)},param:function(e,t){function r(e,s){if(i.isNil(s))return;s=i.isFunction(s)?s():s,i.isArray(s)?i.each(s,function(t,n){r(e,t)}):t?n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(s):n[n.length]=e+"="+s}var n=[];t=t||!1;if(i.isArray(e))i.each(e,function(e,t){r(t,e)});else for(var s in e)i.hasOwn(e,s)&&r(s,e[s]);return n.join("&").replace(/%20/g,"+")},stripUrl:function(e){return i.isNil(e)?null:e.replace(/([^:]+:\/\/[^\/\?#]+).*/,"$1")},query:function(e,t){return i.isNil(t)?e:(e=e.replace(/#.*$/,""),e+=/^\#/.test(t)?t:(/\?/.test(e)?"&":"?")+t,e)},extend:function(e){return i.each(i.slice(arguments,1),function(t,n){i.each(t,function(t,n){e[n]=t})}),e},prototypeOf:function(e){var t=Object.getPrototypeOf,n="__proto__";return i.isFunction(t)?t.call(Object,e):typeof {}[n]=="object"?e[n]:e.constructor.prototype},module:function(t,n){var r=t.split("."),s=e.Sfdc.canvas,o,u;r[1]==="canvas"&&(r=r.slice(2)),u=r.length;for(o=0;o<u;o+=1)i.isUndefined(s[r[o]])&&(s[r[o]]={}),s=s[r[o]];return i.isFunction(n)&&(n=n()),i.extend(s,n)},byId:function(e){return r.getElementById(e)},byClass:function(e){return r.getElementsByClassName(e)},attr:function(e,t){var n=e.attributes,r;for(r=0;r<n.length;r+=1)if(t===n[r].name)return n[r].value},onReady:function(e){i.isFunction(e)&&s.push(e)}},s=[],o=function(){o=i.nop,i.each(s,i.invoker),s=null},u=function(e){i.isFunction(e)&&s.push(e)};(function(){var t="addEventListener",n=function(){r&&/loaded|complete/.test(r.readyState)?o():s&&i.isFunction(e.setTimeout)&&e.setTimeout(n,30)};r&&r[t]&&r[t]("DOMContentLoaded",o,!1),n(),e[t]?e[t]("load",o,!1):e.attachEvent&&e.attachEvent("onload",o)})(),i.each(i,function(e,t){u[t]=e}),e.Sfdc||(e.Sfdc={}),e.Sfdc.canvas=u,e.Sfdc.JSON||(e.Sfdc.JSON=JSON)})(this),function(e){"use strict";var t=function(){function t(){return window.location.protocol==="https:"}function n(e,n,r){var i="",s;r?(s=new Date,s.setTime(s.getTime()+r*24*60*60*1e3),i="; expires="+s.toGMTString()):i="",document.cookie=e+"="+n+i+"; path=/"+(t()===!0?"; secure":"")}function r(t){var n,r,i,s;if(e.isUndefined(t))return document.cookie.split(";");n=t+"=",r=document.cookie.split(";");for(s=0;s<r.length;s+=1){i=r[s];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(n)===0)return i.substring(n.length,i.length)}return null}function i(e){n(e,"",-1)}return{set:n,get:r,remove:i}}();e.module("Sfdc.canvas.cookies",t)}(Sfdc.canvas),function(e){"use strict";var t=function(){function o(){t=e.cookies.get("access_token"),e.cookies.remove("access_token")}function u(t){var n=[],r;if(!e.isUndefined(t)){for(r in t)t.hasOwnProperty(r)&&n.push(r+"="+t[r]);return"?"+n.join("&")}return""}function a(){e.cookies.set("access_token",t),self.location.reload()}function f(e){var t;e=e||{},t=e.uri||"/rest/oauth2",e.params=e.params||{state:""},e.params.state=e.params.state||e.callback||window.location.pathname,e.params.display=e.params.display||"popup",t+=u(e.params),s=window.open(t,"OAuth","status=0,toolbar=0,menubar=0,resizable=0,scrollbars=1,top=50,left=50,height=500,width=680")}function l(n){if(arguments.length===0){if(!e.isNil(t))return t}else t=n;return t}function c(t){if(arguments.length===0){if(!e.isNil(n))return n;n=e.cookies.get("instance_url")}else t===null?(e.cookies.remove("instance_url"),n=null):(e.cookies.set("instance_url",t),n=t);return n}function h(t){var n,s,o,u,a;if(!e.isNil(t)){t.indexOf("#")===0&&(t=t.substr(1)),o=t.split("&");for(n=0;n<o.length;n+=1)s=o[n].split("="),u=s[0],a=decodeURIComponent(s[1]),"access_token"===u?l(a):"instance_url"===u?c(a):"target_origin"===u?i=decodeURIComponent(a):"instance_id"===u&&(r=a)}}function p(){(!s||s.closed)&&a()}function d(e){h(e),setTimeout(window.Sfdc.canvas.oauth.checkChildWindowStatus,50)}function v(){l(null)}function m(){return!e.isNil(l())}function g(){var e,t,n,r=self.location.search;if(r){r=r.substring(1),t=r.split("&");for(e=0;e<t.length;e+=1){n=t[e].split("=");if("loginUrl"===n[0])return decodeURIComponent(n[1])+"/services/oauth2/authorize"}}return"https://login.salesforce.com/services/oauth2/authorize"}function y(t){return e.isNil(t)?e.isNil(i)?(h(document.location.hash),i):i:(i=t,t)}function b(t){return e.isNil(t)?e.isNil(r)?(h(document.location.hash),r):r:(r=t,t)}function w(){return{oauthToken:l(),instanceId:b(),targetOrigin:y()}}var t,n,r,i,s;return{init:o,login:f,logout:v,loggedin:m,loginUrl:g,token:l,instance:c,client:w,checkChildWindowStatus:p,childWindowUnloadNotification:d}}();e.module("Sfdc.canvas.oauth",t),e.oauth.init()}(Sfdc.canvas),function(e,t){"use strict";var n=function(){function r(n,r,i){if(e.isNil(r))throw"ERROR: target_url was not supplied on postMessage";var s=e.stripUrl(r);i=i||parent,t.postMessage&&(n=Sfdc.JSON.stringify(n),i.postMessage(n,s))}function i(r,i){t.postMessage&&(r&&(n=function(t){var n,s;if(typeof i=="string"&&t.origin!==i)return!1;if(e.isFunction(i)){s=i(t.origin,t.data);if(s===!1)return!1}n=Sfdc.JSON.parse(t.data),r(n,s)}),t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n))}function s(){t.postMessage&&(t.removeEventListener?t.removeEventListener("message",n,!1):t.detachEvent("onmessage",n))}var n;return{post:r,receive:i,remove:s}}();e.module("Sfdc.canvas.xd",n)}(Sfdc.canvas,this),function(e){"use strict";var t,n="27.0",r=function(){function o(t,n){return e.isNil(t)?t:t.substring(0,4)==="http"?t:n}function u(t){var n;if(t==="*")return t;if(!e.isNil(t)){n=e.stripUrl(t),r=o(n,r);if(r)return r}return n=document.location.hash,n&&(n=decodeURIComponent(n.replace(/^#/,"")),r=o(n,r)),r}function a(t){t&&(t.status===401&&e.isArray(t.payload)&&t.payload[0].errorCode&&t.payload[0].errorCode==="INVALID_SESSION_ID"&&e.oauth.logout(),e.isFunction(i[t.seq])&&i[t.seq](t))}function f(r,o){var a,f,l;s=s>100?0:s+1,i[s]=r,a={seq:s,src:"client",clientVersion:n,parentVersion:t,body:o},l=o&&o.config&&o.config.client,f=u(e.isNil(l)?null:l.targetOrigin);if(e.isNil(f))throw"ERROR: targetOrigin was not supplied and was not found on the hash tag, this can result from a redirect or link to another page. Try setting the targetOrgin (example: targetOrigin : sr.context.environment.targetOrigin) when making an ajax request.";e.xd.post(a,f,parent)}function l(n,r){var i;if(e.isNil(n)||e.isNil(n.oauthToken))i={status:401,statusText:"Unauthorized",parentVersion:t,payload:"client or client.oauthToken not supplied"};if(e.isNil(n.instanceId)||e.isNil(n.targetOrigin))i={status:400,statusText:"Bad Request",parentVersion:t,payload:"client.instanceId or client.targetOrigin not supplied"};if(!e.isNil(i)){if(e.isFunction(r))return r(i),!1;throw i}return!0}function c(t,n){n=n||e.oauth.client();if(l(n,t)){var r=n.oauthToken;f(t,{type:"ctx",accessToken:r,config:{client:n}})}}function h(t,n){var i,s,u;if(!t)throw"PRECONDITION ERROR: url required with AJAX call";if(!n||!e.isFunction(n.success))throw"PRECONDITION ERROR: function: 'settings.success' missing.";if(!l(n.client,n.success))return;i=n.success,u={method:"GET",async:!0,contentType:"application/json",headers:{Authorization:"OAuth "+n.client.oauthToken,Accept:"application/json"},data:null},s=e.extend(u,n||{}),s.success=undefined,s.failure=undefined,s.client.targetOrigin==="*"?s.client.targetOrigin=null:r=o(s.targetOrigin,r),f(i,{type:"ajax",accessToken:p,url:t,config:s})}function p(t){return e.oauth.token(t)}function d(){return{clientVersion:n}}var r,i=[],s=0;return e.xd.receive(a,u),{ctx:c,ajax:h,token:p,version:d}}();e.module("Sfdc.canvas.client",r)}(Sfdc.canvas)
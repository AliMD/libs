Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var e=Math.abs(this.lat0);if(this.mode=Math.abs(e-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?0>this.lat0?this.S_POLE:this.N_POLE:Math.abs(e)<Proj4js.common.EPSLN?this.EQUIT:this.OBLIQ,this.es>0){var t;switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,i,n=e.x,r=e.y;if(n=Proj4js.common.adjust_lon(n-this.long0),this.sphere){var s,o,a;switch(a=Math.sin(r),o=Math.cos(r),s=Math.cos(n),this.mode){case this.OBLIQ:case this.EQUIT:if(i=this.mode==this.EQUIT?1+o*s:1+this.sinph0*a+this.cosph0*o*s,Proj4js.common.EPSLN>=i)return Proj4js.reportError("laea:fwd:y less than eps"),null;i=Math.sqrt(2/i),t=i*o*Math.sin(n),i*=this.mode==this.EQUIT?a:this.cosph0*a-this.sinph0*o*s;break;case this.N_POLE:s=-s;case this.S_POLE:if(Math.abs(r+this.phi0)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:phi < eps"),null;i=Proj4js.common.FORTPI-.5*r,i=2*(this.mode==this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(n),i*=s}}else{var s,l,a,h,c=0,u=0,d=0;switch(s=Math.cos(n),l=Math.sin(n),a=Math.sin(r),h=Proj4js.common.qsfnz(this.e,a),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(c=h/this.qp,u=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*u*s;break;case this.EQUIT:d=1+u*s;break;case this.N_POLE:d=Proj4js.common.HALF_PI+r,h=this.qp-h;break;case this.S_POLE:d=r-Proj4js.common.HALF_PI,h=this.qp+h}if(Math.abs(d)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:b < eps"),null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),i=this.mode==this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*u*s):(d=Math.sqrt(2/(1+u*s)))*c*this.ymf,t=this.xmf*d*u*l;break;case this.N_POLE:case this.S_POLE:h>=0?(t=(d=Math.sqrt(h))*l,i=s*(this.mode==this.S_POLE?d:-d)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,n=e.x/this.a,r=e.y/this.a;if(this.sphere){var s,o=0,a=0;if(s=Math.sqrt(n*n+r*r),i=.5*s,i>1)return Proj4js.reportError("laea:Inv:DataError"),null;switch(i=2*Math.asin(i),(this.mode==this.OBLIQ||this.mode==this.EQUIT)&&(a=Math.sin(i),o=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(s)<=Proj4js.common.EPSLN?0:Math.asin(r*a/s),n*=a,r=o*s;break;case this.OBLIQ:i=Math.abs(s)<=Proj4js.common.EPSLN?this.phi0:Math.asin(o*this.sinph0+r*a*this.cosph0/s),n*=a*this.cosph0,r=(o-Math.sin(i)*this.sinph0)*s;break;case this.N_POLE:r=-r,i=Proj4js.common.HALF_PI-i;break;case this.S_POLE:i-=Proj4js.common.HALF_PI}t=0!=r||this.mode!=this.EQUIT&&this.mode!=this.OBLIQ?Math.atan2(n,r):0}else{var l,h,c,u,d=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:if(n/=this.dd,r*=this.dd,u=Math.sqrt(n*n+r*r),Proj4js.common.EPSLN>u)return e.x=0,e.y=this.phi0,e;h=2*Math.asin(.5*u/this.rq),l=Math.cos(h),n*=h=Math.sin(h),this.mode==this.OBLIQ?(d=l*this.sinb1+r*h*this.cosb1/u,c=this.qp*d,r=u*this.cosb1*l-r*this.sinb1*h):(d=r*h/u,c=this.qp*d,r=u*l);break;case this.N_POLE:r=-r;case this.S_POLE:if(c=n*n+r*r,!c)return e.x=0,e.y=this.phi0,e;d=1-c/this.qp,this.mode==this.S_POLE&&(d=-d)}t=Math.atan2(n,r),i=this.authlat(Math.asin(d),this.apa)}return e.x=Proj4js.common.adjust_lon(this.long0+t),e.y=i,e},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(e){var t,i=[];return i[0]=e*this.P00,t=e*e,i[0]+=t*this.P01,i[1]=t*this.P10,t*=e,i[0]+=t*this.P02,i[1]+=t*this.P11,i[2]=t*this.P20,i},authlat:function(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}};
Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,i,n,r=e.x,s=e.y,o=Proj4js.common.adjust_lon(r-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.sphere){var h=l*Math.sin(o);if(1e-10>Math.abs(Math.abs(h)-1))return Proj4js.reportError("tmerc:forward: Point projects into infinity"),93;i=.5*this.a*this.k0*Math.log((1+h)/(1-h)),t=Math.acos(l*Math.cos(o)/Math.sqrt(1-h*h)),0>s&&(t=-t),n=this.a*this.k0*(t-this.lat0)}else{var c=l*o,u=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.tan(s),f=Math.pow(p,2);t=1-this.es*Math.pow(a,2);var m=this.a/Math.sqrt(t),g=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,s);i=this.k0*m*c*(1+u/6*(1-f+d+u/20*(5-18*f+Math.pow(f,2)+72*d-58*this.ep2)))+this.x0,n=this.k0*(g-this.ml0+m*p*u*(.5+u/24*(5-f+9*d+4*Math.pow(d,2)+u/30*(61-58*f+Math.pow(f,2)+600*d-330*this.ep2))))+this.y0}return e.x=i,e.y=n,e},inverse:function(e){var t,i,n,r,s,o,a=6;if(this.sphere){var l=Math.exp(e.x/(this.a*this.k0)),h=.5*(l-1/l),c=this.lat0+e.y/(this.a*this.k0),u=Math.cos(c);t=Math.sqrt((1-u*u)/(1+h*h)),s=Proj4js.common.asinz(t),0>c&&(s=-s),o=0==h&&0==u?this.long0:Proj4js.common.adjust_lon(Math.atan2(h,u)+this.long0)}else{var d=e.x-this.x0,p=e.y-this.y0;for(t=(this.ml0+p/this.k0)/this.a,i=t,r=0;!0&&(n=(t+this.e1*Math.sin(2*i)-this.e2*Math.sin(4*i)+this.e3*Math.sin(6*i))/this.e0-i,i+=n,!(Math.abs(n)<=Proj4js.common.EPSLN));r++)if(r>=a)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95;if(Math.abs(i)<Proj4js.common.HALF_PI){var f=Math.sin(i),m=Math.cos(i),g=Math.tan(i),y=this.ep2*Math.pow(m,2),v=Math.pow(y,2),b=Math.pow(g,2),L=Math.pow(b,2);t=1-this.es*Math.pow(f,2);var x=this.a/Math.sqrt(t),C=x*(1-this.es)/t,w=d/(x*this.k0),S=Math.pow(w,2);s=i-x*g*S/C*(.5-S/24*(5+3*b+10*y-4*v-9*this.ep2-S/30*(61+90*b+298*y+45*L-252*this.ep2-3*v))),o=Proj4js.common.adjust_lon(this.long0+w*(1-S/6*(1+2*b+y-S/20*(5-2*y+28*b-3*v+8*this.ep2+24*L)))/m)}else s=Proj4js.common.HALF_PI*Proj4js.common.sign(p),o=this.long0}return e.x=o,e.y=s,e}};
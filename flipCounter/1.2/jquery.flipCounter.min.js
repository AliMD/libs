(function(e){e.fn.flipCounter=function(t){function n(){var e=_.data("flipCounter");return e===void 0?!1:!0}function r(e){var t=_.data("flipCounter"),n=t[e];return n!==void 0?n:!1}function o(e,t){var n=_.data("flipCounter");n[e]=t,_.data("flipCounter",n)}function a(){1>_.children('[name="'+r("counterFieldName")+'"]').length&&_.append('<input type="hidden" name="'+r("counterFieldName")+'" value="'+r("number")+'" />');var t=c(),n=p().length;if(n>t)for(i=0;n-t>i;i++){var o=e('<span class="'+r("digitClass")+'" style="'+h("0")+'" />');_.prepend(o)}else if(t>n)for(i=0;t-n>i;i++)_.children("."+r("digitClass")).first().remove();_.find("."+r("digitClass")).each(function(){0==e(this).find("span").length&&e(this).append('<span style="visibility:hidden">0</span>')})}function s(){a();var t=p(),n=l(),i=0;e.each(n,function(){digit=(""+t).charAt(i),e(this).attr("style",h(digit)),e(this).find("span").text(""+digit.replace(" ","&nbsp;")),i++}),d()}function l(){return _.children("."+r("digitClass"))}function c(){return l().length}function u(){var e=parseFloat(_.children('[name="'+r("counterFieldName")+'"]').val());return 0==(e==e)?!1:e}function d(){_.children('[name="'+r("counterFieldName")+'"]').val(r("number"))}function p(){var t=r("number");if("number"!=typeof t)return e.error("Attempting to render non-numeric value."),"0";var n="";if(r("formatNumberOptions"))e.formatNumber?n=e.formatNumber(t,r("formatNumberOptions")):e.error("The numberformatter jQuery plugin is not loaded. This plugin is required to use the formatNumberOptions setting.");else if(t>=0){for(var i=r("numIntegralDigits"),o=i-(""+t.toFixed()).length,a=0;o>a;a++)n+="0";n+=t.toFixed(r("numFractionalDigits"))}else n="-"+Math.abs(t.toFixed(r("numFractionalDigits")));return n}function h(e){var t="height:"+r("digitHeight")+"px; width:"+r("digitWidth")+"px; display:inline-block; background-image:url('"+r("imagePath")+"'); background-repeat:no-repeat; ",n=[];return n["1"]=0*r("digitWidth"),n["2"]=-1*r("digitWidth"),n["3"]=-2*r("digitWidth"),n["4"]=-3*r("digitWidth"),n["5"]=-4*r("digitWidth"),n["6"]=-5*r("digitWidth"),n["7"]=-6*r("digitWidth"),n["8"]=-7*r("digitWidth"),n["9"]=-8*r("digitWidth"),n["0"]=-9*r("digitWidth"),n["."]=-10*r("digitWidth"),n["-"]=-11*r("digitWidth"),n[","]=-12*r("digitWidth"),n[" "]=-13*r("digitWidth"),e in n?t+"background-position: "+n[e]+"px 0px;":t}function m(t){1==r("animating")&&f(),t!==void 0?(t=e.extend(_.data("flipCounter"),t),_.data("flipCounter",t)):t=_.data("flipCounter"),0==r("start_time")&&o("start_time",(new Date).getTime()),0==r("time")&&o("time",0),0==r("elapsed")&&o("elapsed","0.0"),0==r("start_number")&&(o("start_number",r("number")),0==r("start_number")&&o("start_number",0)),g();var n=r("onAnimationStarted");"function"==typeof n&&n.call(_,_)}function g(){function e(){n+=10,i=Math.floor(n/10)/10,Math.round(i)==i&&(i+=".0"),o("elapsed",i);var r=(new Date).getTime()-t-n,d=0;d="function"==typeof u?u.apply(_,[!1,n,a,l,c]):y(!1,n,a,l,c),o("number",d),o("time",n),s(),c>n?o("interval",window.setTimeout(e,10-r)):f()}var t=r("start_time"),n=r("time"),i=r("elapsed"),a=r("start_number"),l=r("end_number")-r("start_number");if(0==l)return!1;var c=r("duration"),u=r("easing");o("animating",!0),window.setTimeout(e,10)}function f(){if(0==r("animating"))return!1;clearTimeout(r("interval")),o("start_time",!1),o("start_number",!1),o("end_number",!1),o("time",0),o("animating",!1),o("paused",!1);var e=r("onAnimationStopped");"function"==typeof e&&e.call(_,_)}function b(){if(0==r("animating")||1==r("paused"))return!1;clearTimeout(r("interval")),o("paused",!0);var e=r("onAnimationPaused");"function"==typeof e&&e.call(_,_)}function v(){if(0==r("animating")||0==r("paused"))return!1;o("paused",!1),g();var e=r("onAnimationResumed");"function"==typeof e&&e.call(_,_)}function y(e,t,n,i,r){return t/r*i+n}var _=!1,k={number:0,numIntegralDigits:1,numFractionalDigits:0,digitClass:"counter-digit",counterFieldName:"counter-value",digitHeight:40,digitWidth:30,imagePath:"img/flipCounter-medium.png",easing:!1,duration:1e4,onAnimationStarted:!1,onAnimationStopped:!1,onAnimationPaused:!1,onAnimationResumed:!1,formatNumberOptions:!1},w={init:function(t){return this.each(function(){_=e(this);var n=e.extend(k,t),i=_.data("flipCounter");t=e.extend(i,n),_.data("flipCounter",t),(t.number===!1||0==t.number)&&(t.number=u()!==!1?u():0,o("number",t.number)),o("animating",!1),o("start_time",!1),_.bind("startAnimation",function(e,t){m(t)}),_.bind("pauseAnimation",function(){b()}),_.bind("resumeAnimation",function(){v()}),_.bind("stopAnimation",function(){f()}),_.htmlClean(),s()})},renderCounter:function(t){return this.each(function(){_=e(this),n()||e(this).flipCounter(),o("number",t),s()})},setNumber:function(t){return this.each(function(){_=e(this),n()||e(this).flipCounter(),o("number",t),s()})},getNumber:function(){var t=!1;return this.each(t=function(){return _=e(this),n()||e(this).flipCounter(),t=r("number")}),t},startAnimation:function(t){return this.each(function(){_=e(this),n()||e(this).flipCounter(),_.trigger("startAnimation",t)})},stopAnimation:function(){return this.each(function(){_=e(this),n()||e(this).flipCounter(),_.trigger("stopAnimation")})},pauseAnimation:function(){return this.each(function(){_=e(this),n()||e(this).flipCounter(),_.trigger("pauseAnimation")})},resumeAnimation:function(){return this.each(function(){_=e(this),n()||e(this).flipCounter(),_.trigger("resumeAnimation")})}};return w[t]?w[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.flipCounter"),void 0):w.init.apply(this,arguments)}})(jQuery),jQuery.fn.htmlClean=function(){this.contents().filter(function(){return 3!=this.nodeType?($(this).htmlClean(),!1):!/\S/.test(this.nodeValue)}).remove()};
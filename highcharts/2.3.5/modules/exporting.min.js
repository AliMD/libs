(function(e){function t(e){for(var t=e.length;t--;)"number"==typeof e[t]&&(e[t]=Math.round(e[t])-.5);return e}var n=e.Chart,i=e.addEvent,r=e.removeEvent,o=e.createElement,a=e.discardElement,s=e.css,l=e.merge,c=e.each,u=e.extend,d=Math.max,h=document,p=window,f=e.isTouchDevice,g=e.Renderer.prototype.symbols,m=e.getOptions();u(m.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",exportButtonTitle:"Export to raster or vector image",printButtonTitle:"Print the chart"}),m.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF"},menuItemStyle:{padding:"0 5px",background:"none",color:"#303030",fontSize:f?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{align:"right",backgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#F7F7F7"],[.6,"#E3E3E3"]]},borderColor:"#B0B0B0",borderRadius:3,borderWidth:1,height:20,hoverBorderColor:"#909090",hoverSymbolFill:"#81A7CF",hoverSymbolStroke:"#4572A5",symbolFill:"#E0E0E0",symbolStroke:"#A0A0A0",symbolX:11.5,symbolY:10.5,verticalAlign:"top",width:24,y:10}},m.exporting={type:"image/png",url:"http://export.highcharts.com/",width:800,buttons:{exportButton:{symbol:"exportIcon",x:-10,symbolFill:"#A8BF77",hoverSymbolFill:"#768F3E",_id:"exportButton",_titleKey:"exportButtonTitle",menuItems:[{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]},printButton:{symbol:"printIcon",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_id:"printButton",_titleKey:"printButtonTitle",onclick:function(){this.print()}}}},e.post=function(e,t){var n,i;i=o("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:"none"},h.body);for(n in t)o("input",{type:"hidden",name:n,value:t[n]},null,i);i.submit(),a(i)},u(n.prototype,{getSVG:function(t){var n,i,r,s=this,d=l(s.options,t);return h.createElementNS||(h.createElementNS=function(e,t){return h.createElement(t)}),t=o("div",null,{position:"absolute",top:"-9999em",width:s.chartWidth+"px",height:s.chartHeight+"px"},h.body),u(d.chart,{renderTo:t,forExport:!0}),d.exporting.enabled=!1,d.chart.plotBackgroundImage=null,d.series=[],c(s.series,function(e){r=l(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),r.isInternal||d.series.push(r)}),n=new e.Chart(d),c(["xAxis","yAxis"],function(e){c(s[e],function(t,i){var r=n[e][i],o=t.getExtremes(),a=o.userMin,o=o.userMax;(void 0!==a||void 0!==o)&&r.setExtremes(a,o,!0,!1)})}),i=n.container.innerHTML,d=null,n.destroy(),a(t),i=i.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/isTracker="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),i=i.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),2===i.match(/ xmlns="/g).length&&(i=i.replace(/xmlns="[^"]+"/,"")),i},exportChart:function(t,n){var i=this.options.exporting,r=this.getSVG(l(i.chartOptions,n)),t=l(i,t);e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width,scale:t.scale||2,svg:r})},print:function(){var e=this,t=e.container,n=[],i=t.parentNode,r=h.body,o=r.childNodes;e.isPrinting||(e.isPrinting=!0,c(o,function(e,t){1===e.nodeType&&(n[t]=e.style.display,e.style.display="none")}),r.appendChild(t),p.print(),setTimeout(function(){i.appendChild(t),c(o,function(e,t){1===e.nodeType&&(e.style.display=n[t])}),e.isPrinting=!1},1e3))},contextMenu:function(e,t,n,r,a,l){var h,p,f,g=this,m=g.options.navigation,v=m.menuItemStyle,b=g.chartWidth,y=g.chartHeight,x="cache-"+e,w=g[x],k=d(a,l);w||(g[x]=w=o("div",{className:"highcharts-"+e},{position:"absolute",zIndex:1e3,padding:k+"px"},g.container),h=o("div",null,u({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},m.menuStyle),w),p=function(){s(w,{display:"none"})},i(w,"mouseleave",function(){f=setTimeout(p,500)}),i(w,"mouseenter",function(){clearTimeout(f)}),c(t,function(e){if(e){var t=o("div",{onmouseover:function(){s(this,m.menuItemHoverStyle)},onmouseout:function(){s(this,v)},innerHTML:e.text||g.options.lang[e.textKey]},u({cursor:"pointer"},v),h);t.onclick=function(){p(),e.onclick.apply(g,arguments)},g.exportDivElements.push(t)}}),g.exportDivElements.push(h,w),g.exportMenuWidth=w.offsetWidth,g.exportMenuHeight=w.offsetHeight),e={display:"block"},n+g.exportMenuWidth>b?e.right=b-n-a-k+"px":e.left=n-k+"px",r+l+g.exportMenuHeight>y?e.bottom=y-r-k+"px":e.top=r+l-k+"px",s(w,e)},addButton:function(e){function t(){i.attr(m),n.attr(g)}var n,i,r,o,a=this,s=a.renderer,c=l(a.options.navigation.buttonOptions,e),d=c.onclick,h=c.menuItems,p=c.width,f=c.height,e=c.borderWidth,g={stroke:c.borderColor},m={stroke:c.symbolStroke,fill:c.symbolFill},v=c.symbolSize||12;a.btnCount||(a.btnCount=0),o=a.btnCount++,a.exportDivElements||(a.exportDivElements=[],a.exportSVGElements=[]),c.enabled!==!1&&(n=s.rect(0,0,p,f,c.borderRadius,e).align(c,!0).attr(u({fill:c.backgroundColor,"stroke-width":e,zIndex:19},g)).add(),r=s.rect(0,0,p,f,0).align(c).attr({id:c._id,fill:"rgba(255, 255, 255, 0.001)",title:a.options.lang[c._titleKey],zIndex:21}).css({cursor:"pointer"}).on("mouseover",function(){i.attr({stroke:c.hoverSymbolStroke,fill:c.hoverSymbolFill}),n.attr({stroke:c.hoverBorderColor})}).on("mouseout",t).on("click",t).add(),h&&(d=function(){t();var e=r.getBBox();a.contextMenu("menu"+o,h,e.x,e.y,p,f)}),r.on("click",function(){d.apply(a,arguments)}),i=s.symbol(c.symbol,c.symbolX-v/2,c.symbolY-v/2,v,v).align(c,!0).attr(u(m,{"stroke-width":c.symbolStrokeWidth||1,zIndex:20})).add(),a.exportSVGElements.push(n,r,i))},destroyExport:function(){var e,t;for(e=0;this.exportSVGElements.length>e;e++)t=this.exportSVGElements[e],t.onclick=t.ontouchstart=null,this.exportSVGElements[e]=t.destroy();for(e=0;this.exportDivElements.length>e;e++)t=this.exportDivElements[e],r(t,"mouseleave"),this.exportDivElements[e]=t.onmouseout=t.onmouseover=t.ontouchstart=t.onclick=null,a(t)}}),g.exportIcon=function(e,n,i,r){return t(["M",e,n+i,"L",e+i,n+r,e+i,n+.8*r,e,n+.8*r,"Z","M",e+.5*i,n+.8*r,"L",e+.8*i,n+.4*r,e+.4*i,n+.4*r,e+.4*i,n,e+.6*i,n,e+.6*i,n+.4*r,e+.2*i,n+.4*r,"Z"])},g.printIcon=function(e,n,i,r){return t(["M",e,n+.7*r,"L",e+i,n+.7*r,e+i,n+.4*r,e,n+.4*r,"Z","M",e+.2*i,n+.4*r,"L",e+.2*i,n,e+.8*i,n,e+.8*i,n+.4*r,"Z","M",e+.2*i,n+.7*r,"L",e,n+r,e+i,n+r,e+.8*i,n+.7*r,"Z"])},n.prototype.callbacks.push(function(e){var t,n=e.options.exporting,r=n.buttons;if(n.enabled!==!1){for(t in r)e.addButton(r[t]);i(e,"destroy",e.destroyExport)}})})(Highcharts);
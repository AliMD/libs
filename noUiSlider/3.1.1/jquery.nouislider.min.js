(function(d){d.fn.noUiSlider=function(p,r){function s(a,e,c){var f=e.data("setup"),d=f.handles;e=f.settings;f=f.pos;a=0>a?0:100<a?100:a;2==e.handles&&(c.is(":first-child")?(c=parseFloat(d[1][0].style[f])-e.margin,a=a>c?c:a):(c=parseFloat(d[0][0].style[f])+e.margin,a=a<c?c:a));e.step&&(c=l.from(e.range,e.step),a=Math.round(a/c)*c);return a}function t(a){return[a.clientX||a.originalEvent.clientX||a.originalEvent.touches[0].clientX,a.clientY||a.originalEvent.clientY||a.originalEvent.touches[0].clientY]}
var u=jQuery.fn.val;jQuery.fn.val=function(){return this.data("_isnS_")?methods.val.call(this,arguments[0]):u.apply(this,arguments)};var j=window.navigator.msPointerEnabled?2:"ontouchstart"in document.documentElement?3:1,l={to:function(a,e){e=0>a[0]?e+Math.abs(a[0]):e-a[0];return 100*e/this._length(a)},from:function(a,e){return 100*e/this._length(a)},is:function(a,e){return e*this._length(a)/100+a[0]},_length:function(a){return a[0]>a[1]?a[0]-a[1]:a[1]-a[0]}},w={handles:2,serialization:{to:["",""],
resolution:0.01}};methods={create:function(){return this.each(function(){var a=d.extend(w,p),e=d(this).data("_isnS_",!0),c=[],f,k,b="",g=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},h=(a.serialization.resolution=a.serialization.resolution||0.01).toString().split("."),q=1==h[0]?0:h[1].length;a.start=g(a.start)?[a.start,0]:a.start;d.each(a,function(b,c){g(c)&&(a[b]=parseFloat(c));var d=!1;switch(b){case "range":case "start":d=2!=c.length||!g(c[0])||!g(c[1]);break;case "handles":d=1>c||2<c||
!g(c);break;case "connect":d="lower"!=c&&"upper"!=c&&"boolean"!=typeof c;break;case "orientation":d="vertical"!=c&&"horizontal"!=c;break;case "margin":case "step":d="undefined"!=typeof c&&!g(c);break;case "serialization":d="object"!=typeof c||!g(c.resolution)||"object"==typeof c.to&&c.to.length<a.handles;break;case "slide":d="function"!=typeof c}d&&console&&console.error("Bad input for "+b+" on slider:",e)});a.margin=a.margin?l.from(a.range,a.margin):0;if(a.serialization.to instanceof jQuery||"string"==
typeof a.serialization.to||!1===a.serialization.to)a.serialization.to=[a.serialization.to];"vertical"==a.orientation?(b+="vertical",f="top",k=1):(b+="horizontal",f="left",k=0);b+=a.connect?"lower"==a.connect?" connect lower":" connect":"";e.addClass(b);for(b=0;b<a.handles;b++){c[b]=e.append("<a><div></div></a>").children(":last");c[b].css(f,l.to(a.range,a.start[b])+"%");var h=(1===j?"mousedown":2===j?"MSPointerDown":"touchstart")+".noUiSliderX",r=(1===j?"mousemove":2===j?"MSPointerMove":"touchmove")+
".noUiSlider",u=(1===j?"mouseup":2===j?"MSPointerUp":"touchend")+".noUiSlider";c[b].find("div").on(h,function(b){d("body").bind("selectstart.noUiSlider",function(){return!1});if(!e.hasClass("disabled")){var n=d(this).addClass("active").parent();d("body").addClass("TOUCH");var g=n.add(d(document)).add("body"),j=parseFloat(n[0].style[f]),h=t(b),v=h,p=!1;d(document).on(r,function(b){b.preventDefault();b=t(b);b[0]-=h[0];b[1]-=h[1];var d=[v[0]!=b[0],v[1]!=b[1]],m=j+100*b[k]/(k?e.height():e.width()),m=
s(m,e,n);if(d[k]&&m!=p){n.css(f,m+"%").data("input").val(l.is(a.range,m).toFixed(q));var d=a.slide,g=e.data("_n",!0);"function"==typeof d&&d.call(g,void 0);p=m;n.css("z-index",2==c.length&&100==m&&n.is(":first-child")?2:1)}v=b});d(document).on(u+" mouseLeave.noUiSlider",function(){g.off(".noUiSlider");d("body").removeClass("TOUCH");e.find(".active").removeClass("active");e.data("_n")&&e.data("_n",!1).change()})}}).on("click",function(a){a.stopPropagation()})}if(1==j)e.on("click",function(b){if(!e.hasClass("disabled")){var d=
t(b);b=100*(d[k]-e.offset()[f])/(k?e.height():e.width());d=1<c.length?d[k]<(c[0].offset()[f]+c[1].offset()[f])/2?c[0]:c[1]:c[0];b=s(b,e,d);d.css(f,b+"%").data("input").val(l.is(a.range,b).toFixed(q));b=a.slide;"function"==typeof b&&b.call(e,void 0);e.change()}});for(b=0;b<c.length;b++)h=l.is(a.range,parseFloat(c[b][0].style[f])).toFixed(q),"string"==typeof a.serialization.to[b]?c[b].data("input",e.append('<input type="hidden" name="'+a.serialization.to[b]+'">').find("input:last").val(h).change(function(a){a.stopPropagation()})):
!1==a.serialization.to[b]?c[b].data("input",{val:function(a){if("undefined"!=typeof a)this.handle.data("noUiVal",a);else return this.handle.data("noUiVal")},handle:c[b]}):c[b].data("input",a.serialization.to[b].data("handleNR",b).val(h).change(function(){var a=[null,null];a[d(this).data("handleNR")]=d(this).val();e.val(a)}));d(this).data("setup",{settings:a,handles:c,pos:f,res:q})})},val:function(a){if(a){var e="number"==typeof a?[a]:a;return this.each(function(){for(var a=d(this).data("setup"),b=
0;b<a.handles.length;b++)if(null!=e[b]){var c=s(l.to(a.settings.range,e[b]),d(this),a.handles[b]);a.handles[b].css(a.pos,c+"%").data("input").val(l.is(a.settings.range,c).toFixed(a.res))}})}a=d(this).data("setup").handles;for(var c=[],f=0;f<a.length;f++)c.push(parseFloat(a[f].data("input").val()));return 1==c.length?c[0]:c},disabled:function(){return r?d(this).addClass("disabled"):d(this).removeClass("disabled")}};return"disabled"==p?methods.disabled.apply(this):methods.create.apply(this)}})(jQuery);

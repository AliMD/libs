(function(undefined){function BasicObject(){}function Object(){}function Class(){}function NilClass(){}function module_eqq(object){if(null==object)return!1;for(var search=object._klass;search;){if(search===this)return!0;search=search._super}return!1}function module_to_s(){return this._name}function __donate(defined){var methods=this._methods,included_in=this.$included_in;if(this._methods=methods.concat(defined),included_in)for(var i=0,length=included_in.length;length>i;i++){for(var includee=included_in[i],dest=includee.prototype,j=0,jj=defined.length;jj>j;j++){var method=defined[j];dest[method]=this.prototype[method]}includee.$included_in&&includee._donate(defined,!0)}}function __defs(mid,body){this._smethods.push(mid),this[mid]=body;var inherited=this._inherited;if(inherited.length)for(var subclass,i=0,length=inherited.length;length>i;i++)subclass=inherited[i],subclass[mid]||subclass._defs(mid,body)}var Opal=this.Opal={},TopScope=function(){};TopScope.prototype=Opal,Opal.alloc=TopScope,Opal.global=this;var __hasOwn=Opal.hasOwnProperty,__slice=Opal.slice=Array.prototype.slice,unique_id=0;Opal.uid=function(){return unique_id++},Opal.cvars={},Opal.gvars={},Opal.klass=function(base,superklass,id,constructor){var klass;if(base._isObject&&(base=base._klass),null===superklass&&(superklass=Object),__hasOwn.call(base._scope,id))klass=base._scope[id];else{if(superklass._methods)klass=boot_class(superklass,constructor);else{var bridged=superklass;superklass=Object,klass=bridge_class(bridged)}klass._name=base===Object?id:base._name+"::"+id;var const_alloc=function(){},const_scope=const_alloc.prototype=new base._scope.alloc;klass._scope=const_scope,const_scope.base=klass,const_scope.alloc=const_alloc,base[id]=base._scope[id]=klass,superklass.$inherited&&superklass.$inherited(klass)}return klass},Opal.module=function(base,id,constructor){var klass;if(base._isObject&&(base=base._klass),__hasOwn.call(base._scope,id))klass=base._scope[id];else{klass=boot_class(Class,constructor),klass._name=base===Object?id:base._name+"::"+id,klass.$included_in=[];var const_alloc=function(){},const_scope=const_alloc.prototype=new base._scope.alloc;klass._scope=const_scope,const_scope.alloc=const_alloc,base[id]=base._scope[id]=klass}return klass};var boot_defclass=function(id,constructor,superklass){if(superklass){var ctor=function(){};ctor.prototype=superklass.prototype,constructor.prototype=new ctor}var prototype=constructor.prototype;return prototype.constructor=constructor,prototype._isObject=!0,prototype._klass=constructor,constructor._inherited=[],constructor._included_in=[],constructor._isClass=!0,constructor._name=id,constructor._super=superklass,constructor._methods=[],constructor._smethods=[],constructor._isObject=!1,constructor._donate=__donate,constructor._defs=__defs,constructor["$==="]=module_eqq,constructor.$to_s=module_to_s,constructor.toString=module_to_s,Opal[id]=constructor,constructor},boot_class=Opal.boot=function(superklass,constructor){var ctor=function(){};ctor.prototype=superklass.prototype,constructor.prototype=new ctor;var prototype=constructor.prototype;prototype._klass=constructor,prototype.constructor=constructor,constructor._inherited=[],constructor._included_in=[],constructor._isClass=!0,constructor._super=superklass,constructor._methods=[],constructor._isObject=!1,constructor._klass=Class,constructor._donate=__donate,constructor._defs=__defs,constructor["$==="]=module_eqq,constructor.$to_s=module_to_s,constructor.toString=module_to_s,constructor["$[]"]=undefined,constructor.$call=undefined;var smethods;smethods=superklass._smethods.slice(),constructor._smethods=smethods;for(var i=0,length=smethods.length;length>i;i++){var m=smethods[i];constructor[m]=superklass[m]}return superklass._inherited.push(constructor),constructor},bridge_class=function(constructor){constructor.prototype._klass=constructor,constructor._inherited=[],constructor._included_in=[],constructor._isClass=!0,constructor._super=Object,constructor._klass=Class,constructor._methods=[],constructor._smethods=[],constructor._isObject=!1,constructor._donate=function(){},constructor._defs=__defs,constructor["$==="]=module_eqq,constructor.$to_s=module_to_s,constructor.toString=module_to_s;for(var smethods=constructor._smethods=Class._methods.slice(),i=0,length=smethods.length;length>i;i++){var m=smethods[i];constructor[m]=Object[m]}bridged_classes.push(constructor);for(var table=Object.prototype,methods=Object._methods,i=0,length=methods.length;length>i;i++){var m=methods[i];constructor.prototype[m]=table[m]}return constructor._smethods.push("$allocate"),constructor};Opal.puts=function(a){console.log(a)};var mm_mid="",method_missing_dispatcher=function(){return this.$method_missing._p=method_missing_dispatcher._p,this.$method_missing.apply(this,[mm_mid].concat(__slice.call(arguments)))};Opal.mm=function(mid){return mm_mid=mid,method_missing_dispatcher},Opal.cm=function(name){return this.base.$const_missing(name)},Opal.ac=function(actual,expected,object,meth){var inspect=(object._isObject?object._klass._name+"#":object._name+".")+meth,msg="["+inspect+"] wrong number of arguments("+actual+" for "+expected+")";throw Opal.ArgumentError.$new(msg)},Opal.send=function(recv,mid){var args=__slice.call(arguments,2),func=recv["$"+mid];return func?func.apply(recv,args):recv.$method_missing.apply(recv,[mid].concat(args))},boot_defclass("BasicObject",BasicObject),boot_defclass("Object",Object,BasicObject),boot_defclass("Class",Class,Object),Class.prototype=Function.prototype,BasicObject._klass=Object._klass=Class._klass=Class,Object._defn=function(mid,body){this.prototype[mid]=body,this._donate([mid])};var bridged_classes=Object.$included_in=[];Opal.base=Object,BasicObject._scope=Object._scope=Opal,Opal.Module=Opal.Class,Opal.Kernel=Object;var class_const_alloc=function(){},class_const_scope=new TopScope;class_const_scope.alloc=class_const_alloc,Class._scope=class_const_scope,Object.prototype.toString=function(){return this.$to_s()},Opal.top=new Object,Opal.klass(Object,Object,"NilClass",NilClass);var nil=Opal.nil=new NilClass;nil.call=nil.apply=function(){throw Opal.LocalJumpError.$new("no block given")},Opal.breaker=new Error("unexpected break")}).call(this),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__slice=(__opal.breaker,__opal.slice),__klass=__opal.klass;return function(__base,__super){function Class(){}Class=__klass(__base,__super,"Class",Class);var TMP_1,TMP_2,TMP_3,TMP_4,def=Class.prototype,__scope=Class._scope;return Class._defs("$new",TMP_1=function(sup){function AnonClass(){}var _a,block;block=TMP_1._p||nil,TMP_1._p=null,null==sup&&(sup=(_a=__scope.Object)==null?__opal.cm("Object"):_a);var klass=Opal.boot(sup,AnonClass);if(klass._name=nil,klass._scope=sup._scope,sup.$inherited(klass),block!==nil){var block_self=block._s;block._s=null,block.call(klass),block._s=block_self}return klass}),def.$allocate=function(){var obj=new this;return obj._id=Opal.uid(),obj},def.$alias_method=function(newname,oldname){return this.prototype["$"+newname]=this.prototype["$"+oldname],this},def.$ancestors=function(){for(var parent=this,result=[];parent;)result.push(parent),parent=parent._super;return result},def.$append_features=function(klass){var module=this;klass.$included_modules||(klass.$included_modules=[]);for(var idx=0,length=klass.$included_modules.length;length>idx;idx++)if(klass.$included_modules[idx]===module)return;klass.$included_modules.push(module),module.$included_in||(module.$included_in=[]),module.$included_in.push(klass);for(var donator=module.prototype,prototype=klass.prototype,methods=module._methods,i=0,length=methods.length;length>i;i++){var method=methods[i];prototype[method]=donator[method]}return prototype._smethods&&prototype._smethods.push.apply(prototype._smethods,methods),klass.$included_in&&klass._donate(methods.slice(),!0),this},def.$attr_accessor=function(names){var _a,_b;return names=__slice.call(arguments,0),((_a=this).$attr_reader||$mm("attr_reader")).apply(_a,[].concat(names)),((_b=this).$attr_writer||$mm("attr_writer")).apply(_b,[].concat(names))},def.$attr_reader=function(names){names=__slice.call(arguments,0);for(var proto=this.prototype,cls=this,i=0,length=names.length;length>i;i++)(function(name){proto[name]=nil;var func=function(){return this[name]};cls._isSingleton?proto._defs("$"+name,func):proto["$"+name]=func})(names[i]);return nil},def.$attr_writer=function(names){names=__slice.call(arguments,0);for(var proto=this.prototype,cls=this,i=0,length=names.length;length>i;i++)(function(name){proto[name]=nil;var func=function(value){return this[name]=value};cls._isSingleton?proto._defs("$"+name+"=",func):proto["$"+name+"="]=func})(names[i]);return nil},def.$attr=def.$attr_accessor,def["$const_defined?"]=function(name){return!!this._scope[name]},def.$const_get=function(name){var _a,result=this._scope[name];return null==result?((_a=this).$const_missing||$mm("const_missing")).call(_a,name):result},def.$const_missing=function(const$){var _a,_b,name=nil;return name=this._name,((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.NameError)==null?__opal.cm("NameError"):_b,"uninitialized constant "+name+"::"+const$)},def.$const_set=function(name,value){var _a,_b,_c,_d,_e,_f,_g;((_a=((_b=name)["$=~"]||$mm("=~")).call(_b,/^[A-Z]/))===!1||_a===nil)&&((_a=this).$raise||$mm("raise")).call(_a,(_c=__scope.NameError)==null?__opal.cm("NameError"):_c,"wrong constant name "+name),((_c=((_d=name)["$=~"]||$mm("=~")).call(_d,/^[\w_]+$/))===!1||_c===nil)&&((_c=this).$raise||$mm("raise")).call(_c,(_e=__scope.NameError)==null?__opal.cm("NameError"):_e,"wrong constant name "+name);try{name=((_e=name).$to_str||$mm("to_str")).call(_e)}catch($err){((_f=this).$raise||$mm("raise")).call(_f,(_g=__scope.TypeError)==null?__opal.cm("TypeError"):_g,"conversion with #to_str failed")}return this._scope[name]=value,value},def.$define_method=TMP_2=function(name,method){var block;block=TMP_2._p||nil,TMP_2._p=null,method&&(block=method),block===nil&&no_block_given();var jsid="$"+name;return block._jsid=jsid,block._sup=this.prototype[jsid],block._s=null,this.prototype[jsid]=block,this._donate([jsid]),nil},def.$include=function(mods){var _a,_b;mods=__slice.call(arguments,0);for(var mod,i=mods.length-1;i>=0;)mod=mods[i],i--,mod!==this&&(((_a=mod).$append_features||$mm("append_features")).call(_a,this),((_b=mod).$included||$mm("included")).call(_b,this));return this},def.$instance_methods=function(include_super){null==include_super&&(include_super=!1);var methods=[],proto=this.prototype;for(var prop in this.prototype)(include_super||proto.hasOwnProperty(prop))&&prop.charAt(0)==="$"&&methods.push(prop.substr(1));return methods},def.$included=function(){return nil},def.$inherited=function(){return nil},def.$module_eval=TMP_3=function(){var block;block=TMP_3._p||nil,TMP_3._p=null,block===nil&&no_block_given();var result,block_self=block._s;return block._s=null,result=block.call(this),block._s=block_self,result},def.$class_eval=def.$module_eval,def["$method_defined?"]=function(method){return typeof this.prototype["$"+method]=="function"?!0:!1},def.$module_function=function(methods){methods=__slice.call(arguments,0);for(var i=0,length=methods.length;length>i;i++){var meth=methods[i],func=this.prototype["$"+meth];this["$"+meth]=func}return this},def.$name=function(){return this._name},def.$new=TMP_4=function(args){var block;block=TMP_4._p||nil,TMP_4._p=null,args=__slice.call(arguments,0);var obj=new this;return obj._id=Opal.uid(),obj.$initialize._p=block,obj.$initialize.apply(obj,args),obj},def.$public=function(){return nil},def.$private=def.$public,def.$protected=def.$public,def.$superclass=function(){return this._super||nil},def.$undef_method=function(symbol){return this.prototype["$"+symbol]=void 0,this},nil}(self,null)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__slice=(__opal.breaker,__opal.slice),__klass=__opal.klass;return function(__base,__super){function BasicObject(){}BasicObject=__klass(__base,__super,"BasicObject",BasicObject);var TMP_1,TMP_2,TMP_3,TMP_4,def=BasicObject.prototype,__scope=BasicObject._scope;return def.$initialize=function(){return nil},def["$=="]=function(other){return this===other},def.$__send__=TMP_1=function(symbol,args){var block;block=TMP_1._p||nil,TMP_1._p=null,args=__slice.call(arguments,1);var func=this["$"+symbol];return func?(block!==nil&&(func._p=block),func.apply(this,args)):(block!==nil&&(this.$method_missing._p=block),this.$method_missing.apply(this,[symbol].concat(args)))},def["$eql?"]=def["$=="],def["$equal?"]=def["$=="],def.$instance_eval=TMP_2=function(){var block;block=TMP_2._p||nil,TMP_2._p=null,block===nil&&no_block_given();var result,block_self=block._s;return block._s=null,result=block.call(this,this),block._s=block_self,result},def.$instance_exec=TMP_3=function(args){var block;block=TMP_3._p||nil,TMP_3._p=null,args=__slice.call(arguments,0),block===nil&&no_block_given();var result,block_self=block._s;return block._s=null,result=block.apply(this,args),block._s=block_self,result},def.$method_missing=TMP_4=function(symbol,args){var _a,_b,block;return block=TMP_4._p||nil,TMP_4._p=null,args=__slice.call(arguments,1),((_a=(_b=__scope.Kernel)==null?__opal.cm("Kernel"):_b).$raise||$mm("raise")).call(_a,(_b=__scope.NoMethodError)==null?__opal.cm("NoMethodError"):_b,"undefined method `"+symbol+"' for BasicObject instance")},nil}(self,null)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__slice=__opal.slice,__module=__opal.module;return function(__base){function Kernel(){}Kernel=__module(__base,"Kernel",Kernel);var TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,def=Kernel.prototype,__scope=Kernel._scope;def.$initialize=def.$initialize,def["$=="]=def["$=="],def.$__send__=def.$__send__,def["$eql?"]=def["$eql?"],def["$equal?"]=def["$equal?"],def.$instance_eval=def.$instance_eval,def.$instance_exec=def.$instance_exec,def.$method_missing=TMP_1=function(symbol,args){var _a,_b,block;return block=TMP_1._p||nil,TMP_1._p=null,args=__slice.call(arguments,1),((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.NoMethodError)==null?__opal.cm("NoMethodError"):_b,"undefined method `"+symbol+"' for "+((_b=this).$inspect||$mm("inspect")).call(_b))},def["$=~"]=function(){return!1},def["$==="]=function(other){return this==other},def.$as_json=function(){return nil},def.$method=function(name){var _a,_b,recv=this,meth=recv["$"+name],func=function(){return meth.apply(recv,__slice.call(arguments,0))};return meth||((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.NameError)==null?__opal.cm("NameError"):_b),func._klass=(_b=__scope.Method)==null?__opal.cm("Method"):_b,func},def.$methods=function(all){null==all&&(all=!0);var methods=[];for(var k in this)if(k[0]=="$"&&typeof this[k]=="function"){if((all===!1||all===nil)&&!Object.hasOwnProperty.call(this,k))continue;methods.push(k.substr(1))}return methods},def.$Array=function(object){var _a,_b;return object.$to_ary?((_a=object).$to_ary||$mm("to_ary")).call(_a):object.$to_a?((_b=object).$to_a||$mm("to_a")).call(_b):[object]},def.$class=function(){return this._klass},def.$define_singleton_method=TMP_2=function(name){var body;body=TMP_2._p||nil,TMP_2._p=null,body===nil&&no_block_given();var jsid="$"+name;return body._jsid=jsid,body._sup=this[jsid],body._s=null,this[jsid]=body,this},def.$dup=function(){var _a,_b;return((_a=((_b=this).$class||$mm("class")).call(_b)).$allocate||$mm("allocate")).call(_a)},def.$enum_for=function(method,args){var _a,_b;return null==method&&(method="each"),args=__slice.call(arguments,1),((_a=(_b=__scope.Enumerator)==null?__opal.cm("Enumerator"):_b).$new||$mm("new")).apply(_a,[this,method].concat(args))},def["$equal?"]=function(other){return this===other},def.$extend=function(mods){var _a,_b;mods=__slice.call(arguments,0);for(var i=0,length=mods.length;length>i;i++)((_a=((_b=this).$singleton_class||$mm("singleton_class")).call(_b)).$include||$mm("include")).call(_a,mods[i]);return this},def.$format=function(format,args){var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;args=__slice.call(arguments,1);var idx=0;return format.replace(/%(\d+\$)?([-+ 0]*)(\d*|\*(\d+\$)?)(?:\.(\d*|\*(\d+\$)?))?([cspdiubBoxXfgeEG])|(%%)/g,function(str,idx_str,flags,width_str,w_idx_str,prec_str,p_idx_str,spec,escaped){if(escaped)return"%";var width,prec,obj,is_integer_spec="diubBoxX".indexOf(spec)!=-1,is_float_spec="eEfgG".indexOf(spec)!=-1,prefix="";if(void 0===width_str)width=void 0;else if(width_str.charAt(0)=="*"){var w_idx=idx++;w_idx_str&&(w_idx=parseInt(w_idx_str,10)-1),width=((_a=args[w_idx]).$to_i||$mm("to_i")).call(_a)}else width=parseInt(width_str,10);if(prec_str)if(prec_str.charAt(0)=="*"){var p_idx=idx++;p_idx_str&&(p_idx=parseInt(p_idx_str,10)-1),prec=((_b=args[p_idx]).$to_i||$mm("to_i")).call(_b)}else prec=parseInt(prec_str,10);else prec=is_float_spec?6:void 0;switch(idx_str&&(idx=parseInt(idx_str,10)-1),spec){case"c":obj=args[idx],str=obj._isString?obj.charAt(0):String.fromCharCode(((_c=obj).$to_i||$mm("to_i")).call(_c));break;case"s":str=((_d=args[idx]).$to_s||$mm("to_s")).call(_d),void 0!==prec&&(str=str.substr(0,prec));break;case"p":str=((_e=args[idx]).$inspect||$mm("inspect")).call(_e),void 0!==prec&&(str=str.substr(0,prec));break;case"d":case"i":case"u":str=((_f=args[idx]).$to_i||$mm("to_i")).call(_f).toString();break;case"b":case"B":str=((_g=args[idx]).$to_i||$mm("to_i")).call(_g).toString(2);break;case"o":str=((_h=args[idx]).$to_i||$mm("to_i")).call(_h).toString(8);break;case"x":case"X":str=((_i=args[idx]).$to_i||$mm("to_i")).call(_i).toString(16);break;case"e":case"E":str=((_j=args[idx]).$to_f||$mm("to_f")).call(_j).toExponential(prec);break;case"f":str=((_k=args[idx]).$to_f||$mm("to_f")).call(_k).toFixed(prec);break;case"g":case"G":str=((_l=args[idx]).$to_f||$mm("to_f")).call(_l).toPrecision(prec)}idx++,(is_integer_spec||is_float_spec)&&(str.charAt(0)=="-"?(prefix="-",str=str.substr(1)):flags.indexOf("+")!=-1?prefix="+":flags.indexOf(" ")!=-1&&(prefix=" ")),is_integer_spec&&void 0!==prec&&str.length<prec&&(_m="0",_n=prec-str.length,str=("number"==typeof _m?_m*_n:_m["$*"](_n))+str);var total_len=prefix.length+str.length;void 0!==width&&width>total_len&&(flags.indexOf("-")!=-1?(_m=" ",_n=width-total_len,str+="number"==typeof _m?_m*_n:_m["$*"](_n)):flags.indexOf("0")!=-1?(_m="0",_n=width-total_len,str=("number"==typeof _m?_m*_n:_m["$*"](_n))+str):(_m=" ",_n=width-total_len,prefix=("number"==typeof _m?_m*_n:_m["$*"](_n))+prefix));var result=prefix+str;return"XEG".indexOf(spec)!=-1&&(result=result.toUpperCase()),result})},def.$hash=function(){return this._id},def.$inspect=function(){var _a;return((_a=this).$to_s||$mm("to_s")).call(_a)},def["$instance_of?"]=function(klass){return this._klass===klass},def["$instance_variable_defined?"]=function(name){return __hasOwn.call(this,name.substr(1))},def.$instance_variable_get=function(name){var ivar=this[name.substr(1)];return null==ivar?nil:ivar},def.$instance_variable_set=function(name,value){return this[name.substr(1)]=value},def.$instance_variables=function(){var result=[];for(var name in this)name.charAt(0)!=="$"&&result.push(name);return result},def["$is_a?"]=function(klass){for(var search=this._klass;search;){if(search===klass)return!0;search=search._super}return!1},def["$kind_of?"]=def["$is_a?"],def.$lambda=TMP_3=function(){var block;return block=TMP_3._p||nil,TMP_3._p=null,block},def.$loop=TMP_4=function(){var block;for(block=TMP_4._p||nil,TMP_4._p=null;;)if(block.call(null)===__breaker)return __breaker.$v;return this},def["$nil?"]=function(){return!1},def.$object_id=function(){return this._id||(this._id=Opal.uid())},def.$printf=function(args){var _a,_b,_c,_d,_e,fmt=nil;return args=__slice.call(arguments,0),((_a=((_b=args).$length||$mm("length")).call(_b))["$>"]||$mm(">")).call(_a,0)&&(fmt=((_c=args).$shift||$mm("shift")).call(_c),((_d=this).$print||$mm("print")).call(_d,((_e=this).$format||$mm("format")).apply(_e,[fmt].concat(args)))),nil},def.$proc=TMP_5=function(){var _a,_b,block;return block=TMP_5._p||nil,TMP_5._p=null,block===nil&&((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.ArgumentError)==null?__opal.cm("ArgumentError"):_b,"no block given"),block.is_lambda=!1,block},def.$puts=function(strs){var _a,_b;strs=__slice.call(arguments,0);for(var i=0;i<strs.length;i++)strs[i]instanceof Array?((_a=this).$puts||$mm("puts")).apply(_a,[].concat(strs[i])):__opal.puts(((_b=strs[i]).$to_s||$mm("to_s")).call(_b));return nil},def.$p=function(args){var _a,_b,_c;return args=__slice.call(arguments,0),console.log.apply(console,args),((_a=((_b=args).$length||$mm("length")).call(_b))["$<="]||$mm("<=")).call(_a,1)?((_c=args)["$[]"]||$mm("[]")).call(_c,0):args},def.$print=def.$puts,def.$raise=function(exception,string){var _a,_b,_c;throw null==exception&&(exception=""),"string"==typeof exception?exception=((_a=(_b=__scope.RuntimeError)==null?__opal.cm("RuntimeError"):_b).$new||$mm("new")).call(_a,exception):((_b=exception)["$is_a?"]||$mm("is_a?")).call(_b,(_c=__scope.Exception)==null?__opal.cm("Exception"):_c)||(exception=((_c=exception).$new||$mm("new")).call(_c,string)),exception},def.$rand=function(max){return null==max?Math.random():Math.floor(Math.random()*max)},def["$respond_to?"]=function(name){return!!this["$"+name]},def.$send=def.$__send__,def.$singleton_class=function(){function Singleton(){}if(this._isClass){if(this._singleton)return this._singleton;var meta=new __opal.Class;return meta._klass=__opal.Class,this._singleton=meta,meta.prototype=this,meta._isSingleton=!0,meta}if(!this._isObject)return this._klass;if(this._singleton)return this._singleton;var orig_class=this._klass,class_id="#<Class:#<"+orig_class._name+":"+orig_class._id+">>",meta=Opal.boot(orig_class,Singleton);return meta._name=class_id,meta.prototype=this,this._singleton=meta,meta._klass=orig_class._klass,meta},def.$sprintf=def.$format,def.$String=function(str){return String(str)},def.$tap=TMP_6=function(){var block;return block=TMP_6._p||nil,TMP_6._p=null,block.call(null,this)===__breaker?__breaker.$v:this},def.$to_json=function(){var _a,_b;return((_a=((_b=this).$to_s||$mm("to_s")).call(_b)).$to_json||$mm("to_json")).call(_a)},def.$to_proc=function(){return this},def.$to_s=function(){return"#<"+this._klass._name+":"+this._id+">"},Kernel._donate(["$initialize","$==","$__send__","$eql?","$equal?","$instance_eval","$instance_exec","$method_missing","$=~","$===","$as_json","$method","$methods","$Array","$class","$define_singleton_method","$dup","$enum_for","$equal?","$extend","$format","$hash","$inspect","$instance_of?","$instance_variable_defined?","$instance_variable_get","$instance_variable_set","$instance_variables","$is_a?","$kind_of?","$lambda","$loop","$nil?","$object_id","$printf","$proc","$puts","$p","$print","$raise","$rand","$respond_to?","$send","$singleton_class","$sprintf","$String","$tap","$to_json","$to_proc","$to_s"])}(self)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__klass=(__opal.breaker,__opal.slice,__opal.klass);return function(__base,__super){function NilClass(){}NilClass=__klass(__base,__super,"NilClass",NilClass);var def=NilClass.prototype,__scope=NilClass._scope;return def["$&"]=function(){return!1},def["$|"]=function(other){return other!==!1&&other!==nil},def["$^"]=function(other){return other!==!1&&other!==nil},def["$=="]=function(other){return other===nil},def.$as_json=function(){return this},def.$dup=function(){var _a,_b;return((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.TypeError)==null?__opal.cm("TypeError"):_b)},def.$inspect=function(){return"nil"},def["$nil?"]=function(){return!0},def.$singleton_class=function(){var _a;return(_a=__scope.NilClass)==null?__opal.cm("NilClass"):_a},def.$to_a=function(){return[]},def.$to_h=function(){return __opal.hash()},def.$to_i=function(){return 0},def.$to_f=def.$to_i,def.$to_json=function(){return"null"},def.$to_native=function(){return null},def.$to_s=function(){return""},nil}(self,null)}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,__klass=(__opal.mm,__opal.breaker,__opal.slice,__opal.klass);return function(__base,__super){function Boolean(){}Boolean=__klass(__base,__super,"Boolean",Boolean);var def=Boolean.prototype;return Boolean._scope,def._isBoolean=!0,def["$&"]=function(other){return 1==this?other!==!1&&other!==nil:!1},def["$|"]=function(other){return 1==this?!0:other!==!1&&other!==nil},def["$^"]=function(other){return 1==this?other===!1||other===nil:other!==!1&&other!==nil},def["$=="]=function(other){return 1==this===other.valueOf()},def.$as_json=function(){return this},def.$singleton_class=def.$class,def.$to_json=function(){return 1==this?"true":"false"},def.$to_s=function(){return 1==this?"true":"false"},nil}(self,Boolean),__scope.TrueClass=(_a=__scope.Boolean)==null?__opal.cm("Boolean"):_a,__scope.FalseClass=(_a=__scope.Boolean)==null?__opal.cm("Boolean"):_a}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,$mm=__opal.mm,__klass=(__opal.breaker,__opal.slice,__opal.klass);return function(__base,__super){function Exception(){}Exception=__klass(__base,__super,"Exception",Exception);var def=Exception.prototype;return Exception._scope,def.message=nil,def.$message=function(){return this.message},nil,Exception._defs("$new",function(message){null==message&&(message="");var err=new Error(message);return err._klass=this,err.name=this._name,err}),def.$backtrace=function(){var backtrace=this.stack;return"string"==typeof backtrace?backtrace.split("\n").slice(0,15):backtrace?backtrace.slice(0,15):[]},def.$inspect=function(){var _a,_b;return"#<"+((_a=((_b=this).$class||$mm("class")).call(_b)).$name||$mm("name")).call(_a)+": '"+this.message+"'>"},def.$to_s=def.$message}(self,Error),function(__base,__super){function StandardError(){}return StandardError=__klass(__base,__super,"StandardError",StandardError),StandardError.prototype,StandardError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function RuntimeError(){}return RuntimeError=__klass(__base,__super,"RuntimeError",RuntimeError),RuntimeError.prototype,RuntimeError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function LocalJumpError(){}return LocalJumpError=__klass(__base,__super,"LocalJumpError",LocalJumpError),LocalJumpError.prototype,LocalJumpError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function TypeError(){}return TypeError=__klass(__base,__super,"TypeError",TypeError),TypeError.prototype,TypeError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function NameError(){}return NameError=__klass(__base,__super,"NameError",NameError),NameError.prototype,NameError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function NoMethodError(){}return NoMethodError=__klass(__base,__super,"NoMethodError",NoMethodError),NoMethodError.prototype,NoMethodError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function ArgumentError(){}return ArgumentError=__klass(__base,__super,"ArgumentError",ArgumentError),ArgumentError.prototype,ArgumentError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function IndexError(){}return IndexError=__klass(__base,__super,"IndexError",IndexError),IndexError.prototype,IndexError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function KeyError(){}return KeyError=__klass(__base,__super,"KeyError",KeyError),KeyError.prototype,KeyError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function RangeError(){}return RangeError=__klass(__base,__super,"RangeError",RangeError),RangeError.prototype,RangeError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function StopIteration(){}return StopIteration=__klass(__base,__super,"StopIteration",StopIteration),StopIteration.prototype,StopIteration._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function SyntaxError(){}return SyntaxError=__klass(__base,__super,"SyntaxError",SyntaxError),SyntaxError.prototype,SyntaxError._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a),function(__base,__super){function SystemExit(){}return SystemExit=__klass(__base,__super,"SystemExit",SystemExit),SystemExit.prototype,SystemExit._scope,nil}(self,(_a=__scope.Exception)==null?__opal.cm("Exception"):_a)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,__klass=(__opal.mm,__opal.breaker,__opal.slice,__opal.klass),__gvars=__opal.gvars;return function(__base,__super){function Regexp(){}function match_to_s(){return this[0]}function match_inspect(){return"<#MatchData "+this[0].$inspect()+">"}Regexp=__klass(__base,__super,"Regexp",Regexp);var def=Regexp.prototype,__scope=Regexp._scope;Regexp._defs("$escape",function(string){return string.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\^\$\|]/g,"\\$&")}),Regexp._defs("$new",function(string,options){return new RegExp(string,options)}),def["$=="]=function(other){return other.constructor==RegExp&&this.toString()===other.toString()},def["$==="]=def.test,def["$=~"]=function(string){var _a,result=this.exec(string);return result?(result.$to_s=match_to_s,result.$inspect=match_inspect,result._klass=(_a=__scope.MatchData)==null?__opal.cm("MatchData"):_a,__gvars["~"]=result):__gvars["~"]=nil,result?result.index:nil},def["$eql?"]=def["$=="],def.$inspect=def.toString,def.$match=function(pattern){var _a,result=this.exec(pattern);return result?(result.$to_s=match_to_s,result.$inspect=match_inspect,result._klass=(_a=__scope.MatchData)==null?__opal.cm("MatchData"):_a,__gvars["~"]=result):__gvars["~"]=nil},def.$to_s=function(){return this.source}}(self,RegExp),function(__base,__super){function MatchData(){}return MatchData=__klass(__base,__super,"MatchData",MatchData),MatchData.prototype,MatchData._scope,nil}(self,null)}(Opal),function(__opal){var self=__opal.top,$mm=(__opal.nil,__opal.mm),__module=(__opal.breaker,__opal.slice,__opal.module);return function(__base){function Comparable(){}Comparable=__module(__base,"Comparable",Comparable);var def=Comparable.prototype;Comparable._scope,def["$<"]=function(other){var _a,_b;return((_a=((_b=this)["$<=>"]||$mm("<=>")).call(_b,other))["$=="]||$mm("==")).call(_a,-1)},def["$<="]=function(other){var _a,_b;return((_a=((_b=this)["$<=>"]||$mm("<=>")).call(_b,other))["$<="]||$mm("<=")).call(_a,0)},def["$=="]=function(other){var _a,_b;return((_a=((_b=this)["$<=>"]||$mm("<=>")).call(_b,other))["$=="]||$mm("==")).call(_a,0)},def["$>"]=function(other){var _a,_b;return((_a=((_b=this)["$<=>"]||$mm("<=>")).call(_b,other))["$=="]||$mm("==")).call(_a,1)},def["$>="]=function(other){var _a,_b;return((_a=((_b=this)["$<=>"]||$mm("<=>")).call(_b,other))["$>="]||$mm(">=")).call(_a,0)},def["$between?"]=function(min,max){var _a,_b,_c;return(_a=((_b=this)["$>"]||$mm(">")).call(_b,min))?((_c=this)["$<"]||$mm("<")).call(_c,max):_a},Comparable._donate(["$<","$<=","$==","$>","$>=","$between?"])}(self)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__slice=__opal.slice,__module=__opal.module;return function(__base){function Enumerable(){}Enumerable=__module(__base,"Enumerable",Enumerable);var TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_9,TMP_10,TMP_11,TMP_12,TMP_13,TMP_14,def=Enumerable.prototype,__scope=Enumerable._scope;def["$all?"]=TMP_1=function(){var block;block=TMP_1._p||nil,TMP_1._p=null;var proc,result=!0;return proc=block!==nil?function(){for(var value,args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];return(value=block.apply(this,args))===__breaker?__breaker.$v:value===!1||value===nil?(result=!1,__breaker.$v=nil,__breaker):void 0}:function(obj){return(obj===!1||obj===nil)&&arguments.length<2?(result=!1,__breaker.$v=nil,__breaker):void 0
},this.$each._p=proc,this.$each(),result},def["$any?"]=TMP_2=function(){var block;block=TMP_2._p||nil,TMP_2._p=null;var proc,result=!1;return proc=block!==nil?function(){for(var value,args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];return(value=block.apply(this,args))===__breaker?__breaker.$v:value!==!1&&value!==nil?(result=!0,__breaker.$v=nil,__breaker):void 0}:function(obj){return obj!==!1&&obj!==nil||arguments.length>=2?(result=!0,__breaker.$v=nil,__breaker):void 0},this.$each._p=proc,this.$each(),result},def.$collect=TMP_3=function(){var block;block=TMP_3._p||nil,TMP_3._p=null;var result=[],proc=function(){var value,obj=__slice.call(arguments);return(value=block.apply(null,obj))===__breaker?__breaker.$v:(result.push(value),void 0)};return this.$each._p=proc,this.$each(),result},def.$reduce=TMP_4=function(object){var block;block=TMP_4._p||nil,TMP_4._p=null;var result=void 0==object?0:object,proc=function(){var value,obj=__slice.call(arguments);return(value=block.apply(null,[result].concat(obj)))===__breaker?(result=__breaker.$v,__breaker.$v=nil,__breaker):(result=value,void 0)};return this.$each._p=proc,this.$each(),result},def.$count=TMP_5=function(object){var _a,block;block=TMP_5._p||nil,TMP_5._p=null;var result=0;null!=object?block=function(obj){return((_a=obj)["$=="]||$mm("==")).call(_a,object)}:block===nil&&(block=function(){return!0});var proc=function(obj){var value;return(value=block(obj))===__breaker?__breaker.$v:(value!==!1&&value!==nil&&result++,void 0)};return this.$each._p=proc,this.$each(),result},def.$detect=TMP_6=function(ifnone){var _a,block;block=TMP_6._p||nil,TMP_6._p=null;var result=nil;return this.$each._p=function(obj){var value;return(value=block(obj))===__breaker?__breaker.$v:value!==!1&&value!==nil?(result=obj,__breaker.$v=nil,__breaker):void 0},this.$each(),result!==nil?result:"function"==typeof ifnone?((_a=ifnone).$call||$mm("call")).call(_a):null==ifnone?nil:ifnone},def.$drop=function(number){var result=[],current=0;return this.$each._p=function(){current>number&&result.push(e),current++},this.$each(),result},def.$drop_while=TMP_7=function(){var block;block=TMP_7._p||nil,TMP_7._p=null;var result=[];return this.$each._p=function(obj){var value;return(value=block(obj))===__breaker?__breaker:value===!1||value===nil?(result.push(obj),value):__breaker},this.$each(),result},def.$each_slice=TMP_8=function(n){var block;block=TMP_8._p||nil,TMP_8._p=null;var all=[];return this.$each._p=function(obj){all.push(obj),all.length==n&&(block(all.slice(0)),all=[])},this.$each(),all.length>0&&block(all.slice(0)),nil},def.$each_with_index=TMP_9=function(){var block;block=TMP_9._p||nil,TMP_9._p=null;var index=0;return this.$each._p=function(obj){var value;return(value=block(obj,index))===__breaker?__breaker.$v:(index++,void 0)},this.$each(),nil},def.$each_with_object=TMP_10=function(object){var block;return block=TMP_10._p||nil,TMP_10._p=null,this.$each._p=function(obj){var value;return(value=block(obj,object))===__breaker?__breaker.$v:void 0},this.$each(),object},def.$entries=function(){var result=[];return this.$each._p=function(obj){result.push(obj)},this.$each(),result},def.$find=def.$detect,def.$find_all=TMP_11=function(){var block;block=TMP_11._p||nil,TMP_11._p=null;var result=[];return this.$each._p=function(obj){var value;return(value=block(obj))===__breaker?__breaker.$v:(value!==!1&&value!==nil&&result.push(obj),void 0)},this.$each(),result},def.$find_index=TMP_12=function(object){var _a,block;block=TMP_12._p||nil,TMP_12._p=null;var proc,result=nil,index=0;return proc=null!=object?function(obj){return((_a=obj)["$=="]||$mm("==")).call(_a,object)?(result=index,__breaker):(index+=1,void 0)}:function(obj){var value;return(value=block(obj))===__breaker?__breaker.$v:value!==!1&&value!==nil?(result=index,__breaker.$v=index,__breaker):(index+=1,void 0)},this.$each._p=proc,this.$each(),result},def.$first=function(number){var proc,result=[],current=0;return null==number?(result=nil,proc=function(obj){return result=obj,__breaker}):proc=function(obj){return current>=number?__breaker:(result.push(obj),current++,void 0)},this.$each._p=proc,this.$each(),result},def.$grep=TMP_13=function(pattern){var _a,_b,block;block=TMP_13._p||nil,TMP_13._p=null;var result=[];return this.$each._p=block!==nil?function(obj){var value=((_a=pattern)["$==="]||$mm("===")).call(_a,obj);if(value!==!1&&value!==nil){if((value=block(obj))===__breaker)return __breaker.$v;result.push(value)}}:function(obj){var value=((_b=pattern)["$==="]||$mm("===")).call(_b,obj);value!==!1&&value!==nil&&result.push(obj)},this.$each(),result},def.$group_by=TMP_14=function(){var TMP_15,_a,_b,_c,TMP_16,block,hash=nil;return block=TMP_14._p||nil,TMP_14._p=null,hash=(_a=(_b=(_c=__scope.Hash)==null?__opal.cm("Hash"):_c).$new||$mm("new"),_a._p=(TMP_15=function(h,k){var _a;return TMP_15._s||this,null==h&&(h=nil),null==k&&(k=nil),((_a=h)["$[]="]||$mm("[]=")).call(_a,k,[])},TMP_15._s=this,TMP_15),_a).call(_b),(_a=(_c=this).$each||$mm("each"),_a._p=(TMP_16=function(el){var _a,_b,_c;return TMP_16._s||this,null==el&&(el=nil),((_a=((_b=hash)["$[]"]||$mm("[]")).call(_b,((_c=block).$call||$mm("call")).call(_c,el)))["$<<"]||$mm("<<")).call(_a,el)},TMP_16._s=this,TMP_16),_a).call(_c),hash},def.$map=def.$collect,def.$select=def.$find_all,def.$take=def.$first,def.$to_a=def.$entries,def.$inject=def.$reduce,Enumerable._donate(["$all?","$any?","$collect","$reduce","$count","$detect","$drop","$drop_while","$each_slice","$each_with_index","$each_with_object","$entries","$find","$find_all","$find_index","$first","$grep","$group_by","$map","$select","$take","$to_a","$inject"])}(self)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__slice=(__opal.breaker,__opal.slice),__klass=__opal.klass;return function(__base,__super){function Enumerator(){}Enumerator=__klass(__base,__super,"Enumerator",Enumerator);var _a,_b,TMP_1,def=Enumerator.prototype,__scope=Enumerator._scope;return def.object=def.method=def.args=def.cache=nil,((_a=Enumerator).$include||$mm("include")).call(_a,(_b=__scope.Enumerable)==null?__opal.cm("Enumerable"):_b),def.$initialize=function(obj,method,args){return null==method&&(method="each"),args=__slice.call(arguments,2),this.object=obj,this.method=method,this.args=args},def.$each=TMP_1=function(){var _a,TMP_2,_b,_c,block;return block=TMP_1._p||nil,TMP_1._p=null,block===nil?((_a=this).$enum_for||$mm("enum_for")).call(_a,"each"):(_b=(_c=this.object).$__send__||$mm("__send__"),_b._p=(TMP_2=function(e){var _a;return TMP_2._s||this,null==e&&(e=nil),((_a=block).$call||$mm("call")).call(_a,e)},TMP_2._s=this,TMP_2),_b).apply(_c,[this.method].concat(this.args))},def.$next=function(){var _a,_b,_c,_d;return _a=this.cache,_a!==!1&&_a!==nil?_a:this.cache=((_b=this).$to_a||$mm("to_a")).call(_b),(_a=((_c=this.cache)["$empty?"]||$mm("empty?")).call(_c))!==!1&&_a!==nil&&((_a=this).$raise||$mm("raise")).call(_a,(_d=__scope.StopIteration)==null?__opal.cm("StopIteration"):_d,"end of enumeration"),((_d=this.cache).$shift||$mm("shift")).call(_d)},def.$rewind=function(){return this.cache=nil,this},nil}(self,null)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__slice=__opal.slice,__klass=__opal.klass;return function(__base,__super){function Array(){}Array=__klass(__base,__super,"Array",Array);var _a,_b,TMP_1,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_9,TMP_10,TMP_11,TMP_12,TMP_13,TMP_14,TMP_15,TMP_16,TMP_17,TMP_18,TMP_19,TMP_20,TMP_21,def=Array.prototype,__scope=Array._scope;return((_a=Array).$include||$mm("include")).call(_a,(_b=__scope.Enumerable)==null?__opal.cm("Enumerable"):_b),def._isArray=!0,Array._defs("$[]",function(objects){return objects=__slice.call(arguments,0)}),Array._defs("$new",TMP_1=function(size,obj){var block;block=TMP_1._p||nil,TMP_1._p=null,null==obj&&(obj=nil);var arr=[];if(size&&size._isArray)for(var i=0;i<size.length;i++)arr[i]=size[i];else if(block===nil)for(var i=0;size>i;i++)arr[i]=obj;else for(var i=0;size>i;i++)arr[i]=block(i);return arr}),Array._defs("$try_convert",function(obj){return obj._isArray?obj:nil}),def["$&"]=function(other){for(var result=[],seen={},i=0,length=this.length;length>i;i++){var item=this[i];if(!seen[item])for(var j=0,length2=other.length;length2>j;j++){var item2=other[j];item!==item2||seen[item]||(seen[item]=!0,result.push(item))}}return result},def["$*"]=function(other){if("string"==typeof other)return this.join(other);for(var result=[],i=0;other>i;i++)result=result.concat(this);return result},def["$+"]=function(other){return this.concat(other)},def["$-"]=function(other){var TMP_2,_a,_b;return(_a=(_b=this).$reject||$mm("reject"),_a._p=(TMP_2=function(i){var _a;return TMP_2._s||this,null==i&&(i=nil),((_a=other)["$include?"]||$mm("include?")).call(_a,i)},TMP_2._s=this,TMP_2),_a).call(_b)},def["$<<"]=function(object){return this.push(object),this},def["$<=>"]=function(other){var _a,_b,_c;if(((_a=this).$hash||$mm("hash")).call(_a)===((_b=other).$hash||$mm("hash")).call(_b))return 0;if(this.length!=other.length)return this.length>other.length?1:-1;for(var tmp,i=0,length=this.length;length>i;i++)if((tmp=((_c=this[i])["$<=>"]||$mm("<=>")).call(_c,other[i]))!==0)return tmp;return 0},def["$=="]=function(other){var _a;if(!other||this.length!==other.length)return!1;for(var i=0,length=this.length;length>i;i++)if(!((_a=this[i])["$=="]||$mm("==")).call(_a,other[i]))return!1;return!0},def["$[]"]=function(index,length){var _a,size=this.length;if("number"!=typeof index){if(index._isRange){var exclude=index.exclude;return length=index.end,index=index.begin,index>size?nil:(0>length&&(length+=size),exclude||(length+=1),this.slice(index,length))}((_a=this).$raise||$mm("raise")).call(_a,"bad arg for Array#[]")}return 0>index&&(index+=size),void 0!==length?0>length||index>size||0>index?nil:this.slice(index,index+length):index>=size||0>index?nil:this[index]},def["$[]="]=function(index,value){var size=this.length;return 0>index&&(index+=size),this[index]=value},def.$assoc=function(object){for(var _a,item,i=0,length=this.length;length>i;i++)if(item=this[i],item.length&&((_a=item[0])["$=="]||$mm("==")).call(_a,object))return item;return nil},def.$at=function(index){return 0>index&&(index+=this.length),0>index||index>=this.length?nil:this[index]},def.$clear=function(){return this.splice(0,this.length),this},def.$clone=function(){return this.slice()},def.$collect=TMP_3=function(){var block;block=TMP_3._p||nil,TMP_3._p=null;for(var value,result=[],i=0,length=this.length;length>i;i++){if((value=block(this[i]))===__breaker)return __breaker.$v;result.push(value)}return result},def["$collect!"]=TMP_4=function(){var block;block=TMP_4._p||nil,TMP_4._p=null;for(var val,i=0,length=this.length;length>i;i++){if((val=block(this[i]))===__breaker)return __breaker.$v;this[i]=val}return this},def.$compact=function(){for(var item,result=[],i=0,length=this.length;length>i;i++)(item=this[i])!==nil&&result.push(item);return result},def["$compact!"]=function(){for(var original=this.length,i=0,length=this.length;length>i;i++)this[i]===nil&&(this.splice(i,1),length--,i--);return this.length===original?nil:this},def.$concat=function(other){for(var i=0,length=other.length;length>i;i++)this.push(other[i]);return this},def.$count=function(object){var _a;if(null==object)return this.length;for(var result=0,i=0,length=this.length;length>i;i++)((_a=this[i])["$=="]||$mm("==")).call(_a,object)&&result++;return result},def.$delete=function(object){for(var _a,original=this.length,i=0,length=original;length>i;i++)((_a=this[i])["$=="]||$mm("==")).call(_a,object)&&(this.splice(i,1),length--,i--);return this.length===original?nil:object},def.$delete_at=function(index){if(0>index&&(index+=this.length),0>index||index>=this.length)return nil;var result=this[index];return this.splice(index,1),result},def.$delete_if=TMP_5=function(){var block;block=TMP_5._p||nil,TMP_5._p=null;for(var value,i=0,length=this.length;length>i;i++){if((value=block(this[i]))===__breaker)return __breaker.$v;value!==!1&&value!==nil&&(this.splice(i,1),length--,i--)}return this},def.$drop=function(number){return this.slice(number)},def.$dup=def.$clone,def.$each=TMP_6=function(){var _a,block;if(block=TMP_6._p||nil,TMP_6._p=null,block===nil)return((_a=this).$enum_for||$mm("enum_for")).call(_a,"each");for(var i=0,length=this.length;length>i;i++)if(block.call(null,this[i])===__breaker)return __breaker.$v;return this},def.$each_index=TMP_7=function(){var block;block=TMP_7._p||nil,TMP_7._p=null;for(var i=0,length=this.length;length>i;i++)if(block.call(null,i)===__breaker)return __breaker.$v;return this},def["$empty?"]=function(){return!this.length},def.$fetch=TMP_8=function(index,defaults){var _a,_b,block;block=TMP_8._p||nil,TMP_8._p=null;var original=index;return 0>index&&(index+=this.length),index>=0&&index<this.length?this[index]:null!=defaults?defaults:block!==nil?block(original):(((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.IndexError)==null?__opal.cm("IndexError"):_b,"Array#fetch"),void 0)},def.$fill=TMP_9=function(obj){var block;if(block=TMP_9._p||nil,TMP_9._p=null,block!==nil)for(var i=0,length=this.length;length>i;i++)this[i]=block(i);else for(var i=0,length=this.length;length>i;i++)this[i]=obj;return this},def.$first=function(count){return null!=count?this.slice(0,count):this.length===0?nil:this[0]},def.$flatten=function(level){for(var _a,_b,item,result=[],i=0,length=this.length;length>i;i++)item=this[i],item._isArray?null==level?result=result.concat(((_a=item).$flatten||$mm("flatten")).call(_a)):0===level?result.push(item):result=result.concat(((_b=item).$flatten||$mm("flatten")).call(_b,level-1)):result.push(item);return result},def["$flatten!"]=function(level){var _a,_b,size=this.length;return((_a=this).$replace||$mm("replace")).call(_a,((_b=this).$flatten||$mm("flatten")).call(_b,level)),size===this.length?nil:this},def.$hash=function(){return this._id||(this._id=Opal.uid())},def["$include?"]=function(member){for(var _a,i=0,length=this.length;length>i;i++)if(((_a=this[i])["$=="]||$mm("==")).call(_a,member))return!0;return!1},def.$index=TMP_10=function(object){var _a,block;if(block=TMP_10._p||nil,TMP_10._p=null,null!=object){for(var i=0,length=this.length;length>i;i++)if(((_a=this[i])["$=="]||$mm("==")).call(_a,object))return i}else if(block!==nil)for(var value,i=0,length=this.length;length>i;i++){if((value=block(this[i]))===__breaker)return __breaker.$v;if(value!==!1&&value!==nil)return i}return nil},def.$insert=function(index,objects){var _a,_b;if(objects=__slice.call(arguments,1),objects.length>0){if(0>index&&(index+=this.length+1,0>index&&((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.IndexError)==null?__opal.cm("IndexError"):_b,""+index+" is out of bounds")),index>this.length)for(var i=this.length;index>i;i++)this.push(nil);this.splice.apply(this,[index,0].concat(objects))}return this},def.$inspect=function(){var _a,_b,_c,_d,i,inspect,el,el_insp,length,object_id;for(inspect=[],object_id=((_a=this).$object_id||$mm("object_id")).call(_a),length=this.length,i=0;length>i;i++)el=((_b=this)["$[]"]||$mm("[]")).call(_b,i),el_insp=((_c=el).$object_id||$mm("object_id")).call(_c)===object_id?"[...]":((_d=el).$inspect||$mm("inspect")).call(_d),inspect.push(el_insp);return"["+inspect.join(", ")+"]"},def.$join=function(sep){var _a;null==sep&&(sep="");for(var result=[],i=0,length=this.length;length>i;i++)result.push(((_a=this[i]).$to_s||$mm("to_s")).call(_a));return result.join(sep)},def.$keep_if=TMP_11=function(){var block;block=TMP_11._p||nil,TMP_11._p=null;for(var value,i=0,length=this.length;length>i;i++){if((value=block(this[i]))===__breaker)return __breaker.$v;(value===!1||value===nil)&&(this.splice(i,1),length--,i--)}return this},def.$last=function(count){var _a,_b,_c,_d,length=this.length;return(count===nil||"string"==typeof count)&&((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.TypeError)==null?__opal.cm("TypeError"):_b,"no implicit conversion to integer"),"object"==typeof count&&(typeof count.$to_int=="function"?count=count.$to_int():((_b=this).$raise||$mm("raise")).call(_b,(_c=__scope.TypeError)==null?__opal.cm("TypeError"):_c,"no implicit conversion to integer")),null==count?0===length?nil:this[length-1]:(0>count&&((_c=this).$raise||$mm("raise")).call(_c,(_d=__scope.ArgumentError)==null?__opal.cm("ArgumentError"):_d,"negative count given"),count>length&&(count=length),this.slice(length-count,length))},def.$length=function(){return this.length},def.$map=def.$collect,def["$map!"]=def["$collect!"],def.$pop=function(count){var _a,length=this.length;return null==count?0===length?nil:this.pop():(0>count&&((_a=this).$raise||$mm("raise")).call(_a,"negative count given"),count>length?this.splice(0,this.length):this.splice(length-count,length))},def.$push=function(objects){objects=__slice.call(arguments,0);for(var i=0,length=objects.length;length>i;i++)this.push(objects[i]);return this},def.$rassoc=function(object){for(var _a,item,i=0,length=this.length;length>i;i++)if(item=this[i],item.length&&item[1]!==void 0&&((_a=item[1])["$=="]||$mm("==")).call(_a,object))return item;return nil},def.$reject=TMP_12=function(){var block;block=TMP_12._p||nil,TMP_12._p=null;for(var value,result=[],i=0,length=this.length;length>i;i++){if((value=block(this[i]))===__breaker)return __breaker.$v;(value===!1||value===nil)&&result.push(this[i])}return result},def["$reject!"]=TMP_13=function(){var _a,_b,_c,block;block=TMP_13._p||nil,TMP_13._p=null;var original=this.length;return(_b=(_c=this).$delete_if||$mm("delete_if"),_b._p=((_a=block).$to_proc||$mm("to_proc")).call(_a),_b).call(_c),this.length===original?nil:this},def.$replace=function(other){return this.splice(0,this.length),this.push.apply(this,other),this},def.$reverse=function(){return this.slice(0).reverse()},def["$reverse!"]=def.reverse,def.$reverse_each=TMP_14=function(){var _a,_b,_c,_d,block;return block=TMP_14._p||nil,TMP_14._p=null,(_b=(_c=((_d=this).$reverse||$mm("reverse")).call(_d)).$each||$mm("each"),_b._p=((_a=block).$to_proc||$mm("to_proc")).call(_a),_b).call(_c),this},def.$rindex=TMP_15=function(object){var _a,block;if(block=TMP_15._p||nil,TMP_15._p=null,block!==nil)for(var value,i=this.length-1;i>=0;i--){if((value=block(this[i]))===__breaker)return __breaker.$v;if(value!==!1&&value!==nil)return i}else for(var i=this.length-1;i>=0;i--)if(((_a=this[i])["$=="]||$mm("==")).call(_a,object))return i;return nil},def.$select=TMP_16=function(){var block;block=TMP_16._p||nil,TMP_16._p=null;for(var item,value,result=[],i=0,length=this.length;length>i;i++){if(item=this[i],(value=block(item))===__breaker)return __breaker.$v;value!==!1&&value!==nil&&result.push(item)}return result},def["$select!"]=TMP_17=function(){var _a,_b,_c,block;block=TMP_17._p||nil,TMP_17._p=null;var original=this.length;return(_b=(_c=this).$keep_if||$mm("keep_if"),_b._p=((_a=block).$to_proc||$mm("to_proc")).call(_a),_b).call(_c),this.length===original?nil:this},def.$shift=function(count){return this.length===0?nil:null==count?this.shift():this.splice(0,count)},def.$size=def.$length,def.$shuffle=function(){for(var i=this.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),tmp=this[i];this[i]=this[j],this[j]=tmp}return this},def.$slice=def["$[]"],def["$slice!"]=function(index,length){return 0>index&&(index+=this.length),null!=length?this.splice(index,length):0>index||index>=this.length?nil:this.splice(index,1)[0]},def.$sort=TMP_18=function(){var block;block=TMP_18._p||nil,TMP_18._p=null;var copy=this.slice();return block!==nil?copy.sort(block):copy.sort()},def["$sort!"]=TMP_19=function(){var block;return block=TMP_19._p||nil,TMP_19._p=null,block!==nil?this.sort(block):this.sort()},def.$take=function(count){return this.slice(0,count)},def.$take_while=TMP_20=function(){var block;block=TMP_20._p||nil,TMP_20._p=null;for(var item,value,result=[],i=0,length=this.length;length>i;i++){if(item=this[i],(value=block(item))===__breaker)return __breaker.$v;if(value===!1||value===nil)return result;result.push(item)}return result},def.$to_a=function(){return this},def.$to_ary=def.$to_a,def.$to_json=function(){for(var _a,result=[],i=0,length=this.length;length>i;i++)result.push(((_a=this[i]).$to_json||$mm("to_json")).call(_a));return"["+result.join(", ")+"]"},def.$to_native=function(){for(var _a,obj,result=[],i=0,len=this.length;len>i;i++)obj=this[i],obj.$to_native?result.push(((_a=obj).$to_native||$mm("to_native")).call(_a)):result.push(obj);return result},def.$to_s=def.$inspect,def.$uniq=function(){for(var item,hash,result=[],seen={},i=0,length=this.length;length>i;i++)item=this[i],hash=item,seen[hash]||(seen[hash]=!0,result.push(item));return result},def["$uniq!"]=function(){for(var item,hash,original=this.length,seen={},i=0,length=original;length>i;i++)item=this[i],hash=item,seen[hash]?(this.splice(i,1),length--,i--):seen[hash]=!0;return this.length===original?nil:this},def.$unshift=function(objects){objects=__slice.call(arguments,0);for(var i=objects.length-1;i>=0;i--)this.unshift(objects[i]);return this},def.$zip=TMP_21=function(others){var block;block=TMP_21._p||nil,TMP_21._p=null,others=__slice.call(arguments,0);for(var part,o,result=[],size=this.length,i=0;size>i;i++){part=[this[i]];for(var j=0,jj=others.length;jj>j;j++)o=others[j][i],null==o&&(o=nil),part[j+1]=o;result[i]=part}if(block!==nil){for(var i=0;size>i;i++)block(result[i]);return nil}return result},nil}(self,Array)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__slice=__opal.slice,__klass=__opal.klass;return function(__base,__super){function Hash(){}Hash=__klass(__base,__super,"Hash",Hash);var _a,_b,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_9,TMP_10,TMP_11,TMP_12,def=Hash.prototype,__scope=Hash._scope;def.proc=def.none=nil,((_a=Hash).$include||$mm("include")).call(_a,(_b=__scope.Enumerable)==null?__opal.cm("Enumerable"):_b),__hash=Opal.hash=function(){var hash=new Hash,args=__slice.call(arguments),keys=[],assocs={};hash.map=assocs,hash.keys=keys;for(var key,i=0,length=args.length;length>i;i++){var key=args[i],obj=args[++i];assocs[key]==null&&keys.push(key),assocs[key]=obj}return hash},__hash2=Opal.hash2=function(keys,map){var hash=new Hash;return hash.keys=keys,hash.map=map,hash};var __hasOwn={}.hasOwnProperty;return Hash._defs("$[]",function(objs){return objs=__slice.call(arguments,0),__hash.apply(null,objs)}),Hash._defs("$allocate",function(){return __hash()}),Hash._defs("$from_native",function(obj){var hash=__hash(),map=hash.map,keys=hash.keys;for(var key in obj)keys.push(key),map[key]=obj[key];return hash}),Hash._defs("$new",TMP_1=function(defaults){var block;block=TMP_1._p||nil,TMP_1._p=null;var hash=__hash();return null!=defaults?hash.none=defaults:block!==nil&&(hash.proc=block),hash}),def["$=="]=function(other){var _a,_b;if(this===other)return!0;if(!other.map||!other.keys)return!1;if(this.keys.length!==other.keys.length)return!1;for(var map=this.map,map2=other.map,i=0,length=this.keys.length;length>i;i++){var key=this.keys[i],obj=map[key],obj2=map2[key];if(_a=((_b=obj)["$=="]||$mm("==")).call(_b,obj2),_a===nil||_a===!1)return!1}return!0},def["$[]"]=function(key){var _a,bucket=this.map[key];if(null!=bucket)return bucket;var proc=this.proc;return proc!==nil?((_a=proc).$call||$mm("call")).call(_a,this,key):this.none},def["$[]="]=function(key,value){var map=this.map;return __hasOwn.call(map,key)||this.keys.push(key),map[key]=value,value},def.$assoc=function(object){for(var _a,key,keys=this.keys,i=0,length=keys.length;length>i;i++)if(key=keys[i],((_a=key)["$=="]||$mm("==")).call(_a,object))return[key,this.map[key]];return nil},def.$clear=function(){return this.map={},this.keys=[],this},def.$clone=function(){for(var result=__hash(),map=this.map,map2=result.map,keys2=result.keys,i=0,length=this.keys.length;length>i;i++)keys2.push(this.keys[i]),map2[this.keys[i]]=map[this.keys[i]];return result},def.$default=function(){return this.none},def["$default="]=function(object){return this.none=object},def.$default_proc=function(){return this.proc},def["$default_proc="]=function(proc){return this.proc=proc},def.$delete=function(key){var map=this.map,result=map[key];return null!=result?(delete map[key],this.keys.$delete(key),result):nil},def.$delete_if=TMP_2=function(){var block;block=TMP_2._p||nil,TMP_2._p=null;for(var value,map=this.map,keys=this.keys,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];if((value=block(key,obj))===__breaker)return __breaker.$v;value!==!1&&value!==nil&&(keys.splice(i,1),delete map[key],length--,i--)}return this},def.$dup=def.$clone,def.$each=TMP_3=function(){var block;block=TMP_3._p||nil,TMP_3._p=null;for(var map=this.map,keys=this.keys,i=0,length=keys.length;length>i;i++){var key=keys[i];if(block(key,map[key])===__breaker)return __breaker.$v}return this},def.$each_key=TMP_4=function(){var block;block=TMP_4._p||nil,TMP_4._p=null;for(var keys=this.keys,i=0,length=keys.length;length>i;i++){var key=keys[i];if(block(key)===__breaker)return __breaker.$v}return this},def.$each_pair=def.$each,def.$each_value=TMP_5=function(){var block;block=TMP_5._p||nil,TMP_5._p=null;for(var map=this.map,keys=this.keys,i=0,length=keys.length;length>i;i++)if(block(map[keys[i]])===__breaker)return __breaker.$v;return this},def["$empty?"]=function(){return this.keys.length===0},def["$eql?"]=def["$=="],def.$fetch=TMP_6=function(key,defaults){var _a,_b,block;block=TMP_6._p||nil,TMP_6._p=null;var value=this.map[key];if(null!=value)return value;if(block!==nil){var value;return(value=block(key))===__breaker?__breaker.$v:value}return null!=defaults?defaults:(((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.KeyError)==null?__opal.cm("KeyError"):_b,"key not found"),void 0)},def.$flatten=function(level){for(var _a,map=this.map,keys=this.keys,result=[],i=0,length=keys.length;length>i;i++){var key=keys[i],value=map[key];result.push(key),value._isArray?null==level||1===level?result.push(value):result=result.concat(((_a=value).$flatten||$mm("flatten")).call(_a,level-1)):result.push(value)}return result},def["$has_key?"]=function(key){return this.map[key]!=null},def["$has_value?"]=function(value){var _a;for(var assoc in this.map)if(((_a=this.map[assoc])["$=="]||$mm("==")).call(_a,value))return!0;return!1},def.$hash=function(){return this._id},def["$include?"]=def["$has_key?"],def.$index=function(object){for(var _a,map=this.map,keys=this.keys,i=0,length=keys.length;length>i;i++){var key=keys[i];if(((_a=object)["$=="]||$mm("==")).call(_a,map[key]))return key}return nil},def.$indexes=function(keys){keys=__slice.call(arguments,0);for(var val,result=[],map=this.map,i=0,length=keys.length;length>i;i++){var key=keys[i],val=map[key];null!=val?result.push(val):result.push(this.none)}return result},def.$indices=def.$indexes,def.$inspect=function(){for(var _a,_b,inspect=[],keys=this.keys,map=this.map,i=0,length=keys.length;length>i;i++){var key=keys[i];inspect.push(((_a=key).$inspect||$mm("inspect")).call(_a)+"=>"+((_b=map[key]).$inspect||$mm("inspect")).call(_b))}return"{"+inspect.join(", ")+"}"},def.$invert=function(){for(var result=__hash(),keys=this.keys,map=this.map,keys2=result.keys,map2=result.map,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];keys2.push(obj),map2[obj]=key}return result},def.$keep_if=TMP_7=function(){var block;block=TMP_7._p||nil,TMP_7._p=null;for(var value,map=this.map,keys=this.keys,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];if((value=block(key,obj))===__breaker)return __breaker.$v;(value===!1||value===nil)&&(keys.splice(i,1),delete map[key],length--,i--)}return this},def.$key=def.$index,def["$key?"]=def["$has_key?"],def.$keys=function(){return this.keys.slice(0)},def.$length=function(){return this.keys.length},def["$member?"]=def["$has_key?"],def.$merge=TMP_8=function(other){var block;block=TMP_8._p||nil,TMP_8._p=null;for(var keys=this.keys,map=this.map,result=__hash(),keys2=result.keys,map2=result.map,i=0,length=keys.length;length>i;i++){var key=keys[i];keys2.push(key),map2[key]=map[key]}var keys=other.keys,map=other.map;if(block===nil)for(var i=0,length=keys.length;length>i;i++){var key=keys[i];map2[key]==null&&keys2.push(key),map2[key]=map[key]}else for(var i=0,length=keys.length;length>i;i++){var key=keys[i];map2[key]==null?(keys2.push(key),map2[key]=map[key]):map2[key]=block(key,map2[key],map[key])}return result},def["$merge!"]=TMP_9=function(other){var block;block=TMP_9._p||nil,TMP_9._p=null;var keys=this.keys,map=this.map,keys2=other.keys,map2=other.map;if(block===nil)for(var i=0,length=keys2.length;length>i;i++){var key=keys2[i];map[key]==null&&keys.push(key),map[key]=map2[key]}else for(var i=0,length=keys2.length;length>i;i++){var key=keys2[i];map[key]==null?(keys.push(key),map[key]=map2[key]):map[key]=block(key,map[key],map2[key])}return this},def.$rassoc=function(object){for(var _a,keys=this.keys,map=this.map,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];if(((_a=obj)["$=="]||$mm("==")).call(_a,object))return[key,obj]}return nil},def.$reject=TMP_10=function(){var block;block=TMP_10._p||nil,TMP_10._p=null;for(var keys=this.keys,map=this.map,result=__hash(),map2=result.map,keys2=result.keys,i=0,length=keys.length;length>i;i++){var value,key=keys[i],obj=map[key];if((value=block(key,obj))===__breaker)return __breaker.$v;(value===!1||value===nil)&&(keys2.push(key),map2[key]=obj)}return result},def.$replace=function(other){for(var map=this.map={},keys=this.keys=[],i=0,length=other.keys.length;length>i;i++){var key=other.keys[i];keys.push(key),map[key]=other.map[key]}return this},def.$select=TMP_11=function(){var block;block=TMP_11._p||nil,TMP_11._p=null;for(var keys=this.keys,map=this.map,result=__hash(),map2=result.map,keys2=result.keys,i=0,length=keys.length;length>i;i++){var value,key=keys[i],obj=map[key];if((value=block(key,obj))===__breaker)return __breaker.$v;value!==!1&&value!==nil&&(keys2.push(key),map2[key]=obj)}return result},def["$select!"]=TMP_12=function(){var block;block=TMP_12._p||nil,TMP_12._p=null;for(var value,map=this.map,keys=this.keys,result=nil,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];if((value=block(key,obj))===__breaker)return __breaker.$v;(value===!1||value===nil)&&(keys.splice(i,1),delete map[key],length--,i--,result=this)}return result},def.$shift=function(){var keys=this.keys,map=this.map;if(keys.length){var key=keys[0],obj=map[key];return delete map[key],keys.splice(0,1),[key,obj]}return nil},def.$size=def.$length,def.$to_a=function(){for(var keys=this.keys,map=this.map,result=[],i=0,length=keys.length;length>i;i++){var key=keys[i];result.push([key,map[key]])}return result},def.$to_hash=function(){return this},def.$to_json=function(){for(var _a,_b,inspect=[],keys=this.keys,map=this.map,i=0,length=keys.length;length>i;i++){var key=keys[i];inspect.push(((_a=key).$to_json||$mm("to_json")).call(_a)+": "+((_b=map[key]).$to_json||$mm("to_json")).call(_b))}return"{"+inspect.join(", ")+"}"},def.$to_native=function(){for(var _a,result={},keys=this.keys,map=this.map,i=0,length=keys.length;length>i;i++){var key=keys[i],obj=map[key];result[key]=obj.$to_native?((_a=obj).$to_native||$mm("to_native")).call(_a):obj}return result},def.$to_s=def.$inspect,def.$update=def["$merge!"],def["$value?"]=function(value){var _a,map=this.map;for(var assoc in map){var v=map[assoc];if(((_a=v)["$=="]||$mm("==")).call(_a,value))return!0}return!1},def.$values_at=def.$indexes,def.$values=function(){var map=this.map,result=[];for(var key in map)result.push(map[key]);return result},nil}(self,null)}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__slice=__opal.slice,__klass=__opal.klass,__gvars=__opal.gvars;return function(__base,__super){function String(){}String=__klass(__base,__super,"String",String);var _a,_b,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,def=String.prototype,__scope=String._scope;return((_a=String).$include||$mm("include")).call(_a,(_b=__scope.Comparable)==null?__opal.cm("Comparable"):_b),def._isString=!0,String._defs("$try_convert",function(what){var _a;
try{return((_a=what).$to_str||$mm("to_str")).call(_a)}catch($err){}}),String._defs("$new",function(str){return null==str&&(str=""),new String(str)}),def["$%"]=function(data){var _a,_b,_c;return(_a=((_b=data)["$is_a?"]||$mm("is_a?")).call(_b,(_c=__scope.Array)==null?__opal.cm("Array"):_c))!==!1&&_a!==nil?((_a=this).$format||$mm("format")).apply(_a,[this].concat(data)):((_c=this).$format||$mm("format")).call(_c,this,data)},def["$*"]=function(count){if(1>count)return"";for(var result="",pattern=this.valueOf();count>0;)1&count&&(result+=pattern),count>>=1,pattern+=pattern;return result},def["$+"]=function(other){return this.toString()+other},def["$<=>"]=function(other){return"string"!=typeof other?nil:this>other?1:other>this?-1:0},def["$<"]=function(other){return other>this},def["$<="]=function(other){return other>=this},def["$>"]=function(other){return this>other},def["$>="]=function(other){return this>=other},def["$=="]=function(other){return other==String(this)},def["$==="]=def["$=="],def["$=~"]=function(other){var _a,_b;return"string"==typeof other&&((_a=this).$raise||$mm("raise")).call(_a,"string given"),((_b=other)["$=~"]||$mm("=~")).call(_b,this)},def["$[]"]=function(index,length){var size=this.length;if(index._isRange){var exclude=index.exclude,length=index.end,index=index.begin;return 0>index&&(index+=size),0>length&&(length+=size),exclude||(length+=1),index>size?nil:(length-=index,0>length&&(length=0),this.substr(index,length))}return 0>index&&(index+=this.length),null==length?index>=this.length||0>index?nil:this.substr(index,1):index>this.length||0>index?nil:this.substr(index,length)},def.$as_json=function(){return this},def.$capitalize=function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},def.$casecmp=function(other){if("string"!=typeof other)return other;var a=this.toLowerCase(),b=other.toLowerCase();return a>b?1:b>a?-1:0},def.$chars=TMP_1=function(){var __yield;__yield=TMP_1._p||nil,TMP_1._p=null;for(var i=0,length=this.length;length>i;i++)if(__yield.call(null,this.charAt(i))===__breaker)return __breaker.$v},def.$chomp=function(separator){return null==separator&&(separator=__gvars["/"]),"\n"===separator?this.replace(/(\n|\r|\r\n)$/,""):""===separator?this.replace(/(\n|\r\n)+$/,""):this.replace(new RegExp(separator+"$"),"")},def.$chop=function(){return this.substr(0,this.length-1)},def.$chr=function(){return this.charAt(0)},def.$count=function(str){return(this.length-this.replace(new RegExp(str,"g"),"").length)/str.length},def.$dasherize=function(){return this.replace(/[-\s]+/g,"-").replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},def.$demodulize=function(){var idx=this.lastIndexOf("::");return idx>-1?this.substr(idx+2):this},def.$downcase=def.toLowerCase,def.$each_char=def.$chars,def.$each_line=TMP_2=function(separator){var __yield;__yield=TMP_2._p||nil,TMP_2._p=null,null==separator&&(separator=__gvars["/"]);for(var splitted=this.split(separator),i=0,length=splitted.length;length>i;i++)if(__yield.call(null,splitted[i]+separator)===__breaker)return __breaker.$v},def["$empty?"]=function(){return this.length===0},def["$end_with?"]=function(suffixes){suffixes=__slice.call(arguments,0);for(var i=0,length=suffixes.length;length>i;i++){var suffix=suffixes[i];if(this.lastIndexOf(suffix)===this.length-suffix.length)return!0}return!1},def["$eql?"]=def["$=="],def["$equal?"]=function(val){return this.toString()===val.toString()},def.$getbyte=def.charCodeAt,def.$gsub=TMP_3=function(pattern,replace){var _a,_b,_c,block;block=TMP_3._p||nil,TMP_3._p=null,(_a=((_b=pattern)["$is_a?"]||$mm("is_a?")).call(_b,(_c=__scope.String)==null?__opal.cm("String"):_c))!==!1&&_a!==nil&&(pattern=new RegExp(""+((_a=(_c=__scope.Regexp)==null?__opal.cm("Regexp"):_c).$escape||$mm("escape")).call(_a,pattern)));var pattern=pattern.toString(),options=pattern.substr(pattern.lastIndexOf("/")+1)+"g",regexp=pattern.substr(1,pattern.lastIndexOf("/")-1);return this.$sub._p=block,this.$sub(new RegExp(regexp,options),replace)},def.$hash=def.toString,def.$hex=function(){var _a;return((_a=this).$to_i||$mm("to_i")).call(_a,16)},def["$include?"]=function(other){return this.indexOf(other)!==-1},def.$index=function(what,offset){var _a,_b,_c,_d,_e;if(!what._isString&&!what._isRegexp)throw new Error("type mismatch");var result=-1;return null!=offset?(0>offset&&(offset=this.length-offset),((_a=what)["$is_a?"]||$mm("is_a?")).call(_a,(_b=__scope.Regexp)==null?__opal.cm("Regexp"):_b)?(_b=((_c=what)["$=~"]||$mm("=~")).call(_c,this.substr(offset)),result=_b!==!1&&_b!==nil?_b:-1):result=this.substr(offset).indexOf(substr),-1!==result&&(result+=offset)):((_b=what)["$is_a?"]||$mm("is_a?")).call(_b,(_d=__scope.Regexp)==null?__opal.cm("Regexp"):_d)?(_d=((_e=what)["$=~"]||$mm("=~")).call(_e,this),result=_d!==!1&&_d!==nil?_d:-1):result=this.indexOf(substr),-1===result?nil:result},def.$inspect=function(){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return escapable.lastIndex=0,escapable.test(this)?'"'+this.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+this+'"'},def.$intern=function(){return this},def.$lines=def.$each_line,def.$length=function(){return this.length},def.$ljust=function(integer,padstr){var _a,_b;return null==padstr&&(padstr=" "),((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.NotImplementedError)==null?__opal.cm("NotImplementedError"):_b)},def.$lstrip=function(){return this.replace(/^\s*/,"")},def.$match=TMP_4=function(pattern,pos){var _a,_b,_c,_d,_e,_f,block;return block=TMP_4._p||nil,TMP_4._p=null,(_b=(_c=function(){return(_d=((_e=pattern)["$is_a?"]||$mm("is_a?")).call(_e,(_f=__scope.Regexp)==null?__opal.cm("Regexp"):_f))!==!1&&_d!==nil?pattern:new RegExp(""+((_d=(_f=__scope.Regexp)==null?__opal.cm("Regexp"):_f).$escape||$mm("escape")).call(_d,pattern))}.call(this)).$match||$mm("match"),_b._p=((_a=block).$to_proc||$mm("to_proc")).call(_a),_b).call(_c,this,pos)},def.$next=function(){if(this.length===0)return"";var initial=this.substr(0,this.length-1),last=String.fromCharCode(this.charCodeAt(this.length-1)+1);return initial+last},def.$ord=function(){return this.charCodeAt(0)},def.$partition=function(str){var result=this.split(str),splitter=result[0].length===this.length?"":str;return[result[0],splitter,result.slice(1).join(str.toString())]},def.$reverse=function(){return this.split("").reverse().join("")},def.$rstrip=function(){return this.replace(/\s*$/,"")},def.$size=def.$length,def.$slice=def["$[]"],def.$split=function(pattern,limit){var _a;return null==pattern&&(_a=__gvars[";"],pattern=_a!==!1&&_a!==nil?_a:" "),this.split(pattern,limit)},def["$start_with?"]=function(prefixes){prefixes=__slice.call(arguments,0);for(var i=0,length=prefixes.length;length>i;i++)if(this.indexOf(prefixes[i])===0)return!0;return!1},def.$strip=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")},def.$sub=TMP_5=function(pattern,replace){var _a,_b,_c,_d,_e,_f,_g,_h,block;return block=TMP_5._p||nil,TMP_5._p=null,"string"==typeof replace?this.replace(pattern,replace):block!==nil?this.replace(pattern,function(str){return block(str)}):void 0!==replace?((_a=replace)["$is_a?"]||$mm("is_a?")).call(_a,(_b=__scope.Hash)==null?__opal.cm("Hash"):_b)?this.replace(pattern,function(){var value=((_b=replace)["$[]"]||$mm("[]")).call(_b,((_c=this).$str||$mm("str")).call(_c));return null==value?nil:((_d=((_e=this).$value||$mm("value")).call(_e)).$to_s||$mm("to_s")).call(_d)}):(replace=((_f=(_g=__scope.String)==null?__opal.cm("String"):_g).$try_convert||$mm("try_convert")).call(_f,replace),null==replace&&((_g=this).$raise||$mm("raise")).call(_g,(_h=__scope.TypeError)==null?__opal.cm("TypeError"):_h,"can't convert "+((_h=replace).$class||$mm("class")).call(_h)+" into String"),this.replace(pattern,replace)):this.replace(pattern,replace.toString())},def.$succ=def.$next,def.$sum=function(n){null==n&&(n=16);for(var result=0,i=0,length=this.length;length>i;i++)result+=this.charCodeAt(i)%((1<<n)-1);return result},def.$swapcase=function(){var _a,_b,str=this.replace(/([a-z]+)|([A-Z]+)/g,function($0,$1){return $1?$0.toUpperCase():$0.toLowerCase()});return this._klass===String?str:((_a=((_b=this).$class||$mm("class")).call(_b)).$new||$mm("new")).call(_a,str)},def.$to_a=function(){return this.length===0?[]:[this]},def.$to_f=function(){var result=parseFloat(this);return isNaN(result)?0:result},def.$to_i=function(base){null==base&&(base=10);var result=parseInt(this,base);return isNaN(result)?0:result},def.$to_json=def.$inspect,def.$to_proc=function(){var name="$"+this;return function(arg){var meth=arg[name];return meth?meth.call(arg):arg.$method_missing(name)}},def.$to_s=def.toString,def.$to_str=def.$to_s,def.$to_sym=def.$intern,def.$underscore=function(){return this.replace(/[-\s]+/g,"_").replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},def.$upcase=def.toUpperCase}(self,String),__scope.Symbol=(_a=__scope.String)==null?__opal.cm("String"):_a}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__klass=(__opal.slice,__opal.klass);return function(__base,__super){function Numeric(){}Numeric=__klass(__base,__super,"Numeric",Numeric);var _a,_b,TMP_1,TMP_2,TMP_3,def=Numeric.prototype,__scope=Numeric._scope;return((_a=Numeric).$include||$mm("include")).call(_a,(_b=__scope.Comparable)==null?__opal.cm("Comparable"):_b),def._isNumber=!0,def["$+"]=function(other){return this+other},def["$-"]=function(other){return this-other},def["$*"]=function(other){return this*other},def["$/"]=function(other){return this/other},def["$%"]=function(other){return this%other},def["$&"]=function(other){return this&other},def["$|"]=function(other){return this|other},def["$^"]=function(other){return this^other},def["$<"]=function(other){return other>this},def["$<="]=function(other){return other>=this},def["$>"]=function(other){return this>other},def["$>="]=function(other){return this>=other},def["$<<"]=function(count){return this<<count},def["$>>"]=function(count){return this>>count},def["$+@"]=function(){return+this},def["$-@"]=function(){return-this},def["$~"]=function(){return~this},def["$**"]=function(other){return Math.pow(this,other)},def["$=="]=function(other){return this==other},def["$<=>"]=function(other){return"number"!=typeof other?nil:other>this?-1:this>other?1:0},def.$abs=function(){return Math.abs(this)},def.$as_json=function(){return this},def.$ceil=function(){return Math.ceil(this)},def.$chr=function(){return String.fromCharCode(this)},def.$downto=TMP_1=function(finish){var block;block=TMP_1._p||nil,TMP_1._p=null;for(var i=this;i>=finish;i--)if(block(i)===__breaker)return __breaker.$v;return this},def["$eql?"]=def["$=="],def["$even?"]=function(){return 0===this%2},def.$floor=function(){return Math.floor(this)},def.$hash=function(){return this.toString()},def["$integer?"]=function(){return 0===this%1},def.$magnitude=def.$abs,def.$modulo=def["$%"],def.$next=function(){return this+1},def["$nonzero?"]=function(){return 0===this?nil:this},def["$odd?"]=function(){return 0!==this%2},def.$ord=function(){return this},def.$pred=function(){return this-1},def.$succ=def.$next,def.$times=TMP_2=function(){var block;block=TMP_2._p||nil,TMP_2._p=null;for(var i=0;this>i;i++)if(block(i)===__breaker)return __breaker.$v;return this},def.$to_f=function(){return parseFloat(this)},def.$to_i=function(){return parseInt(this)},def.$to_json=function(){return this.toString()},def.$to_s=function(base){return null==base&&(base=10),this.toString()},def.$upto=TMP_3=function(finish){var _a,block;if(block=TMP_3._p||nil,TMP_3._p=null,block===nil)return((_a=this).$enum_for||$mm("enum_for")).call(_a,"upto",finish);for(var i=this;finish>=i;i++)if(block(i)===__breaker)return __breaker.$v;return this},def["$zero?"]=function(){return 0==this},nil}(self,Number),__scope.Fixnum=(_a=__scope.Numeric)==null?__opal.cm("Numeric"):_a}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,__breaker=(__opal.mm,__opal.breaker),__slice=__opal.slice,__klass=__opal.klass;return function(__base,__super){function Proc(){}Proc=__klass(__base,__super,"Proc",Proc);var TMP_1,def=Proc.prototype;return Proc._scope,def._isProc=!0,def.is_lambda=!0,Proc._defs("$new",TMP_1=function(){var block;return block=TMP_1._p||nil,TMP_1._p=null,block===nil&&no_block_given(),block.is_lambda=!1,block}),def.$call=function(args){args=__slice.call(arguments,0);var result=this.apply(null,args);return result===__breaker?__breaker.$v:result},def["$[]"]=def.$call,def.$to_proc=function(){return this},def["$lambda?"]=function(){return!!this.is_lambda},def.$arity=function(){return this.length-1},nil}(self,Function),function(__base,__super){function Method(){}return Method=__klass(__base,__super,"Method",Method),Method.prototype,Method._scope,nil}(self,(_a=__scope.Proc)==null?__opal.cm("Proc"):_a)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__breaker=__opal.breaker,__klass=(__opal.slice,__opal.klass);return function(__base,__super){function Range(){}Range=__klass(__base,__super,"Range",Range);var _a,_b,TMP_1,def=Range.prototype,__scope=Range._scope;return def.begin=def.end=nil,((_a=Range).$include||$mm("include")).call(_a,(_b=__scope.Enumerable)==null?__opal.cm("Enumerable"):_b),Range.prototype._isRange=!0,Opal.range=function(beg,end,exc){var range=new Range;return range.begin=beg,range.end=end,range.exclude=exc,range},def.$begin=function(){return this.begin},nil,def.$end=function(){return this.end},nil,def.$initialize=function(min,max,exclude){return null==exclude&&(exclude=!1),this.begin=min,this.end=max,this.exclude=exclude},def["$=="]=function(other){return other._isRange?this.exclude===other.exclude&&this.begin==other.begin&&this.end==other.end:!1},def["$==="]=function(obj){return obj>=this.begin&&(this.exclude?obj<this.end:obj<=this.end)},def["$cover?"]=function(value){var _a,_b,_c,_d,_e,_f;return(_a=((_b=this.begin)["$<="]||$mm("<=")).call(_b,value))?((_c=value)["$<="]||$mm("<=")).call(_c,function(){return(_d=((_e=this)["$exclude_end?"]||$mm("exclude_end?")).call(_e))!==!1&&_d!==nil?(_d=this.end,_f=1,"number"==typeof _d?_d-_f:_d["$-"](_f)):this.end}.call(this)):_a},def.$each=TMP_1=function(){var _a,_b,_c,_d,_e,_f,block,current=nil;for(block=TMP_1._p||nil,TMP_1._p=null,current=((_a=this).$min||$mm("min")).call(_a);_d=((_e=current)["$=="]||$mm("==")).call(_e,((_f=this).$max||$mm("max")).call(_f)),(_c=_d===nil||_d===!1)!=!1&&_c!==nil;){if(block.call(null,current)===__breaker)return __breaker.$v;current=((_c=current).$succ||$mm("succ")).call(_c)}return(_b=((_d=this)["$exclude_end?"]||$mm("exclude_end?")).call(_d))!==!1&&_b!==nil||block.call(null,current)!==__breaker?this:__breaker.$v},def["$eql?"]=function(other){var _a,_b,_c,_d,_e,_f,_g,_h;return(_a=((_b=(_c=__scope.Range)==null?__opal.cm("Range"):_c)["$==="]||$mm("===")).call(_b,other))===!1||_a===nil?!1:(_a=(_a=((_c=((_d=this)["$exclude_end?"]||$mm("exclude_end?")).call(_d))["$=="]||$mm("==")).call(_c,((_e=other)["$exclude_end?"]||$mm("exclude_end?")).call(_e)))?((_f=this.begin)["$eql?"]||$mm("eql?")).call(_f,((_g=other).$begin||$mm("begin")).call(_g)):_a,_a!==!1&&_a!==nil?((_a=this.end)["$eql?"]||$mm("eql?")).call(_a,((_h=other).$end||$mm("end")).call(_h)):_a)},def["$exclude_end?"]=function(){return this.exclude},def["$include?"]=function(){return obj>=this.begin&&obj<=this.end},def.$max=def.$end,def.$min=def.$begin,def["$member?"]=def["$include?"],def.$step=function(n){var _a,_b;return null==n&&(n=1),((_a=this).$raise||$mm("raise")).call(_a,(_b=__scope.NotImplementedError)==null?__opal.cm("NotImplementedError"):_b)},def.$to_s=function(){return this.begin+(this.exclude?"...":"..")+this.end},def.$inspect=def.$to_s}(self,null)}(Opal),function(__opal){var days_of_week=nil,short_days=nil,short_months=nil,long_months=nil,self=__opal.top,nil=__opal.nil,$mm=__opal.mm,__klass=(__opal.breaker,__opal.slice,__opal.klass);return days_of_week=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],short_days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],short_months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long_months=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],function(__base,__super){function Time(){}Time=__klass(__base,__super,"Time",Time);var _a,_b,def=Time.prototype,__scope=Time._scope;return((_a=Time).$include||$mm("include")).call(_a,(_b=__scope.Comparable)==null?__opal.cm("Comparable"):_b),Time._defs("$at",function(seconds,frac){return null==frac&&(frac=0),new Date(1e3*seconds+frac)}),Time._defs("$new",function(year,month,day,hour,minute,second,millisecond){switch(arguments.length){case 1:return new Date(year);case 2:return new Date(year,month-1);case 3:return new Date(year,month-1,day);case 4:return new Date(year,month-1,day,hour);case 5:return new Date(year,month-1,day,hour,minute);case 6:return new Date(year,month-1,day,hour,minute,second);case 7:return new Date(year,month-1,day,hour,minute,second,millisecond);default:return new Date}}),Time._defs("$now",function(){return new Date}),Time._defs("$parse",function(str){return Date.parse(str)}),def["$+"]=function(other){var _a,_b,_c,_d,_e;return((_a=(_b=__scope.Time)==null?__opal.cm("Time"):_b).$allocate||$mm("allocate")).call(_a,(_b=((_d=this).$to_f||$mm("to_f")).call(_d),_c=((_e=other).$to_f||$mm("to_f")).call(_e),"number"==typeof _b?_b+_c:_b["$+"](_c)))},def["$-"]=function(other){var _a,_b,_c,_d,_e;return((_a=(_b=__scope.Time)==null?__opal.cm("Time"):_b).$allocate||$mm("allocate")).call(_a,(_b=((_d=this).$to_f||$mm("to_f")).call(_d),_c=((_e=other).$to_f||$mm("to_f")).call(_e),"number"==typeof _b?_b-_c:_b["$-"](_c)))},def["$<=>"]=function(other){var _a,_b,_c;return((_a=((_b=this).$to_f||$mm("to_f")).call(_b))["$<=>"]||$mm("<=>")).call(_a,((_c=other).$to_f||$mm("to_f")).call(_c))},def.$day=def.getDate,def["$eql?"]=function(other){var _a,_b,_c;return _a=((_a=other)["$is_a?"]||$mm("is_a?")).call(_a,(_b=__scope.Time)==null?__opal.cm("Time"):_b),_a!==!1&&_a!==nil?((_b=((_c=this)["$<=>"]||$mm("<=>")).call(_c,other))["$zero?"]||$mm("zero?")).call(_b):_a},def["$friday?"]=function(){return this.getDay()===5},def.$hour=def.getHours,def.$inspect=def.toString,def.$mday=def.$day,def.$min=def.getMinutes,def.$mon=function(){return this.getMonth()+1},def["$monday?"]=function(){return this.getDay()===1},def.$month=def.$mon,def["$saturday?"]=function(){return this.getDay()===6},def.$sec=def.getSeconds,def.$strftime=function(format){null==format&&(format="");var d=this;return format.replace(/%(-?.)/g,function(full,m){switch(m){case"a":return short_days[d.getDay()];case"A":return days_of_week[d.getDay()];case"b":return short_months[d.getMonth()];case"B":return long_months[d.getMonth()];case"-d":return d.getDate();case"Y":return d.getFullYear();default:return m}})},def["$sunday?"]=function(){return this.getDay()===0},def["$thursday?"]=function(){return this.getDay()===4},def.$to_f=function(){return this.getTime()/1e3},def.$to_i=function(){return parseInt(this.getTime()/1e3)},def.$to_s=def.$inspect,def["$tuesday?"]=function(){return this.getDay()===2},def.$wday=def.getDay,def["$wednesday?"]=function(){return this.getDay()===3},def.$year=def.getFullYear}(self,Date)}(Opal),function(__opal){var self=__opal.top,nil=__opal.nil,__module=(__opal.mm,__opal.breaker,__opal.slice,__opal.module),__hash2=__opal.hash2,json_parse=JSON.parse,__hasOwn=Object.prototype.hasOwnProperty;return function(__base){function JSON(){}function to_opal(value){switch(typeof value){case"string":return value;case"number":return value;case"boolean":return!!value;case"null":return nil;case"object":if(!value)return nil;if(value._isArray){for(var arr=[],i=0,ii=value.length;ii>i;i++)arr.push(to_opal(value[i]));return arr}var v,hash=__hash2([],{}),map=hash.map,keys=hash.keys;for(var k in value)__hasOwn.call(value,k)&&(v=to_opal(value[k]),keys.push(k),map[k]=v);return hash}}JSON=__module(__base,"JSON",JSON),JSON.prototype,JSON._scope,JSON._defs("$parse",function(source){return to_opal(json_parse(source))}),JSON._defs("$from_object",function(js_object){return to_opal(js_object)})}(self)}(Opal),function(__opal){var _a,self=__opal.top,__scope=__opal,nil=__opal.nil,$mm=__opal.mm,__slice=(__opal.breaker,__opal.slice),__klass=__opal.klass;return function(__base,__super){function Native(){}Native=__klass(__base,__super,"Native",Native);var TMP_1,TMP_2,def=Native.prototype,__scope=Native._scope;return def["native"]=nil,Native._defs("$global",function(){var _a,_b,_c;return this.global==null&&(this.global=nil),_a=this.global,_a!==!1&&_a!==nil?_a:this.global=((_b=(_c=__scope.Native)==null?__opal.cm("Native"):_c).$new||$mm("new")).call(_b,Opal.global)}),Native._defs("$[]",function(key){var _a,_b;return((_a=((_b=this).$global||$mm("global")).call(_b))["$[]"]||$mm("[]")).call(_a,key)}),def.$initialize=function(native$){var _a,_b;return null==native$&&((_a=(_b=__scope.Kernel)==null?__opal.cm("Kernel"):_b).$raise||$mm("raise")).call(_a,"null or undefined passed to Native"),this["native"]=native$},def.$each=TMP_1=function(){var _a,_b,block;block=TMP_1._p||nil,TMP_1._p=null;var value,n=this["native"];for(var key in n)value=n[key],null==value?value=nil:"object"==typeof value&&(value._klass||(value=((_a=(_b=__scope.Native)==null?__opal.cm("Native"):_b).$new||$mm("new")).call(_a,value))),block(key,value)},def["$key?"]=function(name){return this["native"][name]!=null},def.$method_missing=TMP_2=function(symbol,args){var _a,_b,_c,block,native$=nil;block=TMP_2._p||nil,TMP_2._p=null,args=__slice.call(arguments,1),native$=this["native"];var prop=native$[symbol];return"function"==typeof prop?(prop=prop.apply(native$,args),"object"!=typeof prop&&"function"!=typeof prop||prop._klass?prop:((_a=(_b=__scope.Native)==null?__opal.cm("Native"):_b).$new||$mm("new")).call(_a,prop)):symbol.charAt(symbol.length-1)==="="?(prop=symbol.slice(0,symbol.length-1),native$[prop]=args[0]):null!=prop?"object"!=typeof prop||prop._klass?prop:((_b=(_c=__scope.Native)==null?__opal.cm("Native"):_c).$new||$mm("new")).call(_b,prop):nil},def["$[]"]=function(key){var value=this["native"][key];return null==value?nil:value},def["$=="]=function(other){return this["native"]===other.native},def.$to_a=function(){var _a,_b,result,n=this["native"];if(n.length){result=[];for(var i=0,len=n.length;len>i;i++)result.push(((_a=(_b=__scope.Native)==null?__opal.cm("Native"):_b).$new||$mm("new")).call(_a,n[i]))}else result=[n];return result},def.$to_native=function(){return this["native"]},nil}(self,(_a=__scope.BasicObject)==null?__opal.cm("BasicObject"):_a)}(Opal),function(__opal){var _a,_b,self=__opal.top,__scope=__opal,nil=__opal.nil,$mm=__opal.mm,__gvars=(self._klass.prototype,__opal.breaker,__opal.slice,__opal.gvars);return __gvars["~"]=nil,__gvars["/"]="\n",__gvars.stderr=__gvars.stdout=((_a=(_b=__scope.Object)==null?__opal.cm("Object"):_b).$new||$mm("new")).call(_a),__scope.RUBY_ENGINE="opal",__scope.RUBY_PLATFORM="opal",self.$to_s=function(){return"main"},self.$include=function(mod){var _a,_b;return((_a=(_b=__scope.Object)==null?__opal.cm("Object"):_b).$include||$mm("include")).call(_a,mod)}}(Opal);
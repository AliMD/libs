(function(){var e=tinymce.DOM,t=tinymce.dom.Event,i=tinymce.each,n=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(r){function s(e,i){return 9===i.keyCode?t.cancel(i):void 0}function o(r,s){function o(t){function n(e){return"BODY"===e.nodeName||"hidden"!=e.type&&!("none"==e.style.display)&&!("hidden"==e.style.visibility)&&n(e.parentNode)}function s(e){return e.attributes.tabIndex.specified||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName}function o(){return tinymce.isIE6||tinymce.isIE7}function h(e){return(!o()||s(e))&&"-1"!=e.getAttribute("tabindex")&&n(e)}if(c=e.select(":input:enabled,*[tabindex]:not(iframe)"),i(c,function(e,t){return e.id==r.id?(a=t,!1):void 0}),t>0){for(l=a+1;c.length>l;l++)if(h(c[l]))return c[l]}else for(l=a-1;l>=0;l--)if(h(c[l]))return c[l];return null}var a,l,c,h;return 9===s.keyCode&&(h=n(r.getParam("tab_focus",r.getParam("tabfocus_elements",":prev,:next"))),1==h.length&&(h[1]=h[0],h[0]=":prev"),c=s.shiftKey?":prev"==h[0]?o(-1):e.get(h[0]):":next"==h[1]?o(1):e.get(h[1]))?(c.id&&(r=tinymce.get(c.id||c.name))?r.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),c.focus()},10),t.cancel(s)):void 0}r.onKeyUp.add(s),tinymce.isGecko?(r.onKeyPress.add(o),r.onKeyDown.add(s)):r.onKeyDown.add(o)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();
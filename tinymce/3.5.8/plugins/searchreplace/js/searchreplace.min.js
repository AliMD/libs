tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var e=this,t=document.forms[0],i=tinyMCEPopup.getWindowArg("mode");e.switchMode(i),t[i+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),t[i+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(t){e.switchMode(t.substring(0,t.indexOf("_")))})},switchMode:function(e){var t,i=this.lastMode;i!=e&&(t=document.forms[0],i&&(t[e+"_panel_searchstring"].value=t[i+"_panel_searchstring"].value,t[e+"_panel_backwardsu"].checked=t[i+"_panel_backwardsu"].checked,t[e+"_panel_backwardsd"].checked=t[i+"_panel_backwardsd"].checked,t[e+"_panel_casesensitivebox"].checked=t[i+"_panel_casesensitivebox"].checked),mcTabs.displayTab(e+"_tab",e+"_panel"),document.getElementById("replaceBtn").style.display="replace"==e?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==e?"inline":"none",this.lastMode=e)},searchNext:function(e){function t(){l=a.getRng().cloneRange(),o.getDoc().execCommand("SelectAll",!1,null),a.setRng(l)}function i(){o.selection.setContent(rs)}var n,r,s,o=tinyMCEPopup.editor,a=o.selection,l=a.getRng(),h=this.lastMode,c=0,u=o.getWin(),d=(o.windowManager,0);if(n=document.forms[0],r=n[h+"_panel_searchstring"].value,s=n[h+"_panel_backwardsu"].checked,ca=n[h+"_panel_casesensitivebox"].checked,rs=n.replace_panel_replacestring.value,tinymce.isIE&&(l=o.getDoc().selection.createRange()),""!=r){switch(ca&&(c=4|c),e){case"all":if(o.execCommand("SelectAll"),o.selection.collapse(!0),tinymce.isIE){for(o.focus(),l=o.getDoc().selection.createRange();l.findText(r,s?-1:1,c);)l.scrollIntoView(),l.select(),i(),d=1,s&&l.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else for(;u.find(r,ca,s,!1,!1,!1,!1);)i(),d=1;return d?tinyMCEPopup.alert(o.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(o.getLang("searchreplace_dlg.notfound")),void 0;case"current":o.selection.isCollapsed()||i()}a.collapse(s),l=a.getRng(),r&&(tinymce.isIE?(o.focus(),l=o.getDoc().selection.createRange(),l.findText(r,s?-1:1,c)?(l.scrollIntoView(),l.select()):tinyMCEPopup.alert(o.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):u.find(r,ca,s,!1,!1,!1,!1)?t():tinyMCEPopup.alert(o.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);
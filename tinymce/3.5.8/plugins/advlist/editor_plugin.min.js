(function(){var e=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(t){function i(t){var i=[];return e(t.split(/,/),function(e){i.push({title:"advlist."+("default"==e?"def":e.replace(/-/g,"_")),styles:{listStyleType:"default"==e?"":e}})}),i}var n=this;n.editor=t,n.numlist=t.getParam("advlist_number_styles")||i("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),n.bullist=t.getParam("advlist_bullet_styles")||i("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(n.isIE7=!0)},createControl:function(t,i){function n(t,i){var n=!0;return e(i.styles,function(e,i){return l.dom.getStyle(t,i)!=e?(n=!1,!1):void 0}),n}function r(){var e,i=l.dom,r=l.selection;e=i.getParent(r.getNode(),"ol,ul"),(!e||e.nodeName==("bullist"==t?"OL":"UL")||n(e,o))&&l.execCommand("bullist"==t?"InsertUnorderedList":"InsertOrderedList"),o&&(e=i.getParent(r.getNode(),"ol,ul"),e&&(i.setStyles(e,o.styles),e.removeAttribute("data-mce-style"))),l.focus()}var s,o,a=this,l=a.editor;return"numlist"==t||"bullist"==t?("advlist.def"==a[t][0].title&&(o=a[t][0]),s=i.createSplitButton(t,{title:"advanced."+t+"_desc","class":"mce_"+t,onclick:function(){r()}}),s.onRenderMenu.add(function(i,s){s.onHideMenu.add(function(){a.bookmark&&(l.selection.moveToBookmark(a.bookmark),a.bookmark=0)}),s.onShowMenu.add(function(){var i,r=l.dom,h=r.getParent(l.selection.getNode(),"ol,ul");(h||o)&&(i=a[t],e(s.items,function(t){var r=!0;t.setSelected(0),h&&!t.isDisabled()&&(e(i,function(e){return e.id!=t.id||n(h,e)?void 0:(r=!1,!1)}),r&&t.setSelected(1))}),h||s.items[o.id].setSelected(1)),l.focus(),tinymce.isIE&&(a.bookmark=l.selection.getBookmark(1))}),s.add({id:l.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),e(a[t],function(e){a.isIE7&&"lower-greek"==e.styles.listStyleType||(e.id=l.dom.uniqueId(),s.add({id:e.id,title:e.title,onclick:function(){o=e,r()}}))})}),s):void 0},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();
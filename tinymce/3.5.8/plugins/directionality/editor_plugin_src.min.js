(function(){tinymce.create("tinymce.plugins.Directionality",{init:function(e){function t(t){var i,n=e.dom,r=e.selection.getSelectedBlocks();r.length&&(i=n.getAttrib(r[0],"dir"),tinymce.each(r,function(e){n.getParent(e.parentNode,"*[dir='"+t+"']",n.getRoot())||(i!=t?n.setAttrib(e,"dir",t):n.setAttrib(e,"dir",null))}),e.nodeChanged())}var i=this;i.editor=e,e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"}),e.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"}),e.onNodeChange.add(i._nodeChange,i)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(e,t,i){var n,r=e.dom;return(i=r.getParent(i,r.isBlock))?(n=r.getAttrib(i,"dir"),t.setActive("ltr","ltr"==n),t.setDisabled("ltr",0),t.setActive("rtl","rtl"==n),t.setDisabled("rtl",0),void 0):(t.setDisabled("ltr",1),t.setDisabled("rtl",1),void 0)}}),tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)})();
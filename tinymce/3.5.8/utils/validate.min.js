var Validator={isEmail:function(e){return this.test(e,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(e){return this.test(e,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(e){return this.test(e,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(e){return this.test(e,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(e){var t,i;if("SELECT"==e.nodeName&&1>e.selectedIndex)return!0;if("checkbox"==e.type&&!e.checked)return!0;if("radio"==e.type){for(i=0,t=e.form.elements;t.length>i;i++)if("radio"==t[i].type&&t[i].name==e.name&&t[i].checked)return!1;return!0}return RegExp("^\\s*$").test(1==e.nodeType?e.value:e)},isNumber:function(e,t){return!(isNaN(1==e.nodeType?e.value:e)||t&&this.test(e,"^-?[0-9]*\\.[0-9]*$"))},test:function(e,t){return e=1==e.nodeType?e.value:e,""==e||RegExp(t).test(e)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(e){var t;for(t in e)this.settings[t]=e[t]},validate:function(e){var t,i,n=this.settings,r=0;for(i=this.tags(e,"label"),t=0;i.length>t;t++)this.removeClass(i[t],n.invalid_cls),i[t].setAttribute("aria-invalid",!1);return r+=this.validateElms(e,"input"),r+=this.validateElms(e,"select"),r+=this.validateElms(e,"textarea"),3==r},invalidate:function(e){this.mark(e.form,e)},getErrorMessages:function(e){var t,i,n,r,o=this.settings,s=[],a=tinyMCEPopup.editor;for(t=this.tags(e,"label"),i=0;t.length>i;i++)this.hasClass(t[i],o.invalid_cls)&&(n=document.getElementById(t[i].getAttribute("for")),r={field:t[i].textContent},this.hasClass(n,o.min_cls,!0)?(message=a.getLang("invalid_data_min"),r.min=this.getNum(n,o.min_cls)):message=this.hasClass(n,o.number_cls)?a.getLang("invalid_data_number"):this.hasClass(n,o.size_cls)?a.getLang("invalid_data_size"):a.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(e,t){return r[t]||"{#"+t+"}"}),s.push(message));return s},reset:function(e){var t,i,n,r=["label","input","select","textarea"],o=this.settings;if(null!=e)for(t=0;r.length>t;t++)for(n=this.tags(e.form?e.form:e,r[t]),i=0;n.length>i;i++)this.removeClass(n[i],o.invalid_cls),n[i].setAttribute("aria-invalid",!1)},validateElms:function(e,t){var i,n,r,o,s=this.settings,a=!0,l=Validator;for(i=this.tags(e,t),n=0;i.length>n;n++)r=i[n],this.removeClass(r,s.invalid_cls),this.hasClass(r,s.required_cls)&&l.isEmpty(r)&&(a=this.mark(e,r)),this.hasClass(r,s.number_cls)&&!l.isNumber(r)&&(a=this.mark(e,r)),this.hasClass(r,s.int_cls)&&!l.isNumber(r,!0)&&(a=this.mark(e,r)),this.hasClass(r,s.url_cls)&&!l.isAbsUrl(r)&&(a=this.mark(e,r)),this.hasClass(r,s.email_cls)&&!l.isEmail(r)&&(a=this.mark(e,r)),this.hasClass(r,s.size_cls)&&!l.isSize(r)&&(a=this.mark(e,r)),this.hasClass(r,s.id_cls)&&!l.isId(r)&&(a=this.mark(e,r)),this.hasClass(r,s.min_cls,!0)&&(o=this.getNum(r,s.min_cls),(isNaN(o)||parseInt(r.value)<parseInt(o))&&(a=this.mark(e,r))),this.hasClass(r,s.max_cls,!0)&&(o=this.getNum(r,s.max_cls),(isNaN(o)||parseInt(r.value)>parseInt(o))&&(a=this.mark(e,r)));return a},hasClass:function(e,t,i){return RegExp("\\b"+t+(i?"[0-9]+":"")+"\\b","g").test(e.className)},getNum:function(e,t){return t=e.className.match(RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t=t.replace(/[^0-9]/g,"")},addClass:function(e,t,i){var n=this.removeClass(e,t);e.className=i?t+(""!=n?" "+n:""):(""!=n?n+" ":"")+t},removeClass:function(e,t){return t=e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),e.className=" "!=t?t:""},tags:function(e,t){return e.getElementsByTagName(t)},mark:function(e,t){var i=this.settings;return this.addClass(t,i.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(e,t,i.invalid_cls),!1},markLabels:function(e,t,i){var n,r;for(n=this.tags(e,"label"),r=0;n.length>r;r++)(n[r].getAttribute("for")==t.id||n[r].htmlFor==t.id)&&this.addClass(n[r],i);return null}};
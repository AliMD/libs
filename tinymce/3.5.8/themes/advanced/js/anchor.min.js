tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(e){var t,i=document.forms[0];this.editor=e,t=e.dom.getParent(e.selection.getNode(),"A"),v=e.dom.getAttrib(t,"name")||e.dom.getAttrib(t,"id"),v&&(this.action="update",i.anchorName.value=v),i.insert.value=e.getLang(t?"update":"insert")},update:function(){var e,t,i=this.editor,n=document.forms[0].anchorName.value;if(!n||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(n))return tinyMCEPopup.alert("advanced_dlg.anchor_invalid"),void 0;tinyMCEPopup.restoreSelection(),"update"!=this.action&&i.selection.collapse(1);var r=i.schema.getElementRule("a");if(t=!r||r.attributes.name?"name":"id",e=i.dom.getParent(i.selection.getNode(),"A"))e.setAttribute(t,n),e[t]=n,i.undoManager.add();else{var s={"class":"mceItemAnchor"};s[t]=n,i.execCommand("mceInsertContent",0,i.dom.createHTML("a",s,"ï»¿")),i.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);
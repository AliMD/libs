(function(e,t,n,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.0.4",settings:{disable_class:"no-custom"},init:function(t,n,i){return this.scope=t||this.scope,"object"==typeof n&&e.extend(!0,this.settings,n),"string"!=typeof n?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[n].call(this,i)},assemble:function(){e('form.custom input[type="radio"]',e(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup),e('form.custom input[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup),e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_select)},events:function(){var r=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),r.toggle_radio(e(this))}).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(){r.refresh_custom_select(e(this))}).on("click.fndtn.forms","form.custom label",function(t){var n,i,o=e("#"+r.escape(e(this).attr("for"))+':not([data-customforms="disabled"])');0!==o.length&&("checkbox"===o.attr("type")?(t.preventDefault(),n=e(this).find("span.custom.checkbox"),0==n.length&&(n=o.add(this).siblings("span.custom.checkbox").first()),r.toggle_checkbox(n)):"radio"===o.attr("type")&&(t.preventDefault(),i=e(this).find("span.custom.radio"),0==i.length&&(i=o.add(this).siblings("span.custom.radio").first()),r.toggle_radio(i)))}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),o=n.closest("div.custom.dropdown"),a=o.prev();return o.hasClass("open")||e(r.scope).trigger("click"),t.preventDefault(),!1===a.is(":disabled")?(o.toggleClass("open"),o.hasClass("open")?e(r.scope).on("click.fndtn.forms.customdropdown",function(){o.removeClass("open"),e(r.scope).off(".fndtn.forms.customdropdown")}):e(r.scope).on(".fndtn.forms.customdropdown"),!1):i}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var n=e(this),i=n.closest("div.custom.dropdown"),r=i.prev(),o=0;if(t.preventDefault(),t.stopPropagation(),!e(this).hasClass("disabled")){e("div.dropdown").not(i).removeClass("open");var a=n.closest("ul").find("li.selected");a.removeClass("selected"),n.addClass("selected"),i.removeClass("open").find("a.current").html(n.html()),n.closest("ul").find("li").each(function(e){n[0]==this&&(o=e)}),r[0].selectedIndex=o,r.data("prevalue",a.html()),r.trigger("change")}}),e(t).on("keydown",function(t){var i=(n.activeElement,e(".custom.dropdown.open"));if(i.length>0)if(t.preventDefault(),13===t.which&&i.find("li.selected").trigger("click"),38===t.which){var r=i.find("li.selected"),o=r.prev(":not(.disabled)");o.length>0&&(r.removeClass("selected"),o.addClass("selected"))}else if(40===t.which){var r=i.find("li.selected"),a=r.next(":not(.disabled)");a.length>0&&(r.removeClass("selected"),a.addClass("selected"))}}),this.settings.init=!0},append_custom_markup:function(t,n){var i=e(n).hide(),r=i.attr("type"),o=i.next("span.custom."+r);0===o.length&&(o=e('<span class="custom '+r+'"></span>').insertAfter(i)),o.toggleClass("checked",i.is(":checked")),o.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(t,n){var i,r=Foundation.libs.forms,o=e(n),a=o.next("div.custom.dropdown"),s=a.find("ul"),l=(a.find(".current"),a.find(".selector")),c=o.find("option"),u=c.filter(":selected"),d=o.attr("class")?o.attr("class").split(" "):[],p=0,h="",f=!1;if(!o.hasClass(r.settings.disable_class)){if(0===a.length){var m=o.hasClass("small")?"small":o.hasClass("medium")?"medium":o.hasClass("large")?"large":o.hasClass("expand")?"expand":"";a=e('<div class="'+["custom","dropdown",m].concat(d).filter(function(e,t,n){return""==e?!1:n.indexOf(e)==t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),l=a.find(".selector"),s=a.find("ul"),h=c.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),s.append(h),f=a.prepend('<a href="#" class="current">'+u.html()+"</a>").find(".current"),o.after(a).hide()}else h=c.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),s.html("").append(h);if(a.toggleClass("disabled",o.is(":disabled")),i=s.find("li"),c.each(function(t){this.selected&&(i.eq(t).addClass("selected"),f&&f.html(e(this).html())),e(this).is(":disabled")&&i.eq(t).addClass("disabled")}),!a.is(".small, .medium, .large, .expand")){a.addClass("open");var r=Foundation.libs.forms;r.hidden_fix.adjust(s),p=r.outerWidth(i)>p?r.outerWidth(i):p,Foundation.libs.forms.hidden_fix.reset(),a.removeClass("open")}}},refresh_custom_select:function(t){var n=this,i=0,r=t.next(),o=t.find("option");r.find("ul").html(""),o.each(function(){var t=e("<li>"+e(this).html()+"</li>");r.find("ul").append(t)}),o.each(function(t){this.selected&&(r.find("li").eq(t).addClass("selected"),r.find(".current").html(e(this).html())),e(this).is(":disabled")&&r.find("li").eq(t).addClass("disabled")}),r.removeAttr("style").find("ul").removeAttr("style"),r.find("li").each(function(){r.addClass("open"),n.outerWidth(e(this))>i&&(i=n.outerWidth(e(this))),r.removeClass("open")})},toggle_checkbox:function(e){var t=e.prev(),n=t[0];!1===t.is(":disabled")&&(n.checked=n.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},toggle_radio:function(e){var t=e.prev(),n=t.closest("form.custom"),i=t[0];!1===t.is(":disabled")&&(n.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked"),e.hasClass("checked")||e.toggleClass("checked"),i.checked=e.hasClass("checked"),t.trigger("change"))},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents().andSelf().filter(":hidden"),n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var r=e(this),o=t.tmp[n];o===i?r.removeAttr("style"):r.attr("style",o)}),t.tmp=[],t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")}}})(Foundation.zj,this,this.document);
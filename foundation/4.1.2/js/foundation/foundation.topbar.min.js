(function(e,t){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.1.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(n,i,r){var o=this;return"object"==typeof i&&e.extend(!0,this.settings,i),"string"!=typeof i?(e(".top-bar").each(function(){o.settings.$w=e(t),o.settings.$topbar=e(this),o.settings.$section=o.settings.$topbar.find("section"),o.settings.$titlebar=o.settings.$topbar.children("ul").first(),o.settings.$topbar.data("index",0);var n=e("<div class='top-bar-js-breakpoint'/>").insertAfter(o.settings.$topbar);o.settings.breakPoint=n.width(),n.remove(),o.assemble(),o.settings.$topbar.parent().hasClass("fixed")&&e("body").css("padding-top",o.outerHeight(o.settings.$topbar))}),o.settings.init||this.events(),this.settings.init):this[i].call(this,r)},events:function(){var n=this,i=this.outerHeight(e(".top-bar"));e(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(r){var o=e(this).closest(".top-bar"),a=o.find("section, .section");o.children("ul").first(),o.data("height")||n.largestUL(),r.preventDefault(),n.breakpoint()&&o.toggleClass("expanded").css("min-height",""),o.hasClass("expanded")?o.parent().hasClass("fixed")&&(o.parent().removeClass("fixed"),o.addClass("fixed"),e("body").css("padding-top","0"),t.scrollTo(0,0)):(n.rtl?(a.css({right:"0%"}),a.find(">.name").css({right:"100%"})):(a.css({left:"0%"}),a.find(">.name").css({left:"100%"})),a.find("li.moved").removeClass("moved"),o.data("index",0),o.hasClass("fixed")&&(o.parent().addClass("fixed"),o.removeClass("fixed"),e("body").css("padding-top",i)))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(t){var i=e(this).closest(".top-bar"),r=i.find("section, .section"),o=i.children("ul").first();if((Modernizr.touch||n.breakpoint())&&t.preventDefault(),n.breakpoint()){var a=e(this),s=a.closest("li");i.data("index",i.data("index")+1),s.addClass("moved"),n.rtl?(r.css({right:-(100*i.data("index"))+"%"}),r.find(">.name").css({right:100*i.data("index")+"%"})):(r.css({left:-(100*i.data("index"))+"%"}),r.find(">.name").css({left:100*i.data("index")+"%"})),a.siblings("ul").height(i.data("height")+n.outerHeight(o,!0)),i.css("min-height",i.data("height")+2*n.outerHeight(o,!0))}}),e(t).on("resize.fndtn.topbar",function(){n.breakpoint()||e(".top-bar").css("min-height","").removeClass("expanded")}.bind(this)),e(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(t){t.preventDefault();var i=e(this),r=i.closest(".top-bar"),o=r.find("section, .section"),a=i.closest("li.moved");a.parent(),r.data("index",r.data("index")-1),n.rtl?(o.css({right:-(100*r.data("index"))+"%"}),o.find(">.name").css({right:100*r.data("index")+"%"})):(o.css({left:-(100*r.data("index"))+"%"}),o.find(">.name").css({left:100*r.data("index")+"%"})),0===r.data("index")&&r.css("min-height",0),setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return e(t).width()<=this.settings.breakPoint||e("html").hasClass("lt-ie9")},assemble:function(){var t=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var n=e(this),i=n.siblings(".dropdown"),r=e('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==t.settings.custom_back_text?r.find("h5>a").html("&laquo; "+t.settings.back_text):r.find("h5>a").html("&laquo; "+n.html()),i.prepend(r)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var t=this.settings.$topbar.find("section ul ul"),n=t.first(),i=0,r=this;t.each(function(){e(this).children("li").length>n.children("li").length&&(n=e(this))}),n.children("li").each(function(){i+=r.outerHeight(e(this),!0)}),this.settings.$topbar.data("height",i)},sticky:function(){var n="."+this.settings.stickyClass;if(e(n).length>0){var i=e(n).length?e(n).offset().top:0,r=e(t),o=this.outerHeight(e(".top-bar"));r.scroll(function(){r.scrollTop()>=i?(e(n).addClass("fixed"),e("body").css("padding-top",o)):i>r.scrollTop()&&(e(n).removeClass("fixed"),e("body").css("padding-top","0"))})}},off:function(){e(this.scope).off(".fndtn.topbar"),e(t).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);
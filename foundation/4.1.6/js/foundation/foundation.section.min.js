(function(t,e,i){"use strict";Foundation.libs.section={name:"section",version:"4.1.3",settings:{deep_linking:!1,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",active_region_selector:"section.active, .section.active, .active[data-section-region]",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',callback:function(){}},init:function(e,i,s){var n=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof i&&t.extend(!0,n.settings,i),"string"!=typeof i?(this.set_active_from_hash(),this.events(),!0):this[i].call(this,s)},events:function(){var s=this;t(this.scope).on("click.fndtn.section","[data-section] .title, [data-section] [data-section-title]",function(e){var i=t(this);i.closest(s.settings.section_selector),s.toggle_active.call(this,e,s),s.reflow()}),t(e).on("resize.fndtn.section",s.throttle(function(){s.resize.call(this)},30)).on("hashchange",function(){s.settings.toggled||(s.set_active_from_hash(),t(this).trigger("resize"))}).trigger("resize"),t(i).on("click.fndtn.section",function(e){1>t(e.target).closest(s.settings.title_selector).length&&t(s.settings.nav_selector).children(s.settings.region_selector).removeClass("active").attr("style","")})},toggle_active:function(e,i){var s=t(this),i=Foundation.libs.section,n=s.closest(i.settings.region_selector),o=s.siblings(i.settings.content_selector),a=n.parent(),r=t.extend({},i.settings,i.data_options(a)),l=a.children(i.settings.active_region_selector);if(i.settings.toggled=!0,!r.deep_linking&&o.length>0&&e.preventDefault(),n.hasClass("active"))(i.small(a)||i.is_vertical_nav(a)||i.is_horizontal_nav(a)||i.is_accordion(a))&&(l[0]!==n[0]||l[0]===n[0]&&!r.one_up)&&n.removeClass("active").attr("style","");else{var l=a.children(i.settings.active_region_selector),c=i.outerHeight(n.children(i.settings.title_selector));(i.small(a)||r.one_up)&&(i.small(a)?l.attr("style",""):l.attr("style","visibility: hidden; padding-top: "+c+"px;")),i.small(a)?n.attr("style",""):n.css("padding-top",c),n.addClass("active"),l.length>0&&l.removeClass("active").attr("style",""),i.is_vertical_tabs(a)&&(o.css("display","block"),null!==l&&l.children(i.settings.content_selector).css("display","none"))}setTimeout(function(){i.settings.toggled=!1},300),r.callback()},resize:function(){var e=Foundation.libs.section,i=t(e.settings.section_selector);i.each(function(){var i=t(this),s=i.children(e.settings.active_region_selector),n=t.extend({},e.settings,e.data_options(i));if(s.length>1)s.not(":first").removeClass("active").attr("style","");else if(1>s.length&&!e.is_vertical_nav(i)&&!e.is_horizontal_nav(i)&&!e.is_accordion(i)){var o=i.children(e.settings.region_selector).first();(n.one_up||!e.small(i))&&o.addClass("active"),e.small(i)?o.attr("style",""):o.css("padding-top",e.outerHeight(o.children(e.settings.title_selector)))}e.small(i)?s.attr("style",""):s.css("padding-top",e.outerHeight(s.children(e.settings.title_selector))),e.position_titles(i),e.is_horizontal_nav(i)&&!e.small(i)||e.is_vertical_tabs(i)?e.position_content(i):e.position_content(i,!1)})},is_vertical_nav:function(t){return/vertical-nav/i.test(t.data("section"))},is_horizontal_nav:function(t){return/horizontal-nav/i.test(t.data("section"))},is_accordion:function(t){return/accordion/i.test(t.data("section"))},is_horizontal_tabs:function(t){return/^tabs$/i.test(t.data("section"))},is_vertical_tabs:function(t){return/vertical-tabs/i.test(t.data("section"))},set_active_from_hash:function(){var i=e.location.hash.substring(1),s=t("[data-section]"),n=this;s.each(function(){var e=t(this),s=t.extend({},n.settings,n.data_options(e));if(i.length>0&&s.deep_linking){var o=e.children(n.settings.region_selector).attr("style","").removeClass("active");o.map(function(){return t(this).children('.content[data-slug="'+i+'"], [data-section-content][data-slug="'+i+'"]')}).parent().addClass("active")}})},position_titles:function(e,i){var s=this,n=e.children(this.settings.region_selector).map(function(){return t(this).children(s.settings.title_selector)}),o=0,a=0,s=this;"boolean"==typeof i?n.attr("style",""):n.each(function(){s.is_vertical_tabs(e)?(t(this).css("top",a),a+=s.outerHeight(t(this))):(s.rtl?t(this).css("right",o):t(this).css("left",o),o+=s.outerWidth(t(this)))})},position_content:function(e,i){var s=this,n=e.children(s.settings.region_selector),o=n.map(function(){return t(this).children(s.settings.title_selector)}),a=n.map(function(){return t(this).children(s.settings.content_selector)});if("boolean"==typeof i)a.attr("style",""),e.attr("style","");else if(s.is_vertical_tabs(e)&&!s.small(e)){var r=0,l=Number.MAX_VALUE,c=null;n.each(function(){var i=t(this),n=i.children(s.settings.title_selector),o=i.children(s.settings.content_selector),a=0;c=s.outerWidth(n),a=s.outerWidth(e)-c,l>a&&(l=a),r+=s.outerHeight(n),t(this).hasClass("active")||o.css("display","none")}),n.each(function(){var e=t(this).children(s.settings.content_selector);e.css("minHeight",r),e.css("maxWidth",l-2)}),e.css("maxWidth",c+l)}else n.each(function(){var e=t(this),i=e.children(s.settings.title_selector),n=e.children(s.settings.content_selector);s.rtl?n.css({right:s.position_right(i)+1,top:s.outerHeight(i)-2}):n.css({left:i.position().left-1,top:s.outerHeight(i)-2})}),"function"==typeof Zepto?e.height(this.outerHeight(o.first())):e.height(this.outerHeight(o.first())-2)},position_right:function(e){var i=this,s=e.closest(this.settings.section_selector),n=s.children(this.settings.region_selector),o=e.closest(this.settings.section_selector).width(),a=n.map(function(){return t(this).children(i.settings.title_selector)}).length;return o-e.position().left-e.width()*(e.index()+1)-a},reflow:function(e){var e=e||i;t(this.settings.section_selector,e).trigger("resize")},small:function(e){return t.extend({},this.settings,this.data_options(e)),this.is_horizontal_tabs(e)?!1:e&&this.is_accordion(e)?!0:t("html").hasClass("lt-ie9")?!0:t("html").hasClass("ie8compat")?!0:768>t(this.scope).width()},off:function(){t(this.scope).off(".fndtn.section"),t(e).off(".fndtn.section"),t(i).off(".fndtn.section")}}})(Foundation.zj,this,this.document);
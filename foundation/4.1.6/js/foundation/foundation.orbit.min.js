(function(t,i,s,e){"use strict";Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"4.1.0",settings:{timer_speed:1e4,animation_speed:500,bullets:!0,stack_on_small:!0,navigation_arrows:!0,slide_number:!0,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning"},init:function(i,s){var e=this;Foundation.inherit(e,"data_options"),"object"==typeof s&&t.extend(!0,e.settings,s),t("[data-orbit]",i).each(function(i,s){var n=t.extend(!0,{},e);n._init(i,s)})},_container_html:function(){var t=this;return'<div class="'+t.settings.container_class+'"></div>'},_bullets_container_html:function(i){var s=this,e=t('<ol class="'+s.settings.bullets_container_class+'"></ol>');return i.each(function(i){var n=t('<li data-orbit-slide-number="'+(i+1)+'" class=""></li>');0===i&&n.addClass(s.settings.bullets_active_class),e.append(n)}),e},_slide_number_html:function(i,s){var e=this,n=t('<div class="'+e.settings.slide_number_class+'"></div>');return n.append("<span>"+i+"</span> of <span>"+s+"</span>"),n},_timer_html:function(){var t=this;return"number"==typeof t.settings.timer_speed&&t.settings.timer_speed>0?'<div class="'+t.settings.timer_container_class+'"><span></span><div class="'+t.settings.timer_progress_class+'"></div></div>':""},_next_html:function(){var t=this;return'<a href="#" class="'+t.settings.next_class+'">Next <span></span></a>'},_prev_html:function(){var t=this;return'<a href="#" class="'+t.settings.prev_class+'">Prev <span></span></a>'},_init:function(i,s){var e=this,n=t(s),o=n.wrap(e._container_html()).parent(),a=n.children();t.extend(!0,e.settings,e.data_options(n)),e.settings.navigation_arrows&&(o.append(e._prev_html()),o.append(e._next_html())),n.addClass(e.settings.slides_container_class),e.settings.stack_on_small&&o.addClass(e.settings.stack_on_small_class),e.settings.slide_number&&o.append(e._slide_number_html(1,a.length)),o.append(e._timer_html()),e.settings.bullets&&o.after(e._bullets_container_html(a)),n.append(a.first().clone().attr("data-orbit-slide","")),n.prepend(a.last().clone().attr("data-orbit-slide","")),n.css("marginLeft","-100%"),a.first().addClass(e.settings.active_slide_class),e._init_events(n),e._init_dimensions(n),e._start_timer(n)},_init_events:function(n){var o=this,a=n.parent();t(i).on("load.fndtn.orbit",function(){n.height(""),n.height(n.height(a.height())),n.trigger("orbit:ready")}).on("resize.fndtn.orbit",function(){n.height(""),n.height(n.height(a.height()))}),t(s).on("click.fndtn.orbit","[data-orbit-link]",function(i){i.preventDefault();var s=t(i.currentTarget).attr("data-orbit-link"),e=n.find("[data-orbit-slide="+s+"]").first();1===e.length&&(o._reset_timer(n,!0),o._goto(n,e.index(),function(){}))}),a.siblings("."+o.settings.bullets_container_class).on("click.fndtn.orbit","[data-orbit-slide-number]",function(i){i.preventDefault(),o._reset_timer(n,!0),o._goto(n,t(i.currentTarget).data("orbit-slide-number"),function(){})}),a.on("orbit:after-slide-change.fndtn.orbit",function(t,i){var s=a.find("."+o.settings.slide_number_class);1===s.length&&s.replaceWith(o._slide_number_html(i.slide_number,i.total_slides))}).on("orbit:next-slide.fndtn.orbit click.fndtn.orbit","."+o.settings.next_class,function(t){t.preventDefault(),o._reset_timer(n,!0),o._goto(n,"next",function(){})}).on("orbit:prev-slide.fndtn.orbit click.fndtn.orbit","."+o.settings.prev_class,function(t){t.preventDefault(),o._reset_timer(n,!0),o._goto(n,"prev",function(){})}).on("orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit","."+o.settings.timer_container_class,function(i){i.preventDefault();var s=t(i.currentTarget).toggleClass(o.settings.timer_paused_class),e=s.closest("."+o.settings.container_class).find("."+o.settings.slides_container_class);s.hasClass(o.settings.timer_paused_class)?o._stop_timer(e):o._start_timer(e)}).on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var i={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:e};a.data("swipe-transition",i),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var i=a.data("swipe-transition");if(i===e&&(i={}),i.delta_x=t.touches[0].pageX-i.start_page_x,i.is_scrolling===e&&(i.is_scrolling=!!(i.is_scrolling||Math.abs(i.delta_x)<Math.abs(t.touches[0].pageY-i.start_page_y))),!i.is_scrolling&&!i.active){t.preventDefault(),o._stop_timer(n);var s=0>i.delta_x?"next":"prev";i.active=!0,o._goto(n,s,function(){})}}}).on("touchend.fndtn.orbit",function(t){a.data("swipe-transition",{}),t.stopPropagation()})},_init_dimensions:function(t){var i=t.parent(),s=t.children();t.css("width",100*s.length+"%"),s.css("width",100/s.length+"%"),t.height(i.height()),t.css("width",100*s.length+"%")},_start_timer:function(t){var i=this,s=t.parent(),e=function(){i._reset_timer(t,!1),i._goto(t,"next",function(){i._start_timer(t)})},n=s.find("."+i.settings.timer_container_class),o=n.find("."+i.settings.timer_progress_class),a=o.width()/n.width(),r=i.settings.timer_speed-a*i.settings.timer_speed;o.animate({width:"100%"},r,"linear",e),t.trigger("orbit:timer-started")},_stop_timer:function(t){var i=this,s=t.parent(),e=s.find("."+i.settings.timer_container_class),n=e.find("."+i.settings.timer_progress_class),o=n.width()/e.width();i._rebuild_timer(s,100*o+"%"),t.trigger("orbit:timer-stopped"),e=s.find("."+i.settings.timer_container_class),e.addClass(i.settings.timer_paused_class)},_reset_timer:function(t,i){var s=this,e=t.parent();if(s._rebuild_timer(e,"0%"),"boolean"==typeof i&&i){var n=e.find("."+s.settings.timer_container_class);n.addClass(s.settings.timer_paused_class)}},_rebuild_timer:function(i,s){var e=this,n=i.find("."+e.settings.timer_container_class),o=t(e._timer_html()),a=o.find("."+e.settings.timer_progress_class);if("function"==typeof Zepto)n.remove(),i.append(o),a.css("width",s);else if("function"==typeof jQuery){var r=n.find("."+e.settings.timer_progress_class);r.css("width",s),r.stop()}},_goto:function(i,s,e){var n=this,o=i.parent(),a=i.children(),r=i.find("."+n.settings.active_slide_class),l=r.index(),d=Foundation.rtl?"marginRight":"marginLeft";if(o.hasClass(n.settings.orbit_transition_class))return!1;"prev"===s?0===l?l=a.length-1:l--:"next"===s?l=(l+1)%a.length:"number"==typeof s&&(l=s%a.length),l===a.length-1&&"next"===s?(i.css(d,"0%"),l=1):0===l&&"prev"===s&&(i.css(d,"-"+100*(a.length-1)+"%"),l=a.length-2),o.addClass(n.settings.orbit_transition_class),r.removeClass(n.settings.active_slide_class),t(a[l]).addClass(n.settings.active_slide_class);var c=o.siblings("."+n.settings.bullets_container_class);1===c.length&&(c.children().removeClass(n.settings.bullets_active_class),t(c.children()[l-1]).addClass(n.settings.bullets_active_class));var h="-"+100*l+"%";if(i.trigger("orbit:before-slide-change"),i.css(d)===h)o.removeClass(n.settings.orbit_transition_class),i.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:i.children().length-2}]),e();else{var g={};g[d]=h,i.animate(g,n.settings.animation_speed,"linear",function(){o.removeClass(n.settings.orbit_transition_class),i.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:i.children().length-2}]),e()})}}}})(Foundation.zj,this,this.document);
(function(t,e){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.1.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(i,s,n){var o=this;return"object"==typeof s&&t.extend(!0,this.settings,s),"string"!=typeof s?(t(".top-bar").each(function(){o.settings.$w=t(e),o.settings.$topbar=t(this),o.settings.$section=o.settings.$topbar.find("section"),o.settings.$titlebar=o.settings.$topbar.children("ul").first(),o.settings.$topbar.data("index",0);var i=t("<div class='top-bar-js-breakpoint'/>").insertAfter(o.settings.$topbar);o.settings.breakPoint=i.width(),i.remove(),o.assemble(),o.settings.$topbar.parent().hasClass("fixed")&&t("body").css("padding-top",o.outerHeight(o.settings.$topbar))}),o.settings.init||this.events(),this.settings.init):this[s].call(this,n)},events:function(){var i=this,s=this.outerHeight(t(".top-bar"));t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(n){var o=t(this).closest(".top-bar"),a=o.find("section, .section");o.children("ul").first(),o.data("height")||i.largestUL(),n.preventDefault(),i.breakpoint()&&o.toggleClass("expanded").css("min-height",""),o.hasClass("expanded")?o.parent().hasClass("fixed")&&(o.parent().removeClass("fixed"),o.addClass("fixed"),t("body").css("padding-top","0"),e.scrollTo(0,0)):(i.rtl?(a.css({right:"0%"}),a.find(">.name").css({right:"100%"})):(a.css({left:"0%"}),a.find(">.name").css({left:"100%"})),a.find("li.moved").removeClass("moved"),o.data("index",0),o.hasClass("fixed")&&(o.parent().addClass("fixed"),o.removeClass("fixed"),t("body").css("padding-top",s)))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(e){var s=t(this).closest(".top-bar"),n=s.find("section, .section"),o=s.children("ul").first(),a=t(this).next(".dropdown").outerHeight();if((Modernizr.touch||i.breakpoint())&&e.preventDefault(),i.breakpoint()){var r=t(this),l=r.closest("li");s.data("index",s.data("index")+1),l.addClass("moved"),i.rtl?(n.css({right:-(100*s.data("index"))+"%"}),n.find(">.name").css({right:100*s.data("index")+"%"})):(n.css({left:-(100*s.data("index"))+"%"}),n.find(">.name").css({left:100*s.data("index")+"%"})),t(".top-bar").css("min-height",a),r.siblings("ul").height(s.data("height")+i.outerHeight(o,!0)),s.css("min-height",s.data("height")+2*i.outerHeight(o,!0))}}),t(e).on("resize.fndtn.topbar",function(){i.breakpoint()||t(".top-bar").css("min-height","").removeClass("expanded")}.bind(this)),t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(e){e.preventDefault();var s=t(this),n=s.closest(".top-bar"),o=n.find("section, .section"),a=s.closest("li.moved");a.parent(),n.data("index",n.data("index")-1),i.rtl?(o.css({right:-(100*n.data("index"))+"%"}),o.find(">.name").css({right:100*n.data("index")+"%"})):(o.css({left:-(100*n.data("index"))+"%"}),o.find(">.name").css({left:100*n.data("index")+"%"})),0===n.data("index")&&n.css("min-height",0),setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return t(e).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var i=t(this),s=i.siblings(".dropdown"),n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==e.settings.custom_back_text?n.find("h5>a").html("&laquo; "+e.settings.back_text):n.find("h5>a").html("&laquo; "+i.html()),s.prepend(n)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var e=this.settings.$topbar.find("section ul ul"),i=e.first(),s=0,n=this;e.each(function(){t(this).children("li").length>i.children("li").length&&(i=t(this))}),i.children("li").each(function(){s+=n.outerHeight(t(this),!0)}),this.settings.$topbar.data("height",s)},sticky:function(){var i="."+this.settings.stickyClass;if(t(i).length>0){var s=t(i).length?t(i).offset().top:0,n=t(e),o=this.outerHeight(t(".top-bar"));n.scroll(function(){n.scrollTop()>=s?(t(i).addClass("fixed"),t("body").css("padding-top",o)):s>n.scrollTop()&&(t(i).removeClass("fixed"),t("body").css("padding-top","0"))})}},off:function(){t(this.scope).off(".fndtn.topbar"),t(e).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);
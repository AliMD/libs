window.console&&console.firebug||function(){function toggleConsole(e){frameVisible=e||!frameVisible,consoleFrame?consoleFrame.style.visibility=frameVisible?"visible":"hidden":waitForBody()}function focusCommandLine(){toggleConsole(!0),commandLine&&commandLine.focus()}function waitForBody(){document.body?createFrame():setTimeout(waitForBody,200)}function createFrame(){if(!consoleFrame){window.onFirebugReady=function(e){window.onFirebugReady=null;var t=e.getElementById("toolbar");t.onmousedown=onSplitterMouseDown,commandLine=e.getElementById("commandLine"),addEvent(commandLine,"keydown",onCommandLineKeyDown),addEvent(e,isIE||isSafari?"keydown":"keypress",onKeyDown),consoleBody=e.getElementById("log"),layout(),flush()};var e=getFirebugURL();consoleFrame=document.createElement("iframe"),consoleFrame.setAttribute("src",e+"/firebug.html"),consoleFrame.setAttribute("frameBorder","0"),consoleFrame.style.visibility=frameVisible?"visible":"hidden",consoleFrame.style.zIndex="2147483583",consoleFrame.style.position=document.all?"absolute":"fixed",consoleFrame.style.width="100%",consoleFrame.style.left="0",consoleFrame.style.bottom="0",consoleFrame.style.height="200px",document.body.appendChild(consoleFrame)}}function getFirebugURL(){for(var e=document.getElementsByTagName("script"),t=0;e.length>t;++t)if(-1!=e[t].src.indexOf("firebug.js")){var i=e[t].src.lastIndexOf("/");return e[t].src.substr(0,i)}}function evalCommandLine(){var text=commandLine.value;commandLine.value="",logRow([clPrefix,text],"command");var value;try{value=eval(text)}catch(exc){}console.log(value)}function layout(){var e=consoleBody.ownerDocument.getElementById("toolbar"),t=consoleFrame.offsetHeight-(e.offsetHeight+commandLine.offsetHeight);t=Math.max(t,0),consoleBody.style.top=e.offsetHeight+"px",consoleBody.style.height=t+"px",commandLine.style.top=consoleFrame.offsetHeight-commandLine.offsetHeight+"px"}function logRow(e,t,i){consoleBody?writeMessage(e,t,i):(messageQueue.push([e,t,i]),waitForBody())}function flush(){var e=messageQueue;messageQueue=[];for(var t=0;e.length>t;++t)writeMessage(e[t][0],e[t][1],e[t][2])}function writeMessage(e,t,i){var n=consoleBody.scrollTop+consoleBody.offsetHeight>=consoleBody.scrollHeight;i||(i=writeRow),i(e,t),n&&(consoleBody.scrollTop=consoleBody.scrollHeight-consoleBody.offsetHeight)}function appendRow(e){var t=groupStack.length?groupStack[groupStack.length-1]:consoleBody;t.appendChild(e)}function writeRow(e,t){var i=consoleBody.ownerDocument.createElement("div");i.className="logRow"+(t?" logRow-"+t:""),i.innerHTML=e.join(""),appendRow(i)}function pushGroup(e,t){logFormatted(e,t);var i=consoleBody.ownerDocument.createElement("div");i.className="logGroup";var n=consoleBody.ownerDocument.createElement("div");n.className="logGroupBox",i.appendChild(n),appendRow(n),groupStack.push(n)}function popGroup(){groupStack.pop()}function logFormatted(e,t){var i=[],n=e[0],r=0;"string"!=typeof n&&(n="",r=-1);for(var o=parseFormat(n),s=0;o.length>s;++s){var a=o[s];if(a&&"object"==typeof a){var l=e[++r];a.appender(l,i)}else appendText(a,i)}for(var s=r+1;e.length>s;++s){appendText(" ",i);var l=e[s];"string"==typeof l?appendText(l,i):appendObject(l,i)}logRow(i,t)}function parseFormat(e){for(var t=[],i=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/,n={s:appendText,d:appendInteger,i:appendInteger,f:appendFloat},r=i.exec(e);r;r=i.exec(e)){var o=r[8]?r[8]:r[5],s=o in n?n[o]:appendObject,a=r[3]?parseInt(r[3]):"."==r[4]?-1:0;t.push(e.substr(0,"%"==r[0][0]?r.index:r.index+1)),t.push({appender:s,precision:a}),e=e.substr(r.index+r[0].length)}return t.push(e),t}function escapeHTML(e){function t(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&#39;";case'"':return"&quot;"}return"?"}return(e+"").replace(/[<>&"']/g,t)}function objectToString(e){try{return e+""}catch(t){return null}}function appendText(e,t){t.push(escapeHTML(objectToString(e)))}function appendNull(e,t){t.push('<span class="objectBox-null">',escapeHTML(objectToString(e)),"</span>")}function appendString(e,t){t.push('<span class="objectBox-string">&quot;',escapeHTML(objectToString(e)),"&quot;</span>")}function appendInteger(e,t){t.push('<span class="objectBox-number">',escapeHTML(objectToString(e)),"</span>")}function appendFloat(e,t){t.push('<span class="objectBox-number">',escapeHTML(objectToString(e)),"</span>")}function appendFunction(e,t){var i=/function ?(.*?)\(/,n=i.exec(objectToString(e)),r=n?n[1]:"function";t.push('<span class="objectBox-function">',escapeHTML(r),"()</span>")}function appendObject(e,t){try{void 0==e?appendNull("undefined",t):null==e?appendNull("null",t):"string"==typeof e?appendString(e,t):"number"==typeof e?appendInteger(e,t):"function"==typeof e?appendFunction(e,t):1==e.nodeType?appendSelector(e,t):"object"==typeof e?appendObjectFormatted(e,t):appendText(e,t)}catch(i){}}function appendObjectFormatted(e,t){var i=objectToString(e),n=/\[object (.*?)\]/,r=n.exec(i);t.push('<span class="objectBox-object">',r?r[1]:i,"</span>")}function appendSelector(e,t){t.push('<span class="objectBox-selector">'),t.push('<span class="selectorTag">',escapeHTML(e.nodeName.toLowerCase()),"</span>"),e.id&&t.push('<span class="selectorId">#',escapeHTML(e.id),"</span>"),e.className&&t.push('<span class="selectorClass">.',escapeHTML(e.className),"</span>"),t.push("</span>")}function appendNode(e,t){if(1==e.nodeType){t.push('<div class="objectBox-element">','&lt;<span class="nodeTag">',e.nodeName.toLowerCase(),"</span>");for(var i=0;e.attributes.length>i;++i){var n=e.attributes[i];n.specified&&t.push('&nbsp;<span class="nodeName">',n.nodeName.toLowerCase(),'</span>=&quot;<span class="nodeValue">',escapeHTML(n.nodeValue),"</span>&quot;")}if(e.firstChild){t.push('&gt;</div><div class="nodeChildren">');for(var r=e.firstChild;r;r=r.nextSibling)appendNode(r,t);t.push('</div><div class="objectBox-element">&lt;/<span class="nodeTag">',e.nodeName.toLowerCase(),"&gt;</span></div>")}else t.push("/&gt;</div>")}else 3==e.nodeType&&t.push('<div class="nodeText">',escapeHTML(e.nodeValue),"</div>")}function addEvent(e,t,i){document.all?e.attachEvent("on"+t,i):e.addEventListener(t,i,!1)}function removeEvent(e,t,i){document.all?e.detachEvent("on"+t,i):e.removeEventListener(t,i,!1)}function cancelEvent(e){document.all?e.cancelBubble=!0:e.stopPropagation()}function onError(e,t,i){var n=[],r=t.lastIndexOf("/"),o=-1==r?t:t.substr(r+1);n.push('<span class="errorMessage">',e,"</span>",'<div class="objectBox-sourceLink">',o," (line ",i,")</div>"),logRow(n,"error")}function onKeyDown(e){if(123==e.keyCode)toggleConsole();else{if(108!=e.keyCode&&76!=e.keyCode||!e.shiftKey||!e.metaKey&&!e.ctrlKey)return;focusCommandLine()}cancelEvent(e)}function onSplitterMouseDown(){if(!isSafari&&!isOpera){addEvent(document,"mousemove",onSplitterMouseMove),addEvent(document,"mouseup",onSplitterMouseUp);for(var e=0;frames.length>e;++e)addEvent(frames[e].document,"mousemove",onSplitterMouseMove),addEvent(frames[e].document,"mouseup",onSplitterMouseUp)}}function onSplitterMouseMove(e){var t=document.all?e.srcElement.ownerDocument.parentWindow:e.target.ownerDocument.defaultView,i=e.clientY;t!=t.parent&&(i+=t.frameElement?t.frameElement.offsetTop:0);var n=consoleFrame.offsetTop+consoleFrame.clientHeight,r=consoleBody.ownerDocument.getElementById("toolbar"),o=Math.max(n-i,r.offsetHeight+commandLine.offsetHeight);consoleFrame.style.height=o+"px",layout()}function onSplitterMouseUp(){removeEvent(document,"mousemove",onSplitterMouseMove),removeEvent(document,"mouseup",onSplitterMouseUp);for(var e=0;frames.length>e;++e)removeEvent(frames[e].document,"mousemove",onSplitterMouseMove),removeEvent(frames[e].document,"mouseup",onSplitterMouseUp)}function onCommandLineKeyDown(e){13==e.keyCode?evalCommandLine():27==e.keyCode&&(commandLine.value="")}window.console={log:function(){logFormatted(arguments,"")},debug:function(){logFormatted(arguments,"debug")},info:function(){logFormatted(arguments,"info")},warn:function(){logFormatted(arguments,"warning")},error:function(){logFormatted(arguments,"error")},assert:function(e,t){if(!e){for(var i=[],n=1;arguments.length>n;++n)i.push(arguments[n]);throw logFormatted(i.length?i:["Assertion Failure"],"error"),t?t:"Assertion Failure"}},dir:function(e){var t=[],i=[];for(var n in e)try{i.push([n,e[n]])}catch(r){}i.sort(function(e,t){return e[0]<t[0]?-1:1}),t.push("<table>");for(var o=0;i.length>o;++o){var n=i[o][0],s=i[o][1];t.push("<tr>",'<td class="propertyNameCell"><span class="propertyName">',escapeHTML(n),"</span></td>",'<td><span class="propertyValue">'),appendObject(s,t),t.push("</span></td></tr>")}t.push("</table>"),logRow(t,"dir")},dirxml:function(e){var t=[];appendNode(e,t),logRow(t,"dirxml")},group:function(){logRow(arguments,"group",pushGroup)},groupEnd:function(){logRow(arguments,"",popGroup)},time:function(e){timeMap[e]=(new Date).getTime()},timeEnd:function(e){if(e in timeMap){var t=(new Date).getTime()-timeMap[e];logFormatted([e+":",t+"ms"]),delete timeMap[e]}},count:function(){this.warn(["count() not supported."])},trace:function(){this.warn(["trace() not supported."])},profile:function(){this.warn(["profile() not supported."])},profileEnd:function(){},clear:function(){consoleBody.innerHTML=""},open:function(){toggleConsole(!0)},close:function(){frameVisible&&toggleConsole()}};var consoleFrame=null,consoleBody=null,commandLine=null,frameVisible=!1,messageQueue=[],groupStack=[],timeMap={},clPrefix=">>> ",isFirefox=-1!=navigator.userAgent.indexOf("Firefox"),isIE=-1!=navigator.userAgent.indexOf("MSIE"),isOpera=-1!=navigator.userAgent.indexOf("Opera"),isSafari=-1!=navigator.userAgent.indexOf("AppleWebKit");window.onerror=onError,addEvent(document,isIE||isSafari?"keydown":"keypress",onKeyDown),"true"==document.documentElement.getAttribute("debug")&&toggleConsole(!0)}();
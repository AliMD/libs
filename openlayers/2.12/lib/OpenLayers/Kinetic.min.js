OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,i,n=(new Date).getTime(),r=0,s=this.points.length;s>r&&(i=this.points[r],!(n-i.tick>this.delay));r++)t=i;if(t){var o=(new Date).getTime()-t.tick,a=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)),l=a/o;if(!(0==l||this.threshold>l)){var h=Math.asin((e.y-t.xy.y)/a);return t.xy.x<=e.x&&(h=Math.PI-h),{speed:l,theta:h}}}},move:function(e,t){var i=e.speed,n=Math.cos(e.theta),r=-Math.sin(e.theta),s=(new Date).getTime(),o=0,a=0,l=function(){if(null!=this.timerId){var e=(new Date).getTime()-s,l=-this.deceleration*Math.pow(e,2)/2+i*e,h=l*n,c=l*r,u={};u.end=!1;var d=-this.deceleration*e+i;0>=d&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,u.end=!0),u.x=h-o,u.y=c-a,o=h,a=c,t(u.x,u.y,u.end)}};this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(l,this))},CLASS_NAME:"OpenLayers.Kinetic"});
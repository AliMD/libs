/*!
 * Platform.js <http://mths.be/platform>
 * Copyright 2010-2012 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */
(function(g){var q=g,e=this,d=typeof exports=="object"&&exports,o=typeof global=="object"&&global&&(global==global.global?(g=global):global),i={}.hasOwnProperty,r={}.toString,m=/Java/.test(x(g.java))&&g.java,c=m?"a":"\u03b1",y=m?"b":"\u03b2",B=g.document||{},f=g.navigator||{},a=g.platform,z=f.userAgent||"",v=g.operamini||g.opera,l=/Opera/,k=l.test(k=x(v))?k:(v=null);function h(C){C=String(C);return C.charAt(0).toUpperCase()+C.slice(1)}function b(D,F){var C=-1,E=D.length;if(E==E>>>0){while(++C<E){F(D[C],C,D)}}else{w(D,F)}}function w(C,E){for(var D in C){A(C,D)&&E(C[D],D,C)}}function u(C){C=t(C);return/^(?:webOS|i(?:OS|P))/.test(C)?C:h(C)}function x(C){return C==null?h(C):r.call(C).slice(8,-1)}function A(){A=function(C,D){var E=C!=null&&(C.constructor||Object).prototype;return !!E&&D in Object(C)&&!(D in E&&C[D]===E[D])};if(x(i)=="Function"){A=function(C,D){return C!=null&&i.call(C,D)}}else{if({}.__proto__==Object.prototype){A=function(D,E){var C=false;if(D!=null){D=Object(D);D.__proto__=[D.__proto__,D.__proto__=null,C=E in D][0]}return C}}}return A.apply(this,arguments)}function p(C,E){var D=C!=null?typeof C[E]:"number";return !/^(?:boolean|number|string|undefined)$/.test(D)&&(D=="object"?!!C[E]:true)}function j(E,D){var C=null;b(E,function(G,F){C=D(C,G,F,E)});return C}function s(C){return String(C).replace(/([ -])(?!$)/g,"$1?")}function t(C){return String(C).replace(/^ +| +$/g,"")}function n(K){K||(K=z);var T,V=K,J=[],F=null,L=K==z,D=L&&v&&typeof v.version=="function"&&v.version(),P=M([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),W=I(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),C=N(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk)"},"Nook","PlayBook","TouchPad","Transformer","Xoom"]),S=H({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1}}),E=Q(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function M(X){return j(X,function(Y,Z){return Y||RegExp("\\b"+(Z.pattern||s(Z))+"\\b","i").exec(K)&&(Z.label||Z)})}function H(X){return j(X,function(Y,aa,Z){return Y||(aa[C]||aa[0,/^[a-z]+/i.exec(C)]||RegExp("\\b"+(Z.pattern||s(Z))+"(?:\\b|\\w*\\d)","i").exec(K))&&(Z.label||Z)})}function I(X){return j(X,function(Y,Z){return Y||RegExp("\\b"+(Z.pattern||s(Z))+"\\b","i").exec(K)&&(Z.label||Z)})}function Q(X){return j(X,function(Y,aa){var Z=aa.pattern||s(aa);if(!Y&&(Y=RegExp("\\b"+Z+"(?:/[\\d.]+|[ \\w.]*)","i").exec(K))){T={"6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};if(/^Win/i.test(Y)&&(T=T[0,/[\d.]+$/.exec(Y)])){Y="Windows "+T}Y=u(String(Y).replace(RegExp(Z,"i"),aa.label||aa).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])}return Y})}function N(X){return j(X,function(Y,aa){var Z=aa.pattern||s(aa);if(!Y&&(Y=RegExp("\\b"+Z+" *\\d+[.\\w_]*","i").exec(K)||RegExp("\\b"+Z+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(K))){if((Y=String(aa.label||Y).split("/"))[1]&&!/[\d.]+/.test(Y[0])){Y[0]+=" "+Y[1]}aa=aa.label||aa;Y=u(Y[0].replace(RegExp(Z,"i"),aa).replace(RegExp("; *(?:"+aa+"[_-])?","i")," ").replace(RegExp("("+aa+")(\\w)","i"),"$1 $2"))}return Y})}function G(X){return j(X,function(Y,Z){return Y||(RegExp(Z+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/-]*)","i").exec(K)||0)[1]||null})}function U(){g.platform=a;return this}function R(){return this.description||""}P&&(P=[P]);if(S&&!C){C=N([S])}if(/\bSimulator\b/i.test(K)){C=(C?C+" ":"")+"Simulator"}if(/^iP/.test(C)){W||(W="Safari");E="iOS"+((T=/ OS ([\d_]+)/i.exec(K))?" "+T[1].replace(/_/g,"."):"")}else{if(W=="Konqueror"&&!/buntu/i.test(E)){E="Kubuntu"}else{if(W=="Chrome"&&S){W="Android Browser";E=/Android/.test(E)?E:"Android"}else{if(!W||(T=!/\bMinefield\b/i.test(K)&&/Firefox|Safari/.exec(W))){if(W&&!C&&/[\/,]|^[^(]+?\)/.test(K.slice(K.indexOf(T+"/")+8))){W=null}if((T=C||S||E)&&(C||S||/Android|Symbian OS|Tablet OS|webOS/.test(E))){W=/[a-z]+(?: Hat)?/i.exec(/Android/.test(E)?E:T)+" Browser"}}}}}if(!D){D=G(["(?:Cloud9|Opera ?Mini|Raven|Silk)","Version",s(W),"(?:Firefox|Minefield|NetFront)"])}if(P=="iCab"&&parseFloat(D)>3){P=["WebKit"]}else{if(W=="Konqueror"&&/\bKHTML\b/i.test(K)){P=["KHTML"]}else{if(T=/Opera/.test(W)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(K)&&"WebKit"||!P&&/\bMSIE\b/i.test(K)&&(/^Mac/.test(E)?"Tasman":"Trident")){P=[T]}}}if(L){if(p(e,"global")){if(m){T=m.lang.System;V=T.getProperty("os.arch");E=E||T.getProperty("os.name")+" "+T.getProperty("os.version")}if(typeof exports=="object"&&exports){if(e==q&&typeof system=="object"&&(T=[system])[0]){E||(E=T[0].os||null);try{T[1]=require("ringo/engine").version;D=T[1].join(".");W="RingoJS"}catch(O){if(T[0].global==o){W="Narwhal"}}}else{if(typeof process=="object"&&(T=process)){W="Node.js";V=T.arch;E=T.platform;D=/[\d.]+/.exec(T.version)[0]}}}else{if(x(g.environment)=="Environment"){W="Rhino"}}}else{if(x(T=g.runtime)=="ScriptBridgingProxyObject"){W="Adobe AIR";E=T.flash.system.Capabilities.os}else{if(x(T=g.phantom)=="RuntimeObject"){W="PhantomJS";D=(T=T.version||null)&&(T.major+"."+T.minor+"."+T.patch)}else{if(typeof B.documentMode=="number"&&(T=/\bTrident\/(\d+)/i.exec(K))){D=[D,B.documentMode];if((T=+T[1]+4)!=D[1]){J.push("IE "+D[1]+" mode");P[1]="";D[1]=T}D=W=="IE"?String(D[1].toFixed(1)):D[0]}}}}E=E&&u(E)}if(D&&(T=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(K+";"+(L&&f.appMinorVersion))||/\bMinefield\b/i.test(K)&&"a")){F=/b/i.test(T)?"beta":"alpha";D=D.replace(RegExp(T+"\\+?$"),"")+(F=="beta"?y:c)+(/\d+\+?/.exec(T)||"")}if(W=="Maxthon"&&D){D=D.replace(/\.[\d.]+/,".x")}else{if(W=="Silk"){if(!/Mobi/i.test(K)){E="Android";J.unshift("desktop mode")}if(/Accelerated *= *true/i.test(K)){J.unshift("accelerated")}}else{if(W=="IE"&&(T=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(K)||0)[1])){W+=" Mobile";E="Windows Phone OS "+T+".x";J.unshift("desktop mode")}else{if((W=="IE"||W&&!C&&!/Browser/.test(W))&&(E=="Windows CE"||/Mobi/i.test(K))){W+=" Mobile"}else{if(W=="IE"&&L&&typeof external=="object"&&!external){J.unshift("platform preview")}else{if(/BlackBerry/.test(C)&&(T=(RegExp(C.replace(/ +/g," *")+"/([.\\d]+)","i").exec(K)||0)[1]||D)){E="Device Software "+T;D=null}else{if(this!=w&&((L&&v)||(/Opera/.test(W)&&/\b(?:MSIE|Firefox)\b/i.test(K))||(W=="Firefox"&&/OS X (?:\d+\.){2,}/.test(E))||(W=="IE"&&((E&&!/^Win/.test(E)&&D>5.5)||/Windows XP/.test(E)&&D>8||D==8&&!/Trident/.test(K))))&&!l.test(T=n.call(w,K.replace(l,"")+";"))&&T.name){T="ing as "+T.name+((T=T.version)?" "+T:"");if(l.test(W)){if(/IE/.test(T)&&E=="Mac OS"){E=null}T="identify"+T}else{T="mask"+T;if(k){W=u(k.replace(/([a-z])([A-Z])/g,"$1 $2"))}else{W="Opera"}if(/IE/.test(T)){E=null}if(!L){D=null}}P=["Presto"];J.push(T)}}}}}}}if((T=(/AppleWebKit\/([\d.]+\+?)/i.exec(K)||0)[1])){T=[parseFloat(T),T];if(W=="Safari"&&T[1].slice(-1)=="+"){W="WebKit Nightly";F="alpha";D=T[1].slice(0,-1)}else{if(D==T[1]||D==(/Safari\/([\d.]+\+?)/i.exec(K)||0)[1]){D=null}}T=[T[0],(/Chrome\/([\d.]+)/i.exec(K)||0)[1]];if(!L||(/internal|\n/i.test(r.toString())&&!T[1])){P[1]="like Safari";T=(T=T[0],T<400?1:T<500?2:T<526?3:T<533?4:T<534?"4+":T<535?5:"5")}else{P[1]="like Chrome";T=T[1]||(T=T[0],T<530?1:T<532?2:T<532.5?3:T<533?4:T<534.3?5:T<534.7?6:T<534.1?7:T<534.13?8:T<534.16?9:T<534.24?10:T<534.3?11:T<535.1?12:T<535.2?"13+":T<535.5?15:T<535.7?16:"17")}P[1]+=" "+(T+=typeof T=="number"?".x":/[.+]/.test(T)?"":"+");if(W=="Safari"&&(!D||parseInt(D)>45)){D=T}}if(D&&D.indexOf(T=/[\d.]+$/.exec(E))==0&&K.indexOf("/"+T+"-")>-1){E=t(E.replace(T,""))}if(P&&!/Avant|Nook/.test(W)&&(/Browser|Lunascape|Maxthon/.test(W)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(W)&&P[1])){(T=P[P.length-1])&&J.push(T)}if(J.length){J=["("+J.join("; ")+")"]}if(S&&C&&C.indexOf(S)<0){J.push("on "+S)}if(C){J.push((/^on /.test(J[J.length-1])?"":"on ")+C)}if((T=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i).test(V)&&!/\bi686\b/i.test(V)){E=E&&E+(T.test(E)?"":" 64-bit");if(W&&(/WOW64/i.test(K)||(L&&/\w(?:86|32)$/.test(f.cpuClass||f.platform)))){J.unshift("32-bit")}}K||(K=null);return{version:W&&D&&(J.unshift(D),D),name:W&&(J.unshift(W),W),os:E&&(W&&!(E==E.split(" ")[0]&&(E==W.split(" ")[0]||C))&&J.push(C?"("+E+")":"on "+E),E),description:J.length?J.join(" "):K,layout:P&&P[0],manufacturer:S,prerelease:F,product:C,ua:K,noConflict:U,parse:n,toString:R}}if(d){w(n(),function(D,C){d[C]=D})}else{if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("platform",function(){return n()})}else{g.platform=n()}}}(this));
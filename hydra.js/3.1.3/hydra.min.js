/*! Hydra.js v3.1.3 | Date:2013-05-26 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/
!function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;function r(){var a=+new Date+"",b=Math.floor(999999*Math.random())+1;return a+"_"+b}function s(a){var b,c;if(Object.keys)b=Object.keys(a).length;else{b=0;for(c in a)z(a,c)&&b++}return b}"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),p="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,b="undefined",q=Object.prototype,a=this,e=null,g=!1,c={},h="3.1.3",k=g,f=g;function t(a){return q.toString.call(a)}function u(a){return"[object Function]"===t(a)}function v(a){return"[object Array]"===t(a)}function w(a){k=a}function x(a){f=a}function y(a,b){return[].slice.call(a,b||0)}function z(a,b){return a.hasOwnProperty(b)}function A(a,b,c,d){var e;for(e in b)b.hasOwnProperty(e)&&a[e]&&"function"==typeof b[e]&&b[e](a,c,d)}function B(a,d,e,f,g){var h,i;return h=c[d],g&&a.isModuleStarted(d,e)&&a.stop(d,e),typeof h!==b&&(i=G(d),h.instances[e]=i,i.__instance_id__=e,A(i,a.oModifyInit,f,g),typeof f!==b?i.init(f):i.init()),i}function C(a,b){var c;for(c in b)z(b,c)&&(a[c]=b[c]);return a}function D(a,b,c,d){a[b]=function(a,b){return function(){var d=y(arguments,0);try{return b.apply(this,d)}catch(e){return l.log(c,a,e),!1}}}(b,d)}o={global:{}};function E(a,b){var c=[],d;if("undefined"!=typeof a)for(d in a)z(a,d)&&d===b&&(c=a[d]);return c}n={subscribers:function(a,b){return E(o[a],b)},_getChannelEvents:function(a,b){return"undefined"==typeof o[a]&&(o[a]={}),"undefined"==typeof o[a][b]&&(o[a][b]=[]),o[a][b]},_addSubscribers:function(a,b,c){var d;for(d in a)z(a,d)&&this.subscribeTo(b,d,a[d],c)},unsubscribeFrom:function(a,b,c){var d=this._getChannelEvents(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=this._getChannelEvents(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var b,c=a.events;if(!a||"undefined"==typeof c)return!1;for(b in c)z(c,b)&&("undefined"==typeof o[b]&&(o[b]={}),this._addSubscribers(c[b],b,a));return!0},_removeSubscribers:function(a,c){var d,e=0,f=0;if(typeof a!==b)for(d=a.length;d>e;e++)a[e].subscriber===c&&(f++,a.splice(e,1));return f},_removeSubscribersPerEvent:function(a,b,c){var d,e,f,g,h=0;for(d in a)z(a,d)&&(e=d.split(":"),f=b,g=d,"global"===e[0]&&(f=e[0],g=e[1]),h+=this._removeSubscribers(o[f][g],c));return h},unsubscribe:function(a){var b=0,c,d=a.events;if(!a||"undefined"==typeof d)return!1;for(c in d)z(d,c)&&("undefined"==typeof o[c]&&(o[c]={}),b=this._removeSubscribersPerEvent(d[c],c,a));return b>0},_avoidBlockUI:function(a,b,c,d){var e,f=a.concat();setTimeout(function g(){var a=+new Date;do e=f.shift(),e.handler.call(e.subscriber,b),k&&l.log(c,d,e);while(f.length>0&&+new Date-a<50);f.length>0&&setTimeout(g,25)},25)},publish:function(a,b,c){var d=this.subscribers(a,b).slice(),e=d.length,g,h;if(0===e)return!1;if(f)this._avoidBlockUI(d,c,a,b);else for(g=0;e>g;g++)h=d[g],h.handler.call(h.subscriber,c),k&&l.log(a,b,h);return!0},reset:function(){o={global:{}}}};function F(a,e){var f,g;return f=c[a].creator(e),f.__module_id__=a,g=f.init||function(){},f.__action__=e,f.events=f.events||{},f.init=function(){var a=y(arguments,0).concat(d);e.subscribe(f),g.apply(this,a)},f.handleAction=function(a){var c=this.events[a.type];typeof c!==b&&c.call(this,a)},f.onDestroy=f.onDestroy||function(){},f.destroy=function(){this.onDestroy(),e.unsubscribe(f)},f}function G(a){var d,e;if(typeof c[a]===b)throw new Error("The module "+a+" is not registered!");if(d=F(a,n),!k)for(e in d)z(d,e)&&u(d[e])&&D(d,e,a,d[e]);return d}l=a.console||{log:function(){}},m=function(){},m.prototype={type:"Module",getInstance:G,oModifyInit:{},register:function(a,b){return c[a]=new i(a,b),c[a]},_setSuper:function(a,b){a.__super__={},a.__super__.__instance__=b,a.__super__.__call__=function(b,c){var d=this;while(z(d,b)===g)d=d.__instance__.__super__;d[b].apply(a,c)}},_callInSuper:function(a){return function(){var b=y(arguments,0);a.apply(this,b)}},_mergeModuleExtended:function(a,c){var d;for(d in c)z(c,d)&&(typeof a.__super__!==b&&u(a[d])&&(a.__super__[d]=this._callInSuper(a[d])),a[d]=c[d])},_mergeModuleBase:function(a,b){var c;for(c in b)z(b,c)&&"__super__"!==c&&(a[c]=b[c])},_merge:function(a,b){var c={};return this._setSuper(c,a),this._mergeModuleBase(c,a),this._mergeModuleExtended(c,b),c},extend:function(a,d,e){var f,g,h,j,k,l,m;return m=this,f=c[a],g=a,h=function(){},"string"==typeof d?(g=d,h=e):h=d,typeof f!==b?(k=h(n),j=f.creator(n),c[g]=new i(g,function(a){return l=m._merge(j,k),l.__action__=a,l}),c[g]):void 0},setInstance:function(a,b,d){var e=c[a];if(!e)throw new Error("The module "+a+" is not registered!");return e.instances[b]=d,e},setVars:function(a){d=typeof d!==b?C(d,a):a},getVars:function(){return C({},d)},_multiModuleStart:function(a,b,c,d){var e,f,g,h,i,j;for(v(b)&&(e=b.slice(0)),v(c)&&(f=c.slice(0)),v(d)&&(g=d.slice(0)),h=0,i=a.length;i>h;h++)j=a[h],b=e&&e[h]||r(),c=f&&f[h]||c,d=g&&g[h]||d,B(this,j,b,c,d)},_singleModuleStart:function(a,b,c,d){"string"!=typeof b&&(c=b,d=c,b=r()),B(this,a,b,c,d)},start:function(a,b,c,d){var e=v(a);e?this._multiModuleStart(a.slice(0),b,c,d):this._singleModuleStart(a,b,c,d)},isModuleStarted:function(a,d){var e=!1;return e=typeof d===b?typeof c[a]!==b&&s(c[a].instances)>0:typeof c[a]!==b&&typeof c[a].instances[d]!==b},startAll:function(){var a,d;for(a in c)z(c,a)&&(d=c[a],typeof d!==b&&this.start(a,r()))},_multiModuleStop:function(a){var c,d=a.instances,e;for(c in d)z(d,c)&&(e=d[c],typeof a!==b&&typeof e!==b&&e.destroy());a.instances={}},_singleModuleStop:function(a,c,d){var e=a.instances[d];typeof a!==b&&typeof e!==b&&(e.destroy(),delete a.instances[d])},stop:function(a,d){var e;return e=c[a],typeof e===b?!1:(typeof d!==b?this._singleModuleStop(e,a,d):this._multiModuleStop(e),!0)},_stopOneByOne:function(a,b){var c;for(c in a)z(a,c)&&this.stop(b,c)},stopAll:function(){var a;for(a in c)z(c,a)&&typeof c[a]!==b&&this._stopOneByOne(c[a].instances,a)},_delete:function(a){typeof c[a]!==b&&delete c[a]},remove:function(a){var d=c[a];if(typeof d===b)return null;if(typeof d!==b)try{return d}finally{this._delete(a)}return null}};function H(){return l}function I(a){l=a}j=function(){},j.version=h,j.bus=n,j.errorHandler=H,j.setErrorHandler=I,j.module=new m,j.setUnblockUI=x,j.setDebug=w,j.getDebug=function(){return k},j.extend=function(a,c){this[a]=typeof this[a]===b?c:C(this[a],c)},j.noConflict=function(a,c,d){return typeof this[a]!==b?(c[d]=this[a],!0):!1},j.addExtensionBeforeInit=function(a){j.module.oModifyInit=C(j.module.oModifyInit,a)},i=function(a,c){if(typeof c===b)throw new Error("Something goes wrong!");this.creator=c,this.instances={},this.sModuleId=a},i.prototype={start:function(a){return j.module.start(this.sModuleId,a),this},extend:function(a,b){return j.module.extend(this.sModuleId,a,b),this},stop:function(){return j.module.stop(this.sModuleId),this}},a.Hydra=j,p?module.exports=j:"undefined"!=typeof define&&define("hydra",[],function(){return j})}.call(this);
//# sourceMappingURL=hydra.min.map
